Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=0,r=this.length>>0,i;if(typeof t!="function")throw new TypeError("First argument is not callable");if(arguments.length<2){if(r===0)throw new TypeError("Array length is 0 and no second argument");i=this[0],n=1}else i=arguments[1];while(n<r)n in this&&(i=t.call(undefined,i,this[n],n,this)),++n;return i}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(this==null)throw new TypeError(" this is null or not defined");var i=Object(this),s=i.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=0;while(r<s){var o;r in i&&(o=i[r],e.call(n,o,r,i)),r++}}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=[],i=arguments[1];for(var s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r}),Array.prototype.every||(Array.prototype.every=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=arguments[1];for(var i=0;i<n;i++)if(i in t&&!e.call(r,t[i],i,t))return!1;return!0});var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){function i(e){var t=-1,n=e.length,r=[];while(++t<n)r.push(e[t]);return r}function s(e){return Array.prototype.slice.call(e)}function a(){return this}function f(e,t,n){return function(){var r=n.apply(t,arguments);return arguments.length?e:r}}function l(e){return e!=null&&!isNaN(e)}function c(e){return e.length}function h(e){return e==null}function p(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function m(){}function g(e){function r(){var n=t,r=-1,i=n.length,s;while(++r<i)(s=n[r].on)&&s.apply(this,arguments);return e}var t=[],n={};return r.on=function(r,i){var s,o;if(arguments.length<2)return(s=n[r])&&s.on;if(s=n[r])s.on=null,t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1)),delete n[r];return i&&t.push(n[r]={on:i}),e},r}function w(e,t){return t-(e?1+Math.floor(Math.log(e+Math.pow(10,1+Math.floor(Math.log(e)/Math.LN10)-t))/Math.LN10):1)}function E(e){return e+""}function S(e){var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),r=[];while(t>0)r.push(e.substring(t-=3,t+3));return r.reverse().join(",")+n}function T(e,t){return{scale:Math.pow(10,(8-t)*3),symbol:e}}function A(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function O(e){return function(t){return 1-e(1-t)}}function M(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function _(e){return e}function D(e){return function(t){return Math.pow(t,e)}}function P(e){return 1-Math.cos(e*Math.PI/2)}function H(e){return Math.pow(2,10*(e-1))}function B(e){return 1-Math.sqrt(1-e*e)}function j(e,t){var n;return arguments.length<2&&(t=.45),arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin((r-n)*2*Math.PI/t)}}function F(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function I(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function q(){d3.event.stopPropagation(),d3.event.preventDefault()}function U(e){return e=="transform"?d3.interpolateTransform:d3.interpolate}function z(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function W(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function X(e,t,n){return new V(e,t,n)}function V(e,t,n){this.r=e,this.g=t,this.b=n}function $(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function J(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(Q(u[0]),Q(u[1]),Q(u[2]))}}return(a=G[e])?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&(e.length===4?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):e.length===7&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),r=parseInt(r,16),i=parseInt(i,16),s=parseInt(s,16)),t(r,i,s))}function K(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):u=o=0,Z(o,u,a)}function Q(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function Z(e,t,n){return new et(e,t,n)}function et(e,t,n){this.h=e,this.s=t,this.l=n}function tt(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e%=360,e<0&&(e+=360),t=t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,X(o(e+120),o(e),o(e-120))}function nt(e){return u(e,at),e}function ft(e){return function(){return rt(e,this)}}function lt(e){return function(){return it(e,this)}}function ht(e,t){function s(){if(t=this.classList)return t.add(e);var t=this.className,r=t.baseVal!=null,i=r?t.baseVal:t;n.lastIndex=0,n.test(i)||(i=p(i+" "+e),r?t.baseVal=i:this.className=i)}function o(){if(t=this.classList)return t.remove(e);var t=this.className,r=t.baseVal!=null,i=r?t.baseVal:t;i=p(i.replace(n," ")),r?t.baseVal=i:this.className=i}function u(){(t.apply(this,arguments)?s:o).call(this)}var n=new RegExp("(^|\\s+)"+d3.requote(e)+"(\\s+|$)","g");if(arguments.length<2){var r=this.node();if(i=r.classList)return i.contains(e);var i=r.className;return n.lastIndex=0,n.test(i.baseVal!=null?i.baseVal:i)}return this.each(typeof t=="function"?u:t?s:o)}function pt(e){return{__data__:e}}function dt(e){return function(){return ut(this,e)}}function vt(e){return arguments.length||(e=d3.ascending),function(t,n){return e(t&&t.__data__,n&&n.__data__)}}function gt(e){return u(e,yt),e}function bt(e,t,n){u(e,xt);var r={},i=d3.dispatch("start","end"),s=Ct;return e.id=t,e.time=n,e.tween=function(t,n){return arguments.length<2?r[t]:(n==null?delete r[t]:r[t]=n,e)},e.ease=function(t){return arguments.length?(s=typeof t=="function"?t:d3.ease.apply(d3,arguments),e):s},e.each=function(t,n){return arguments.length<2?kt.call(e,t):(i.on(t,n),e)},d3.timer(function(o){return e.each(function(u,a,f){function v(e){if(d.active>t)return g();d.active=t;for(var s in r)(s=r[s].call(c,u,a))&&l.push(s);return i.start.call(c,u,a),m(e)||d3.timer(m,0,n),1}function m(e){if(d.active!==t)return g();var n=(e-h)/p,r=s(n),o=l.length;while(o>0)l[--o].call(c,r);if(n>=1)return g(),Nt=t,i.end.call(c,u,a),Nt=0,1}function g(){return--d.count||delete c.__transition__,1}var l=[],c=this,h=e[f][a].delay,p=e[f][a].duration,d=c.__transition__||(c.__transition__={active:0,count:0});++d.count,h<=o?v(o):d3.timer(v,h,n)}),1},0,n),e}function Et(e,t,n){return n!=""&&wt}function St(e,t){function r(e,r,i){var s=t.call(this,e,r);return s==null?i!=""&&wt:i!=s&&n(i,s)}function i(e,r,i){return i!=t&&n(i,t)}var n=U(e);return typeof t=="function"?r:t==null?Et:(t+="",i)}function kt(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];o&&e.call(o=o.node,o.__data__,i,t)}return this}function Mt(){var e,t=Date.now(),n=Lt;while(n)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var r=_t()-t;r>24?(isFinite(r)&&(clearTimeout(Ot),Ot=setTimeout(Mt,r)),At=0):(At=1,Dt(Mt))}function _t(){var e=null,t=Lt,n=Infinity;while(t)t.flush?t=e?e.next=t.next:Lt=t.next:(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function Pt(e){var t=[e.a,e.b],n=[e.c,e.d],r=Bt(t),i=Ht(t,n),s=Bt(jt(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ft,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Ft:0}function Ht(e,t){return e[0]*t[0]+e[1]*t[1]}function Bt(e){var t=Math.sqrt(Ht(e,e));return t&&(e[0]/=t,e[1]/=t),t}function jt(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function It(){}function qt(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Rt(e){return e.rangeExtent?e.rangeExtent():qt(e.range())}function Ut(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;s<i&&(o=n,n=r,r=o,o=i,i=s,s=o);if(o=s-i)t=t(o),e[n]=t.floor(i),e[r]=t.ceil(s);return e}function zt(){return Math}function Wt(e,t,n,r){function o(){var o=e.length==2?Qt:Gt,a=r?W:z;return i=o(e,t,a,n),s=o(t,e,a,d3.interpolate),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate(d3.interpolateRound)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return Jt(e,t)},u.tickFormat=function(t){return Kt(e,t)},u.nice=function(){return Ut(e,Vt),o()},u.copy=function(){return Wt(e,t,n,r)},o()}function Xt(e,t){return d3.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Vt(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function $t(e,t){var n=qt(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function Jt(e,t){return d3.range.apply(d3,$t(e,t))}function Kt(e,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log($t(e,t)[2])/Math.LN10+.01))+"f")}function Qt(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Gt(e,t,n,r){var i=[],s=[],o=0,u=e.length-1;e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());while(++o<=u)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=d3.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function Yt(e,t){function r(n){return e(t(n))}var n=t.pow;return r.invert=function(t){return n(e.invert(t))},r.domain=function(i){return arguments.length?(t=i[0]<0?tn:en,n=t.pow,e.domain(i.map(t)),r):e.domain().map(n)},r.nice=function(){return e.domain(Ut(e.domain(),zt)),r},r.ticks=function(){var r=qt(e.domain()),i=[];if(r.every(isFinite)){var s=Math.floor(r[0]),o=Math.ceil(r[1]),u=n(r[0]),a=n(r[1]);if(t===tn){i.push(n(s));for(;s++<o;)for(var f=9;f>0;f--)i.push(n(s)*f)}else{for(;s<o;s++)for(var f=1;f<10;f++)i.push(n(s)*f);i.push(n(s))}for(s=0;i[s]<u;s++);for(o=i.length;i[o-1]>a;o--);i=i.slice(s,o)}return i},r.tickFormat=function(e,i){arguments.length<2&&(i=Zt);if(arguments.length<1)return i;var s=e/r.ticks().length,o=t===tn?(u=-1e-12,Math.floor):(u=1e-12,Math.ceil),u;return function(e){return e/n(o(t(e)+u))<s?i(e):""}},r.copy=function(){return Yt(e.copy(),t)},Xt(r,e)}function en(e){return Math.log(e<0?0:e)/Math.LN10}function tn(e){return-Math.log(e>0?0:-e)/Math.LN10}function nn(e,t){function i(t){return e(n(t))}var n=rn(t),r=rn(1/t);return i.invert=function(t){return r(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t.map(n)),i):e.domain().map(r)},i.ticks=function(e){return Jt(i.domain(),e)},i.tickFormat=function(e){return Kt(i.domain(),e)},i.nice=function(){return i.domain(Ut(i.domain(),Vt))},i.exponent=function(e){if(!arguments.length)return t;var s=i.domain();return n=rn(t=e),r=rn(1/t),i.domain(s)},i.copy=function(){return nn(e.copy(),t)},Xt(i,e)}function rn(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function sn(e,t){function s(t){return r[((n[t]||(n[t]=e.push(t)))-1)%r.length]}function o(t,n){return d3.range(e.length).map(function(e){return t+n*e})}var n,r,i;return s.domain=function(r){if(!arguments.length)return e;e=[],n={};var i=-1,o=r.length,u;while(++i<o)n[u=r[i]]||(n[u]=e.push(u));return s[t.t](t.x,t.p)},s.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",x:e},s):r},s.rangePoints=function(n,u){arguments.length<2&&(u=0);var a=n[0],f=n[1],l=(f-a)/(e.length-1+u);return r=o(e.length<2?(a+f)/2:a+l*u/2,l),i=0,t={t:"rangePoints",x:n,p:u},s},s.rangeBands=function(n,u){arguments.length<2&&(u=0);var a=n[0],f=n[1],l=(f-a)/(e.length+u);return r=o(a+l*u,l),i=l*(1-u),t={t:"rangeBands",x:n,p:u},s},s.rangeRoundBands=function(n,u){arguments.length<2&&(u=0);var a=n[0],f=n[1],l=Math.floor((f-a)/(e.length+u));return r=o(a+Math.round((f-a-(e.length-u)*l)/2),l),i=Math.round(l*(1-u)),t={t:"rangeRoundBands",x:n,p:u},s},s.rangeBand=function(){return i},s.rangeExtent=function(){return t.t==="range"?qt(t.x):t.x},s.copy=function(){return sn(e,t)},s.domain(e)}function ln(e,t){function r(){var r=0,s=e.length,o=t.length;n=[];while(++r<o)n[r-1]=d3.quantile(e,r/o);return i}function i(e){return isNaN(e=+e)?NaN:t[d3.bisect(n,e)]}var n;return i.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),r()):e},i.range=function(e){return arguments.length?(t=e,r()):t},i.quantiles=function(){return n},i.copy=function(){return ln(e,t)},r()}function cn(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.copy=function(){return cn(e,t,n)},o()}function dn(e){return e.innerRadius}function vn(e){return e.outerRadius}function mn(e){return e.startAngle}function gn(e){return e.endAngle}function yn(e){function o(r){return r.length<1?null:"M"+i(e(bn(this,r,t,n)),s)}var t=wn,n=En,r="linear",i=Sn[r],s=.7;return o.x=function(e){return arguments.length?(t=e,o):t},o.y=function(e){return arguments.length?(n=e,o):n},o.interpolate=function(e){return arguments.length?(i=Sn[r=e],o):r},o.tension=function(e){return arguments.length?(s=e,o):s},o}function bn(e,t,n,r){var i=[],s=-1,o=t.length,u=typeof n=="function",a=typeof r=="function",f;if(u&&a)while(++s<o)i.push([n.call(e,f=t[s],s),r.call(e,f,s)]);else if(u)while(++s<o)i.push([n.call(e,t[s],s),r]);else if(a)while(++s<o)i.push([n,r.call(e,t[s],s)]);else while(++s<o)i.push([n,r]);return i}function wn(e){return e[0]}function En(e){return e[1]}function xn(e){return e<1e-4?Math.round(e*1e4)/1e4:e}function Tn(e){var t=0,n=e.length,r=e[0],i=[xn(r[0]),",",xn(r[1])];while(++t<n)i.push("L",xn((r=e[t])[0]),",",xn(r[1]));return i.join("")}function Nn(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Cn(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function kn(e,t){return e.length<4?Tn(e):e[1]+On(e.slice(1,e.length-1),Mn(e,t))}function Ln(e,t){return e.length<3?Tn(e):e[0]+On((e.push(e[0]),e),Mn([e[e.length-2]].concat(e,[e[1]]),t))}function An(e,t,n){return e.length<3?Tn(e):e[0]+On(e,Mn(e,t))}function On(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Tn(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function Mn(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function _n(e){if(e.length<3)return Tn(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s];qn(a,o,u);while(++t<n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),qn(a,o,u);t=-1;while(++t<2)o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),qn(a,o,u);return a.join("")}function Dn(e){if(e.length<4)return Tn(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(Bn(In,s)+","+Bn(In,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),qn(t,s,o);return t.join("")}function Pn(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[Bn(In,o),",",Bn(In,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),qn(t,o,u);return t.join("")}function Hn(e,t){var n=e.length-1,r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o);return _n(e)}function Bn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function qn(e,t,n){e.push("C",Bn(jn,t),",",Bn(jn,n),",",Bn(Fn,t),",",Bn(Fn,n),",",Bn(In,t),",",Bn(In,n))}function Rn(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Un(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Rn(i,s);while(++t<n)r[t]=o+(o=Rn(i=s,s=e[t+1]));return r[t]=o,r}function zn(e){var t=[],n,r,i,s,o=Un(e),u=-1,a=e.length-1;while(++u<a)n=Rn(e[u],e[u+1]),Math.abs(n)<1e-6?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function Wn(e){return e.length<3?Tn(e):e[0]+On(e,zn(e))}function Xn(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]+hn,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function Vn(e){function f(s){if(s.length<1)return null;var f=bn(this,s,t,r),l=bn(this,s,t===n?$n(f):n,r===i?Jn(f):i);return"M"+o(e(l),a)+"L"+u(e(f.reverse()),a)+"Z"}var t=wn,n=wn,r=0,i=En,s,o,u,a=.7;return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=i=e,f):i},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(i=e,f):i},f.interpolate=function(e){return arguments.length?(o=Sn[s=e],u=o.reverse||o,f):s},f.tension=function(e){return arguments.length?(a=e,f):a},f.interpolate("linear")}function $n(e){return function(t,n){return e[n][0]}}function Jn(e){return function(t,n){return e[n][1]}}function Kn(e){return e.source}function Qn(e){return e.target}function Gn(e){return e.radius}function Yn(e){return e.startAngle}function Zn(e){return e.endAngle}function er(e){return[e.x,e.y]}function tr(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+hn;return[n*Math.cos(r),n*Math.sin(r)]}}function rr(e,t){var n=(e.ownerSVGElement||e).createSVGPoint();if(nr<0&&(window.scrollX||window.scrollY)){var r=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0),i=r[0][0].getScreenCTM();nr=!i.f&&!i.e,r.remove()}return nr?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}function ir(){return 64}function sr(){return"circle"}function fr(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function lr(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function cr(e,t,n){i=[];if(n&&t.length>1){var r=qt(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function Sr(e,t){e.select(".extent").attr("x",t[0][0]),e.selectAll(".n,.s,.w,.nw,.sw").attr("x",t[0][0]-2),e.selectAll(".e,.ne,.se").attr("x",t[1][0]-3),e.selectAll(".extent,.n,.s").attr("width",t[1][0]-t[0][0])}function xr(e,t){e.select(".extent").attr("y",t[0][1]),e.selectAll(".n,.e,.w,.nw,.ne").attr("y",t[0][1]-3),e.selectAll(".s,.se,.sw").attr("y",t[1][1]-4),e.selectAll(".extent,.e,.w").attr("height",t[1][1]-t[0][1])}function Tr(){d3.event.keyCode==32&&dr&&!yr&&(wr=null,Er[0]-=gr[1][0],Er[1]-=gr[1][1],yr=2,q())}function Nr(){d3.event.keyCode==32&&yr==2&&(Er[0]+=gr[1][0],Er[1]+=gr[1][1],yr=0,q())}function Cr(){if(Er){var e=d3.svg.mouse(dr),t=d3.select(dr);yr||(d3.event.altKey?(wr||(wr=[(gr[0][0]+gr[1][0])/2,(gr[0][1]+gr[1][1])/2]),Er[0]=gr[+(e[0]<wr[0])][0],Er[1]=gr[+(e[1]<wr[1])][1]):wr=null),vr&&(kr(e,vr,0),Sr(t,gr)),mr&&(kr(e,mr,1),xr(t,gr)),pr("brush")}}function kr(e,t,n){var r=Rt(t),i=r[0],s=r[1],o=Er[n],u=gr[1][n]-gr[0][n],a,f;yr&&(i-=o,s-=u+o),a=Math.max(i,Math.min(s,e[n])),yr?f=(a+=o)+u:(wr&&(o=Math.max(i,Math.min(s,2*wr[n]-a))),o<a?(f=a,a=o):f=o),gr[0][n]=a,gr[1][n]=f}function Lr(){Er&&(Cr(),d3.select(dr).selectAll(".resize").style("pointer-events",hr.empty()?"none":"all"),pr("brushend"),hr=pr=dr=vr=mr=gr=yr=br=wr=Er=null,q())}function jr(e){var t=Fr(),n=d3.event,r=d3.event={type:e};t&&(r.x=t[0]+Pr[0],r.y=t[1]+Pr[1],r.dx=t[0]-Hr[0],r.dy=t[1]-Hr[1],Br|=r.dx|r.dy,Hr=t);try{Or[e].apply(_r,Dr)}finally{d3.event=n}n.stopPropagation(),n.preventDefault()}function Fr(){var e=_r.parentNode,t=d3.event.changedTouches;return e&&(t?d3.svg.touches(e,t)[0]:d3.svg.mouse(e))}function Ir(){if(!_r)return;var e=_r.parentNode;if(!e)return qr();jr("drag"),q()}function qr(){if(!_r)return;jr("dragend"),Br&&(q(),Br=d3.event.target===Mr),Or=Mr=_r=Dr=Pr=Hr=null}function Rr(){Br&&(q(),Br=0)}function ei(e){return[e[0]-$r[0],e[1]-$r[1],$r[2]]}function ti(){Ur||(Ur=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e=d3.event,t;try{Ur.scrollTop=1e3,Ur.dispatchEvent(e),t=1e3-Ur.scrollTop}catch(n){t=e.wheelDelta||-e.detail*5}return t*.005}function ni(){var e=d3.svg.touches(Gr),t=-1,n=e.length,r;while(++t<n)Xr[(r=e[t]).identifier]=ei(r);return e}function ri(){var e=d3.svg.touches(Gr);switch(e.length){case 1:var t=e[0];ui($r[2],t,Xr[t.identifier]);break;case 2:var n=e[0],r=e[1],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],s=Xr[n.identifier],o=Xr[r.identifier],u=[(s[0]+o[0])/2,(s[1]+o[1])/2,s[2]];ui(Math.log(d3.event.scale)/Math.LN2+s[2],i,u)}}function ii(){Wr=null,zr&&(Zr=1,ui($r[2],d3.svg.mouse(Gr),zr))}function si(){zr&&(Zr&&(q(),Zr=Qr===d3.event.target),$r=Jr=Kr=Qr=Gr=Yr=zr=null)}function oi(){Zr&&(q(),Zr=0)}function ui(e,t,n){function c(e,t,n){e.domain(e.range().map(function(s){return e.invert((s-n)*r/i+t)}))}e=fi(e,2);var r=Math.pow(2,$r[2]),i=Math.pow(2,e),s=Math.pow(2,($r[2]=e)-n[2]),o=$r[0],u=$r[1],a=$r[0]=fi(t[0]-n[0]*s,0,i),f=$r[1]=fi(t[1]-n[1]*s,1,i),l=d3.event;d3.event={scale:i,translate:[a,f],transform:function(e,t){e&&c(e,o,a),t&&c(t,u,f)}};try{Kr.apply(Gr,Yr)}finally{d3.event=l}l.preventDefault()}function fi(e,t,n){var r=Jr[t],i=r[0],s=r[1];return arguments.length===3?Math.max(s*(s===Infinity?-Infinity:1/n-1),Math.min(i===-Infinity?Infinity:i,e/n))*n:Math.max(i,Math.min(s,e))}Date.now||(Date.now=function(){return+(new Date)});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(e){if(typeof CSSStyleDeclaration!="undefined"){var t=CSSStyleDeclaration.prototype,n=t.setProperty;t.setProperty=function(e,t,r){n.call(this,e,t+"",r)}}}d3={version:"2.7.4"};var r=s;try{r(document.documentElement.childNodes)[0].nodeType}catch(o){r=i}var u=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};d3.functor=function(e){return typeof e=="function"?e:function(){return e}},d3.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=f(e,t,t[i]);return e},d3.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},d3.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},d3.mean=function(e,t){var n=e.length,r,i=0,s=-1,o=0;if(arguments.length===1)while(++s<n)l(r=e[s])&&(i+=(r-i)/++o);else while(++s<n)l(r=t.call(e,e[s],s))&&(i+=(r-i)/++o);return o?i:undefined},d3.median=function(e,t){return arguments.length>1&&(e=e.map(t)),e=e.filter(l),e.length?d3.quantile(e.sort(d3.ascending),.5):undefined},d3.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},d3.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},d3.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r&&((i=o=e[n])==null||i!=i))i=o=undefined;while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r&&((i=o=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},d3.random={normal:function(e,t){return arguments.length<2&&(t=1),arguments.length<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}}},d3.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)isNaN(i=+e[s])||(n+=i);else while(++s<r)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n},d3.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=e[r-1],s=n-r;return s?i+s*(e[r]-i):i},d3.transpose=function(e){return d3.zip.apply(d3,e)},d3.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=d3.min(arguments,c),n=new Array(t);++e<t;)for(var r=-1,i,s=n[e]=new Array(i);++r<i;)s[r]=arguments[r][e];return n},d3.bisectLeft=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;e[i]<t?n=i+1:r=i}return n},d3.bisect=d3.bisectRight=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;t<e[i]?r=i:n=i+1}return n},d3.first=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])>0&&(i=s);return i},d3.last=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])<=0&&(i=s);return i},d3.nest=function(){function s(n,o){if(o>=t.length)return i?i.call(e,n):r?n.sort(r):n;var u=-1,a=n.length,f=t[o++],l,c,h={};while(++u<a)(l=f(c=n[u]))in h?h[l].push(c):h[l]=[c];for(l in h)h[l]=s(h[l],o);return h}function o(e,r){if(r>=t.length)return e;var i=[],s=n[r++],u;for(u in e)i.push({key:u,values:o(e[u],r)});return s&&i.sort(function(e,t){return s(e.key,t.key)}),i}var e={},t=[],n=[],r,i;return e.map=function(e){return s(e,0)},e.entries=function(e){return o(s(e,0),0)},e.key=function(n){return t.push(n),e},e.sortKeys=function(r){return n[t.length-1]=r,e},e.sortValues=function(t){return r=t,e},e.rollup=function(t){return i=t,e},e},d3.keys=function(e){var t=[];for(var n in e)t.push(n);return t},d3.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},d3.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},d3.permute=function(e,t){var n=[],r=-1,i=t.length;while(++r<i)n[r]=e[t[r]];return n},d3.merge=function(e){return Array.prototype.concat.apply([],e)},d3.split=function(e,t){var n=[],r=[],i,s=-1,o=e.length;arguments.length<2&&(t=h);while(++s<o)t.call(r,i=e[s],s)?r=[]:(r.length||n.push(r),r.push(i));return n},d3.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n==Infinity)throw new Error("infinite range");var r=[],i=-1,s;if(n<0)while((s=e+n*++i)>t)r.push(s);else while((s=e+n*++i)<t)r.push(s);return r},d3.requote=function(e){return e.replace(d,"\\$&")};var d=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},d3.xhr=function(e,t,n){var r;window.XMLHttpRequest?r=new XMLHttpRequest:window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLHTTP")),arguments.length<3?(n=t,t=null):t&&r.overrideMimeType&&r.overrideMimeType(t),r.open("GET",e,!0),t&&r.setRequestHeader("Accept",t),r.onreadystatechange=function(){r.readyState===4&&n(r.status<300?r:null)},r.send(null)},d3.text=function(e,t,n){function r(e){n(e&&e.responseText)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)},d3.json=function(e,t){d3.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},d3.html=function(e,t){d3.text(e,"text/html",function(e){if(e!=null){var n=document.createRange();n.selectNode(document.body),e=n.createContextualFragment(e)}t(e)})},d3.xml=function(e,t,n){function r(e){n(e&&e.responseXML)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)};var v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:v,qualify:function(e){var t=e.indexOf(":");return t<0?e in v?{space:v[e],local:e}:e:{space:v[e.substring(0,t)],local:e.substring(t+1)}}},d3.dispatch=function(){var e=new m,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=g(e);return e},m.prototype.on=function(e,t){var n=e.indexOf("."),r="";return n>0&&(r=e.substring(n+1),e=e.substring(0,n)),arguments.length<2?this[e].on(r):this[e].on(r,t)},d3.format=function(e){var t=y.exec(e),n=t[1]||" ",r=t[3]||"",i=t[5],s=+t[6],o=t[7],u=t[8],a=t[9],f=1,l="",c=!1;u&&(u=+u.substring(1)),i&&(n="0",o&&(s-=Math.floor((s-1)/4)));switch(a){case"n":o=!0,a="g";break;case"%":f=100,l="%",a="f";break;case"p":f=100,l="%",a="r";break;case"d":c=!0,u=0;break;case"s":f=-1,a="r"}return a=="r"&&!u&&(a="g"),a=b[a]||E,function(e){if(c&&e%1)return"";var t=e<0&&(e=-e)?"−":r;if(f<0){var h=d3.formatPrefix(e,u);e*=h.scale,l=h.symbol}else e*=f;e=a(e,u);if(i){var p=e.length+t.length;p<s&&(e=(new Array(s-p+1)).join(n)+e),o&&(e=S(e)),e=t+e}else{o&&(e=S(e)),e=t+e;var p=e.length;p<s&&(e=(new Array(s-p+1)).join(n)+e)}return e+l}};var y=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,b={g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return d3.round(e,t=w(e,t)).toFixed(Math.max(0,Math.min(20,t)))}},x=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(T);d3.formatPrefix=function(e,t){var n=0;return e&&(e<0&&(e*=-1),t&&(e=d3.round(e,w(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,Math.floor((n<=0?n+1:n-1)/3)*3))),x[8+n/3]};var N=D(2),C=D(3),k={linear:function(){return _},poly:D,quad:function(){return N},cubic:function(){return C},sin:function(){return P},exp:function(){return H},circle:function(){return B},elastic:j,back:F,bounce:function(){return I}},L={"in":function(e){return e},out:O,"in-out":M,"out-in":function(e){return M(O(e))}};d3.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return A(L[r](k[n].apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(e,t){var n=d3.interpolators.length,r;while(--n>=0&&!(r=d3.interpolators[n](e,t)));return r},d3.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},d3.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},d3.interpolateString=function(e,t){var n,r,i,s=0,o=0,u=[],a=[],f,l;R.lastIndex=0;for(r=0;n=R.exec(t);++r)n.index&&u.push(t.substring(s,o=n.index)),a.push({i:u.length,x:n[0]}),u.push(null),s=R.lastIndex;s<t.length&&u.push(t.substring(s));for(r=0,f=a.length;(n=R.exec(e))&&r<f;++r){l=a[r];if(l.x==n[0]){if(l.i)if(u[l.i+1]==null){u[l.i-1]+=l.x,u.splice(l.i,1);for(i=r+1;i<f;++i)a[i].i--}else{u[l.i-1]+=l.x+u[l.i+1],u.splice(l.i,2);for(i=r+1;i<f;++i)a[i].i-=2}else if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1);for(i=r+1;i<f;++i)a[i].i--}a.splice(r,1),f--,r--}else l.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(l.x))}while(r<f)l=a.pop(),u[l.i+1]==null?u[l.i]=l.x:(u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1)),f--;return u.length===1?u[0]==null?a[0].x:function(){return t}:function(e){for(r=0;r<f;++r)u[(l=a[r]).i]=l.x(e);return u.join("")}},d3.interpolateTransform=function(e,t){var n=[],r=[],i,s=d3.transform(e),o=d3.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(n.push("translate(",null,",",null,")"),r.push({i:1,x:d3.interpolateNumber(u[0],a[0])},{i:3,x:d3.interpolateNumber(u[1],a[1])})):a[0]||a[1]?n.push("translate("+a+")"):n.push(""),f!=l?r.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(f,l)}):l&&n.push(n.pop()+"rotate("+l+")"),c!=h?r.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(c,h)}):h&&n.push(n.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(i=n.push(n.pop()+"scale(",null,",",null,")"),r.push({i:i-4,x:d3.interpolateNumber(p[0],d[0])},{i:i-2,x:d3.interpolateNumber(p[1],d[1])})):(d[0]!=1||d[1]!=1)&&n.push(n.pop()+"scale("+d+")"),i=r.length,function(e){var t=-1,s;while(++t<i)n[(s=r[t]).i]=s.x(e);return n.join("")}},d3.interpolateRgb=function(e,t){e=d3.rgb(e),t=d3.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+$(Math.round(n+s*e))+$(Math.round(r+o*e))+$(Math.round(i+u*e))}},d3.interpolateHsl=function(e,t){e=d3.hsl(e),t=d3.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return function(e){return tt(n+s*e,r+o*e,i+u*e).toString()}},d3.interpolateArray=function(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(d3.interpolate(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}},d3.interpolateObject=function(e,t){var n={},r={},i;for(i in e)i in t?n[i]=U(i)(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}};var R=/[-+]?(?:\d*\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(e,t){return t instanceof Array&&d3.interpolateArray(e,t)},function(e,t){return(typeof e=="string"||typeof t=="string")&&d3.interpolateString(e+"",t+"")},function(e,t){return(typeof t=="string"?t in G||/^(#|rgb\(|hsl\()/.test(t):t instanceof V||t instanceof et)&&d3.interpolateRgb(e,t)},function(e,t){return!isNaN(e=+e)&&!isNaN(t=+t)&&d3.interpolateNumber(e,t)}],d3.rgb=function(e,t,n){return arguments.length===1?e instanceof V?X(e.r,e.g,e.b):J(""+e,X,tt):X(~~e,~~t,~~n)},V.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?X(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),X(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e))))},V.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),X(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},V.prototype.hsl=function(){return K(this.r,this.g,this.b)},V.prototype.toString=function(){return"#"+$(this.r)+$(this.g)+$(this.b)};var G={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var Y in G)G[Y]=J(G[Y],X,tt);d3.hsl=function(e,t,n){return arguments.length===1?e instanceof et?Z(e.h,e.s,e.l):J(""+e,K,Z):Z(+e,+t,+n)},et.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),Z(this.h,this.s,this.l/e)},et.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),Z(this.h,this.s,e*this.l)},et.prototype.rgb=function(){return tt(this.h,this.s,this.l)},et.prototype.toString=function(){return this.rgb().toString()};var rt=function(e,t){return t.querySelector(e)},it=function(e,t){return t.querySelectorAll(e)},st=document.documentElement,ot=st.matchesSelector||st.webkitMatchesSelector||st.mozMatchesSelector||st.msMatchesSelector||st.oMatchesSelector,ut=function(e,t){return ot.call(e,t)};typeof Sizzle=="function"&&(rt=function(e,t){return Sizzle(e,t)[0]},it=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},ut=Sizzle.matchesSelector);var at=[];d3.selection=function(){return mt},d3.selection.prototype=at,at.select=function(e){var t=[],n,r,i,s;typeof e!="function"&&(e=ft(e));for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return nt(t)},at.selectAll=function(e){var t=[],n,i;typeof e!="function"&&(e=lt(e));for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a])t.push(n=r(e.call(i,i.__data__,a))),n.parentNode=i;return nt(t)},at.attr=function(e,t){function r(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function s(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function u(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}function a(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}e=d3.ns.qualify(e);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each(t==null?e.local?i:r:typeof t=="function"?e.local?a:u:e.local?o:s)},at.classed=function(e,t){var n=e.split(ct),r=n.length,i=-1;if(arguments.length>1){while(++i<r)ht.call(this,n[i],t);return this}while(++i<r)if(!ht.call(this,n[i]))return!1;return!0};var ct=/\s+/g;at.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return arguments.length<3&&(n=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(e):this.each(t==null?r:typeof t=="function"?s:i)},at.property=function(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return arguments.length<2?this.node()[e]:this.each(t==null?n:typeof t=="function"?i:r)},at.text=function(e){return arguments.length<1?this.node().textContent:this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e})},at.html=function(e){return arguments.length<1?this.node().innerHTML:this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e})},at.append=function(e){function t(){return this.appendChild(document.createElementNS(this.namespaceURI,e))}function n(){var t=document.createElementNS(e.space,e.local);return this.appendChild(t)}return e=d3.ns.qualify(e),this.select(e.local?n:t)},at.insert=function(e,t){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,e),rt(t,this))}function r(){return this.insertBefore(document.createElementNS(e.space,e.local),rt(t,this))}return e=d3.ns.qualify(e),this.select(e.local?r:n)},at.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},at.data=function(e,t){function s(e,s){var o,u=e.length,a=s.length,f=Math.min(u,a),l=Math.max(u,a),c=[],h=[],p=[],d,v;if(t){var m={},g=[],y,b=s.length;for(o=-1;++o<u;)y=t.call(d=e[o],d.__data__,o),y in m?p[b++]=d:m[y]=d,g.push(y);for(o=-1;++o<a;)d=m[y=t.call(s,v=s[o],o)],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=pt(v),c[o]=p[o]=null),delete m[y];for(o=-1;++o<u;)g[o]in m&&(p[o]=e[o])}else{for(o=-1;++o<f;)d=e[o],v=s[o],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=pt(v),c[o]=p[o]=null);for(;o<a;++o)h[o]=pt(s[o]),c[o]=p[o]=null;for(;o<l;++o)p[o]=e[o],h[o]=c[o]=null}h.update=c,h.parentNode=c.parentNode=p.parentNode=e.parentNode,n.push(h),r.push(c),i.push(p)}var n=[],r=[],i=[],o=-1,u=this.length,a;if(typeof e=="function")while(++o<u)s(a=this[o],e.call(a,a.parentNode.__data__,o));else while(++o<u)s(a=this[o],e);var f=nt(r);return f.enter=function(){return gt(n)},f.exit=function(){return nt(i)},f},at.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=dt(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return nt(t)},at.map=function(e){return this.each(function(){this.__data__=e.apply(this,arguments)})},at.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},at.sort=function(e){e=vt.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},at.on=function(e,t,n){arguments.length<3&&(n=!1);var r="__on"+e,i=e.indexOf(".");return i>0&&(e=e.substring(0,i)),arguments.length<2?(i=this.node()[r])&&i._:this.each(function(i,s){function u(e){var n=d3.event;d3.event=e;try{t.call(o,o.__data__,s)}finally{d3.event=n}}var o=this;o[r]&&o.removeEventListener(e,o[r],n),t&&o.addEventListener(e,o[r]=u,n),u._=t})},at.each=function(e){for(var t=-1,n=this.length;++t<n;)for(var r=this[t],i=-1,s=r.length;++i<s;){var o=r[i];o&&e.call(o,o.__data__,i,t)}return this},at.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},at.empty=function(){return!this.node()},at.node=function(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];if(o)return o}return null},at.transition=function(){var e=[],t,n;for(var r=-1,i=this.length;++r<i;){e.push(t=[]);for(var s=this[r],o=-1,u=s.length;++o<u;)t.push((n=s[o])?{node:n,delay:0,duration:250}:null)}return bt(e,Nt||++Tt,Date.now())};var mt=nt([[document]]);mt[0].parentNode=st,d3.select=function(e){return typeof e=="string"?mt.select(e):nt([[e]])},d3.selectAll=function(e){return typeof e=="string"?mt.selectAll(e):nt([r(e)])};var yt=[];yt.append=at.append,yt.insert=at.insert,yt.empty=at.empty,yt.node=at.node,yt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f)),r.__data__=o.__data__):n.push(null)}return nt(t)};var wt={},xt=[],Tt=0,Nt=0,Ct=d3.ease("cubic-in-out");xt.call=at.call,d3.transition=function(){return mt.transition()},d3.transition.prototype=xt,xt.select=function(e){var t=[],n,r,i;typeof e!="function"&&(e=ft(e));for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(i=u[a])&&(r=e.call(i.node,i.node.__data__,a))?("__data__"in i.node&&(r.__data__=i.node.__data__),n.push({node:r,delay:i.delay,duration:i.duration})):n.push(null)}return bt(t,this.id,this.time).ease(this.ease())},xt.selectAll=function(e){var t=[],n,r,i;typeof e!="function"&&(e=lt(e));for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a]){r=e.call(i.node,i.node.__data__,a),t.push(n=[]);for(var l=-1,c=r.length;++l<c;)n.push({node:r[l],delay:i.delay,duration:i.duration})}return bt(t,this.id,this.time).ease(this.ease())},xt.attr=function(e,t){return this.attrTween(e,St(e,t))},xt.attrTween=function(e,t){function r(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i===wt?(this.removeAttribute(n),null):i&&function(e){this.setAttribute(n,i(e))}}function i(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i===wt?(this.removeAttributeNS(n.space,n.local),null):i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}var n=d3.ns.qualify(e);return this.tween("attr."+e,n.local?i:r)},xt.style=function(e,t,n){return arguments.length<3&&(n=""),this.styleTween(e,St(e,t),n)},xt.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,i){var s=t.call(this,r,i,window.getComputedStyle(this,null).getPropertyValue(e));return s===wt?(this.style.removeProperty(e),null):s&&function(t){this.style.setProperty(e,s(t),n)}})},xt.text=function(e){return this.tween("text",function(t,n){this.textContent=typeof e=="function"?e.call(this,t,n):e})},xt.remove=function(){return this.each("end.transition",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},xt.delay=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].delay=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].delay=e}))},xt.duration=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].duration=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].duration=e}))},xt.transition=function(){return this.select(a)};var Lt=null,At,Ot;d3.timer=function(e,t,n){var r=!1,i,s=Lt;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}while(s){if(s.callback===e){s.then=n,s.delay=t,r=!0;break}i=s,s=s.next}r||(Lt={callback:e,then:n,delay:t,next:Lt}),At||(Ot=clearTimeout(Ot),At=1,Dt(Mt))},d3.timer.flush=function(){var e,t=Date.now(),n=Lt;while(n)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;_t()};var Dt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};d3.transform=function(e){var t=document.createElementNS(d3.ns.prefix.svg,"g"),n={a:1,b:0,c:0,d:1,e:0,f:0};return(d3.transform=function(e){t.setAttribute("transform",e);var r=t.transform.baseVal.consolidate();return new Pt(r?r.matrix:n)})(e)},Pt.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ft=180/Math.PI;d3.scale={},d3.scale.linear=function(){return Wt([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return Yt(d3.scale.linear(),en)};var Zt=d3.format(".0e");en.pow=function(e){return Math.pow(10,e)},tn.pow=function(e){return-Math.pow(10,-e)},d3.scale.pow=function(){return nn(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return sn([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(on)},d3.scale.category20=function(){return d3.scale.ordinal().range(un)},d3.scale.category20b=function(){return d3.scale.ordinal().range(an)},d3.scale.category20c=function(){return d3.scale.ordinal().range(fn)};var on=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],un=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],an=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],fn=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return ln([],[])},d3.scale.quantize=function(){return cn(0,1,[0,1])},d3.svg={},d3.svg.arc=function(){function i(){var i=e.apply(this,arguments),s=t.apply(this,arguments),o=n.apply(this,arguments)+hn,u=r.apply(this,arguments)+hn,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<Math.PI?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=pn?i?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+ -i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":i?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+i*h+","+i*p+"A"+i+","+i+" 0 "+f+",0 "+i*l+","+i*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var e=dn,t=vn,n=mn,r=gn;return i.innerRadius=function(t){return arguments.length?(e=d3.functor(t),i):e},i.outerRadius=function(e){return arguments.length?(t=d3.functor(e),i):t},i.startAngle=function(e){return arguments.length?(n=d3.functor(e),i):n},i.endAngle=function(e){return arguments.length?(r=d3.functor(e),i):r},i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+hn;return[Math.cos(s)*i,Math.sin(s)*i]},i};var hn=-Math.PI/2,pn=2*Math.PI-1e-6;d3.svg.line=function(){return yn(Object)};var Sn={linear:Tn,"step-before":Nn,"step-after":Cn,basis:_n,"basis-open":Dn,"basis-closed":Pn,bundle:Hn,cardinal:An,"cardinal-open":kn,"cardinal-closed":Ln,monotone:Wn},jn=[0,2/3,1/3,0],Fn=[0,1/3,2/3,0],In=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var e=yn(Xn);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Nn.reverse=Cn,Cn.reverse=Nn,d3.svg.area=function(){return Vn(Object)},d3.svg.area.radial=function(){var e=Vn(Xn);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},d3.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)+hn,l=i.call(e,u,o)+hn;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Math.PI)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=Kn,t=Qn,n=Gn,r=mn,i=gn;return s.radius=function(e){return arguments.length?(n=d3.functor(e),s):n},s.source=function(t){return arguments.length?(e=d3.functor(t),s):e},s.target=function(e){return arguments.length?(t=d3.functor(e),s):t},s.startAngle=function(e){return arguments.length?(r=d3.functor(e),s):r},s.endAngle=function(e){return arguments.length?(i=d3.functor(e),s):i},s},d3.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=Kn,t=Qn,n=er;return r.source=function(t){return arguments.length?(e=d3.functor(t),r):e},r.target=function(e){return arguments.length?(t=d3.functor(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},d3.svg.diagonal.radial=function(){var e=d3.svg.diagonal(),t=er,n=e.projection;return e.projection=function(e){return arguments.length?n(tr(t=e)):t},e},d3.svg.mouse=function(e){return rr(e,d3.event)};var nr=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(e,t){return arguments.length<2&&(t=d3.event.touches),t?r(t).map(function(t){var n=rr(e,t);return n.identifier=t.identifier,n}):[]},d3.svg.symbol=function(){function n(n,r){return(or[e.call(this,n,r)]||or.circle)(t.call(this,n,r))}var e=sr,t=ir;return n.type=function(t){return arguments.length?(e=d3.functor(t),n):e},n.size=function(e){return arguments.length?(t=d3.functor(e),n):t},n};var or={circle:function(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ar)),n=t*ar;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/ur),n=t*ur/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/ur),n=t*ur/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}};d3.svg.symbolTypes=d3.keys(or);var ur=Math.sqrt(3),ar=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function f(f){f.each(function(l,c,h){var p=d3.select(this),d=f.delay?function(e){var t=Nt;try{return Nt=f.id,e.transition().delay(f[h][c].delay).duration(f[h][c].duration).ease(f.ease())}finally{Nt=t}}:Object,v=e.ticks?e.ticks.apply(e,o):e.domain(),m=u==null?e.tickFormat?e.tickFormat.apply(e,o):String:u,g=cr(e,v,a),y=p.selectAll(".minor").data(g,String),b=y.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),w=d(y.exit()).style("opacity",1e-6).remove(),E=d(y).style("opacity",1),S=p.selectAll("g").data(v,String),x=S.enter().insert("g","path").style("opacity",1e-6),T=d(S.exit()).style("opacity",1e-6).remove(),N=d(S).style("opacity",1),C,k=Rt(e),L=p.selectAll(".domain").data([0]),A=L.enter().append("path").attr("class","domain"),O=d(L),M=e.copy(),_=this.__chart__||M;this.__chart__=M,x.append("line").attr("class","tick"),x.append("text"),N.select("text").text(m);switch(t){case"bottom":C=fr,b.attr("y2",r),E.attr("x2",0).attr("y2",r),x.select("line").attr("y2",n),x.select("text").attr("y",Math.max(n,0)+s),N.select("line").attr("x2",0).attr("y2",n),N.select("text").attr("x",0).attr("y",Math.max(n,0)+s).attr("dy",".71em").attr("text-anchor","middle"),O.attr("d","M"+k[0]+","+i+"V0H"+k[1]+"V"+i);break;case"top":C=fr,b.attr("y2",-r),E.attr("x2",0).attr("y2",-r),x.select("line").attr("y2",-n),x.select("text").attr("y",-(Math.max(n,0)+s)),N.select("line").attr("x2",0).attr("y2",-n),N.select("text").attr("x",0).attr("y",-(Math.max(n,0)+s)).attr("dy","0em").attr("text-anchor","middle"),O.attr("d","M"+k[0]+","+ -i+"V0H"+k[1]+"V"+ -i);break;case"left":C=lr,b.attr("x2",-r),E.attr("x2",-r).attr("y2",0),x.select("line").attr("x2",-n),x.select("text").attr("x",-(Math.max(n,0)+s)),N.select("line").attr("x2",-n).attr("y2",0),N.select("text").attr("x",-(Math.max(n,0)+s)).attr("y",0).attr("dy",".32em").attr("text-anchor","end"),O.attr("d","M"+ -i+","+k[0]+"H0V"+k[1]+"H"+ -i);break;case"right":C=lr,b.attr("x2",r),E.attr("x2",r).attr("y2",0),x.select("line").attr("x2",n),x.select("text").attr("x",Math.max(n,0)+s),N.select("line").attr("x2",n).attr("y2",0),N.select("text").attr("x",Math.max(n,0)+s).attr("y",0).attr("dy",".32em").attr("text-anchor","start"),O.attr("d","M"+i+","+k[0]+"H0V"+k[1]+"H"+i)}if(e.ticks)x.call(C,_),N.call(C,M),T.call(C,M),b.call(C,_),E.call(C,M),w.call(C,M);else{var D=M.rangeBand()/2,P=function(e){return M(e)+D};x.call(C,P),N.call(C,P)}})}var e=d3.scale.linear(),t="bottom",n=6,r=6,i=6,s=3,o=[10],u,a=0;return f.scale=function(t){return arguments.length?(e=t,f):e},f.orient=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return arguments.length?(o=arguments,f):o},f.tickFormat=function(e){return arguments.length?(u=e,f):u},f.tickSize=function(e,t,s){if(!arguments.length)return n;var o=arguments.length-1;return n=+e,r=o>1?+t:n,i=o>0?+arguments[o]:n,f},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.tickSubdivide=function(e){return arguments.length?(a=+e,f):a},f},d3.svg.brush=function(){function i(e){var o=t&&n?["n","e","s","w","nw","ne","se","sw"]:t?["e","w"]:n?["n","s"]:[];e.each(function(){var e=d3.select(this).on("mousedown.brush",s),u=e.selectAll(".background").data([0]),a=e.selectAll(".extent").data([0]),f=e.selectAll(".resize").data(o,String),l;u.enter().append("rect").attr("class","background").style("visibility","hidden").style("pointer-events","all").style("cursor","crosshair"),a.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("rect").attr("class",function(e){return"resize "+e}).attr("width",6).attr("height",6).style("visibility","hidden").style("cursor",function(e){return Ar[e]}),f.style("pointer-events",i.empty()?"none":"all"),f.exit().remove(),t&&(l=Rt(t),u.attr("x",l[0]).attr("width",l[1]-l[0]),Sr(e,r)),n&&(l=Rt(n),u.attr("y",l[0]).attr("height",l[1]-l[0]),xr(e,r))})}function s(){var e=d3.select(d3.event.target);hr=i,dr=this,gr=r,Er=d3.svg.mouse(dr),(yr=e.classed("extent"))?(Er[0]=r[0][0]-Er[0],Er[1]=r[0][1]-Er[1]):e.classed("resize")?(br=d3.event.target.__data__,Er[0]=r[+/w$/.test(br)][0],Er[1]=r[+/^n/.test(br)][1]):d3.event.altKey&&(wr=Er.slice()),vr=!/^(n|s)$/.test(br)&&t,mr=!/^(e|w)$/.test(br)&&n,pr=o(this,arguments),pr("brushstart"),Cr(),q()}function o(t,n){return function(r){var s=d3.event;try{d3.event={type:r,target:i},e[r].apply(t,n)}finally{d3.event=s}}}var e=d3.dispatch("brushstart","brush","brushend"),t,n,r=[[0,0],[0,0]];return i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.extent=function(e){var s,o,u,a,f;return arguments.length?(t&&(s=e[0],o=e[1],n&&(s=s[0],o=o[0]),t.invert&&(s=t(s),o=t(o)),o<s&&(f=s,s=o,o=f),r[0][0]=s,r[1][0]=o),n&&(u=e[0],a=e[1],t&&(u=u[1],a=a[1]),n.invert&&(u=n(u),a=n(a)),a<u&&(f=u,u=a,a=f),r[0][1]=u,r[1][1]=a),i):(t&&(s=r[0][0],o=r[1][0],t.invert&&(s=t.invert(s),o=t.invert(o)),o<s&&(f=s,s=o,o=f)),n&&(u=r[0][1],a=r[1][1],n.invert&&(u=n.invert(u),a=n.invert(a)),a<u&&(f=u,u=a,a=f)),t&&n?[[s,u],[o,a]]:t?[s,o]:n&&[u,a])},i.clear=function(){return r[0][0]=r[0][1]=r[1][0]=r[1][1]=0,i},i.empty=function(){return t&&r[0][0]===r[1][0]||n&&r[0][1]===r[1][1]},d3.select(window).on("mousemove.brush",Cr).on("mouseup.brush",Lr).on("keydown.brush",Tr).on("keyup.brush",Nr),d3.rebind(i,e,"on")};var hr,pr,dr,vr,mr,gr,yr,br,wr,Er,Ar={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};d3.behavior={},d3.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",i),d3.select(window).on("mousemove.drag",Ir).on("touchmove.drag",Ir).on("mouseup.drag",qr,!0).on("touchend.drag",qr,!0).on("click.drag",Rr,!0)}function r(){Or=e,Mr=d3.event.target,_r=this,Dr=arguments,Hr=Fr(),t?(Pr=t.apply(_r,Dr),Pr=[Pr.x-Hr[0],Pr.y-Hr[1]]):Pr=[0,0],Br=0}function i(){r.apply(this,arguments),jr("dragstart")}var e=d3.dispatch("drag","dragstart","dragend"),t=null;return n.origin=function(e){return arguments.length?(t=e,n):t},d3.rebind(n,e,"on")};var Or,Mr,_r,Dr,Pr,Hr,Br;d3.behavior.zoom=function(){function r(){this.on("mousedown.zoom",s).on("mousewheel.zoom",o).on("DOMMouseScroll.zoom",o).on("dblclick.zoom",u).on("touchstart.zoom",a),d3.select(window).on("mousemove.zoom",ii).on("mouseup.zoom",si).on("touchmove.zoom",ri).on("touchend.zoom",ni).on("click.zoom",oi,!0)}function i(){$r=e,Jr=n,Kr=t.zoom,Qr=d3.event.target,Gr=this,Yr=arguments}function s(){i.apply(this,arguments),zr=ei(d3.svg.mouse(Gr)),Zr=0,d3.event.preventDefault(),window.focus()}function o(){i.apply(this,arguments),Wr||(Wr=ei(d3.svg.mouse(Gr))),ui(ti()+e[2],d3.svg.mouse(Gr),Wr)}function u(){i.apply(this,arguments);var t=d3.svg.mouse(Gr);ui(d3.event.shiftKey?Math.ceil(e[2]-1):Math.floor(e[2]+1),t,ei(t))}function a(){i.apply(this,arguments);var t=ni(),n,r=Date.now();t.length===1&&r-Vr<300&&ui(1+Math.floor(e[2]),n=t[0],Xr[n.identifier]),Vr=r}var e=[0,0,0],t=d3.dispatch("zoom"),n=ai;return r.extent=function(e){return arguments.length?(n=e==null?ai:e,r):n},d3.rebind(r,t,"on")};var Ur,zr,Wr,Xr={},Vr=0,$r,Jr,Kr,Qr,Gr,Yr,Zr,ai=[[-Infinity,Infinity],[-Infinity,Infinity],[-Infinity,Infinity]]}(),function(){function e(e){var t=e.source,r=e.target,i=n(t,r),s=[t];while(t!==i)t=t.parent,s.push(t);var o=s.length;while(r!==i)s.splice(o,0,r),r=r.parent;return s}function t(e){var t=[],n=e.parent;while(n!=null)t.push(e),e=n,n=n.parent;return t.push(e),t}function n(e,n){if(e===n)return e;var r=t(e),i=t(n),s=r.pop(),o=i.pop(),u=null;while(s===o)u=s,s=r.pop(),o=i.pop();return u}function s(e){e.fixed|=2}function o(e){e!==i&&(e.fixed&=1)}function u(){a(),i.fixed&=1,r=i=null}function a(){i.px=d3.event.x,i.py=d3.event.y,r.resume()}function f(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var s=e.nodes,o=s.length,u=-1,a;while(++u<o){a=s[u];if(a==null)continue;f(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy}}if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,i+=l*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function l(e){return 20}function c(e){return 1}function p(e){return e.x}function v(e){return e.y}function m(e,t,n){e.y0=t,e.y=n}function b(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)(i=e[t][1])>r&&(n=t,r=i);return n}function w(e){return e.reduce(E,0)}function E(e,t){return e+t[1]}function S(e,t){return x(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function x(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function T(e){return[d3.min(e),d3.max(e)]}function N(e,t){return d3.rebind(e,t,"sort","children","value"),e.links=A,e.nodes=function(t){return O=!0,(e.nodes=e)(t)},e}function C(e){return e.children}function k(e){return e.value}function L(e,t){return t.value-e.value}function A(e){return d3.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function M(e,t){return e.value-t.value}function _(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function D(e,t){e._pack_next=t,t._pack_prev=e}function P(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return i*i-n*n-r*r>.001}function H(e){function c(e){t=Math.min(e.x-e.r,t),n=Math.max(e.x+e.r,n),r=Math.min(e.y-e.r,r),i=Math.max(e.y+e.r,i)}var t=Infinity,n=-Infinity,r=Infinity,i=-Infinity,s=e.length,o,u,a,f,l;e.forEach(B),o=e[0],o.x=-o.r,o.y=0,c(o);if(s>1){u=e[1],u.x=u.r,u.y=0,c(u);if(s>2){a=e[2],q(o,u,a),c(a),_(o,a),o._pack_prev=a,_(a,u),u=o._pack_next;for(var h=3;h<s;h++){q(o,u,a=e[h]);var p=0,d=1,v=1;for(f=u._pack_next;f!==u;f=f._pack_next,d++)if(P(f,a)){p=1;break}if(p==1)for(l=o._pack_prev;l!==f._pack_prev;l=l._pack_prev,v++)if(P(l,a))break;p?(d<v||d==v&&u.r<o.r?D(o,u=f):D(o=l,u),h--):(_(o,a),u=a,c(a))}}}var m=(t+n)/2,g=(r+i)/2,y=0;for(var h=0;h<s;h++){var b=e[h];b.x-=m,b.y-=g,y=Math.max(y,b.r+Math.sqrt(b.x*b.x+b.y*b.y))}return e.forEach(j),y}function B(e){e._pack_next=e._pack_prev=e}function j(e){delete e._pack_next,delete e._pack_prev}function F(e){var t=e.children;t&&t.length?(t.forEach(F),e.r=H(t)):e.r=Math.sqrt(e.value)}function I(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)I(i[s],t,n,r)}}function q(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=Math.sqrt(i*i+s*s),a=Math.max(-1,Math.min(1,(r*r+u*u-o*o)/(2*r*u))),f=Math.acos(a),l=a*(r/=u),c=Math.sin(f)*r;n.x=e.x+l*i+c*s,n.y=e.y+l*s-c*i}else n.x=e.x+r,n.y=e.y}function R(e){return 1+d3.max(e,function(e){return e.y})}function U(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function z(e){var t=e.children;return t&&t.length?z(t[0]):e}function W(e){var t=e.children,n;return t&&(n=t.length)?W(t[n-1]):e}function X(e,t){return e.parent==t.parent?1:2}function V(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function $(e){var t=e.children,n;return t&&(n=t.length)?t[n-1]:e._tree.thread}function J(e,t){var n=e.children;if(n&&(i=n.length)){var r,i,s=-1;while(++s<i)t(r=J(n[s],t),e)>0&&(e=r)}return e}function K(e,t){return e.x-t.x}function Q(e,t){return t.x-e.x}function G(e,t){return e.depth-t.depth}function Y(e,t){function n(e,r){var i=e.children;if(i&&(a=i.length)){var s,o=null,u=-1,a;while(++u<a)s=i[u],n(s,o),o=s}t(e,r)}n(e,null)}function Z(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i]._tree,s.prelim+=t,s.mod+=t,t+=s.shift+(n+=s.change)}function et(e,t,n){e=e._tree,t=t._tree;var r=n/(t.number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function tt(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function nt(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function rt(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}d3.layout={},d3.layout.bundle=function(){return function(t){var n=[],r=-1,i=t.length;while(++r<i)n.push(e(t[r]));return n}},d3.layout.chord=function(){function f(){var e={},f=[],c=d3.range(i),h=[],p,d,v,m,g;t=[],n=[],p=0,m=-1;while(++m<i){d=0,g=-1;while(++g<i)d+=r[m][g];f.push(d),h.push(d3.range(i)),p+=d}o&&c.sort(function(e,t){return o(f[e],f[t])}),u&&h.forEach(function(e,t){e.sort(function(e,n){return u(r[t][e],r[t][n])})}),p=(2*Math.PI-s*i)/p,d=0,m=-1;while(++m<i){v=d,g=-1;while(++g<i){var y=c[m],b=h[y][g],w=r[y][b],E=d,S=d+=w*p;e[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}n.push({index:y,startAngle:v,endAngle:d,value:(d-v)/p}),d+=s}m=-1;while(++m<i){g=m-1;while(++g<i){var x=e[m+"-"+g],T=e[g+"-"+m];(x.value||T.value)&&t.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}}a&&l()}function l(){t.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var e={},t,n,r,i,s=0,o,u,a;return e.matrix=function(s){return arguments.length?(i=(r=s)&&r.length,t=n=null,e):r},e.padding=function(r){return arguments.length?(s=r,t=n=null,e):s},e.sortGroups=function(r){return arguments.length?(o=r,t=n=null,e):o},e.sortSubgroups=function(n){return arguments.length?(u=n,t=null,e):u},e.sortChords=function(n){return arguments.length?(a=n,t&&l(),e):a},e.chords=function(){return t||f(),t},e.groups=function(){return n||f(),n},e},d3.layout.force=function(){function C(e){return function(t,n,r,i,s){if(t.point!==e){var o=t.cx-e.x,u=t.cy-e.y,a=1/Math.sqrt(o*o+u*u);if((i-n)*a<b){var f=t.charge*a*a;return e.px-=o*f,e.py-=u*f,!0}if(t.point&&isFinite(a)){var f=t.pointCharge*a*a;e.px-=o*f,e.py-=u*f}}return!t.charge}}function k(){var e=E.length,r=S.length,i,s,o,u,a,l,c,h,v;for(s=0;s<r;++s){o=S[s],u=o.source,a=o.target,h=a.x-u.x,v=a.y-u.y;if(l=h*h+v*v)l=p*T[s]*((l=Math.sqrt(l))-x[s])/l,h*=l,v*=l,a.x-=h*(c=u.weight/(a.weight+u.weight)),a.y-=v*c,u.x+=h*(c=1-c),u.y+=v*c}if(c=p*y){h=n[0]/2,v=n[1]/2,s=-1;if(c)while(++s<e)o=E[s],o.x+=(h-o.x)*c,o.y+=(v-o.y)*c}if(g){f(i=d3.geom.quadtree(E),p,N),s=-1;while(++s<e)(o=E[s]).fixed||i.visit(C(o))}s=-1;while(++s<e)o=E[s],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*d,o.y-=(o.py-(o.py=o.y))*d);return t.tick({type:"tick",alpha:p}),(p*=.99)<.005}function L(t){s(i=t),r=e}var e={},t=d3.dispatch("tick"),n=[1,1],h,p,d=.9,v=l,m=c,g=-30,y=.1,b=.8,w,E=[],S=[],x,T,N;return e.nodes=function(t){return arguments.length?(E=t,e):E},e.links=function(t){return arguments.length?(S=t,e):S},e.size=function(t){return arguments.length?(n=t,e):n},e.linkDistance=function(t){return arguments.length?(v=d3.functor(t),e):v},e.distance=e.linkDistance,e.linkStrength=function(t){return arguments.length?(m=d3.functor(t),e):m},e.friction=function(t){return arguments.length?(d=t,e):d},e.charge=function(t){return arguments.length?(g=typeof t=="function"?t:+t,e):g},e.gravity=function(t){return arguments.length?(y=t,e):y},e.theta=function(t){return arguments.length?(b=t,e):b},e.start=function(){function l(e,n){var r=c(t),i=-1,s=r.length,o;while(++i<s)if(!isNaN(o=r[i][e]))return o;return Math.random()*n}function c(){if(!a){a=[];for(r=0;r<i;++r)a[r]=[];for(r=0;r<s;++r){var e=S[r];a[e.source.index].push(e.target),a[e.target.index].push(e.source)}}return a[t]}var t,r,i=E.length,s=S.length,o=n[0],u=n[1],a,f;for(t=0;t<i;++t)(f=E[t]).index=t,f.weight=0;x=[],T=[];for(t=0;t<s;++t)f=S[t],typeof f.source=="number"&&(f.source=E[f.source]),typeof f.target=="number"&&(f.target=E[f.target]),x[t]=v.call(this,f,t),T[t]=m.call(this,f,t),++f.source.weight,++f.target.weight;for(t=0;t<i;++t)f=E[t],isNaN(f.x)&&(f.x=l("x",o)),isNaN(f.y)&&(f.y=l("y",u)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);N=[];if(typeof g=="function")for(t=0;t<i;++t)N[t]=+g.call(this,E[t],t);else for(t=0;t<i;++t)N[t]=g;return e.resume()},e.resume=function(){return p=.1,d3.timer(k),e},e.stop=function(){return p=0,e},e.drag=function(){h||(h=d3.behavior.drag().origin(Object).on("dragstart",L).on("drag",a).on("dragend",u)),this.on("mouseover.force",s).on("mouseout.force",o).call(h)},d3.rebind(e,t,"on")};var r,i;d3.layout.partition=function(){function n(e,t,r,i){var s=e.children;e.x=t,e.y=e.depth*i,e.dx=r,e.dy=i;if(s&&(u=s.length)){var o=-1,u,a,f;r=e.value?r/e.value:0;while(++o<u)n(a=s[o],t,f=a.value*r,i),t+=f}}function r(e){var t=e.children,n=0;if(t&&(s=t.length)){var i=-1,s;while(++i<s)n=Math.max(n,r(t[i]))}return 1+n}function i(i,s){var o=e.call(this,i,s);return n(o[0],0,t[0],t[1]/r(o[0])),o}var e=d3.layout.hierarchy(),t=[1,1];return i.size=function(e){return arguments.length?(t=e,i):t},N(i,e)},d3.layout.pie=function(){function i(s,o){var u=s.map(function(t,n){return+e.call(i,t,n)}),a=+(typeof n=="function"?n.apply(this,arguments):n),f=((typeof r=="function"?r.apply(this,arguments):r)-n)/d3.sum(u),l=d3.range(s.length);t!=null&&l.sort(t===h?function(e,t){return u[t]-u[e]}:function(e,n){return t(s[e],s[n])});var c=[];return l.forEach(function(e){c[e]={data:s[e],value:d=u[e],startAngle:a,endAngle:a+=d*f}}),c}var e=Number,t=h,n=0,r=2*Math.PI;return i.value=function(t){return arguments.length?(e=t,i):e},i.sort=function(e){return arguments.length?(t=e,i):t},i.startAngle=function(e){return arguments.length?(n=e,i):n},i.endAngle=function(e){return arguments.length?(r=e,i):r},i};var h={};d3.layout.stack=function(){function o(u,a){var f=u.map(function(t,n){return e.call(o,t,n)}),l=f.map(function(e,t){return e.map(function(e,t){return[i.call(o,e,t),s.call(o,e,t)]})}),c=t.call(o,l,a);f=d3.permute(f,c),l=d3.permute(l,c);var h=n.call(o,l,a),p=f.length,d=f[0].length,v,m,g;for(m=0;m<d;++m){r.call(o,f[0][m],g=h[m],l[0][m][1]);for(v=1;v<p;++v)r.call(o,f[v][m],g+=l[v-1][m][1],l[v][m][1])}return u}var e=Object,t=g["default"],n=y.zero,r=m,i=p,s=v;return o.values=function(t){return arguments.length?(e=t,o):e},o.order=function(e){return arguments.length?(t=typeof e=="function"?e:g[e],o):t},o.offset=function(e){return arguments.length?(n=typeof e=="function"?e:y[e],o):n},o.x=function(e){return arguments.length?(i=e,o):i},o.y=function(e){return arguments.length?(s=e,o):s},o.out=function(e){return arguments.length?(r=e,o):r},o};var g={"inside-out":function(e){var t=e.length,n,r,i=e.map(b),s=e.map(w),o=d3.range(t).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(n=0;n<t;++n)r=o[n],u<a?(u+=s[r],f.push(r)):(a+=s[r],l.push(r));return l.reverse().concat(f)},reverse:function(e){return d3.range(e.length).reverse()},"default":function(e){return d3.range(e.length)}},y={silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i=0,s,o,u,a,f,l,c,h,p,d=[];d[0]=h=p=0;for(o=1;o<r;++o){for(s=0,a=0;s<t;++s)a+=e[s][o][1];for(s=0,f=0,c=n[o][0]-n[o-1][0];s<t;++s){for(u=0,l=(e[s][o][1]-e[s][o-1][1])/(2*c);u<s;++u)l+=(e[u][o][1]-e[u][o-1][1])/c;f+=l*e[s][o][1]}d[o]=h-=a?f/a*c:0,h<p&&(p=h)}for(o=0;o<r;++o)d[o]-=p;return d},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:function(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}};d3.layout.histogram=function(){function i(i,s){var o=[],u=i.map(t,this),a=n.call(this,u,s),f=r.call(this,a,u,s),l,s=-1,c=u.length,h=f.length-1,p=e?1:1/c,d;while(++s<h)l=o[s]=[],l.dx=f[s+1]-(l.x=f[s]),l.y=0;s=-1;while(++s<c)d=u[s],d>=a[0]&&d<=a[1]&&(l=o[d3.bisect(f,d,1,h)-1],l.y+=p,l.push(i[s]));return o}var e=!0,t=Number,n=T,r=S;return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=d3.functor(e),i):n},i.bins=function(e){return arguments.length?(r=typeof e=="number"?function(t){return x(t,e)}:d3.functor(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},d3.layout.hierarchy=function(){function r(i,o,u){var a=t.call(s,i,o),f=O?i:{data:i};f.depth=o,u.push(f);if(a&&(c=a.length)){var l=-1,c,h=f.children=[],p=0,v=o+1;while(++l<c)d=r(a[l],v,u),d.parent=f,h.push(d),p+=d.value;e&&h.sort(e),n&&(f.value=p)}else n&&(f.value=+n.call(s,i,o)||0);return f}function i(e,t){var r=e.children,o=0;if(r&&(a=r.length)){var u=-1,a,f=t+1;while(++u<a)o+=i(r[u],f)}else n&&(o=+n.call(s,O?e:e.data,t)||0);return n&&(e.value=o),o}function s(e){var t=[];return r(e,0,t),t}var e=L,t=C,n=k;return s.sort=function(t){return arguments.length?(e=t,s):e},s.children=function(e){return arguments.length?(t=e,s):t},s.value=function(e){return arguments.length?(n=e,s):n},s.revalue=function(e){return i(e,0),e},s};var O=!1;d3.layout.pack=function(){function n(n,r){var i=e.call(this,n,r),s=i[0];s.x=0,s.y=0,F(s);var o=t[0],u=t[1],a=1/Math.max(2*s.r/o,2*s.r/u);return I(s,o/2,u/2,a),i}var e=d3.layout.hierarchy().sort(M),t=[1,1];return n.size=function(e){return arguments.length?(t=e,n):t},N(n,e)},d3.layout.cluster=function(){function r(r,i){var s=e.call(this,r,i),o=s[0],u,a=0,f,l;Y(o,function(e){var n=e.children;n&&n.length?(e.x=U(n),e.y=R(n)):(e.x=u?a+=t(e,u):0,e.y=0,u=e)});var c=z(o),h=W(o),p=c.x-t(c,h)/2,d=h.x+t(h,c)/2;return Y(o,function(e){e.x=(e.x-p)/(d-p)*n[0],e.y=(1-(o.y?e.y/o.y:1))*n[1]}),s}var e=d3.layout.hierarchy().sort(null).value(null),t=X,n=[1,1];return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(e){return arguments.length?(n=e,r):n},N(r,e)},d3.layout.tree=function(){function r(r,i){function u(e,n){var r=e.children,i=e._tree;if(r&&(s=r.length)){var s,o=r[0],a,l=o,c,h=-1;while(++h<s)c=r[h],u(c,a),l=f(c,a,l),a=c;Z(e);var p=.5*(o._tree.prelim+c._tree.prelim);n?(i.prelim=n._tree.prelim+t(e,n),i.mod=i.prelim-p):i.prelim=p}else n&&(i.prelim=n._tree.prelim+t(e,n))}function a(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(i=n.length)){var r=-1,i;t+=e._tree.mod;while(++r<i)a(n[r],t)}}function f(e,n,r){if(n){var i=e,s=e,o=n,u=e.parent.children[0],a=i._tree.mod,f=s._tree.mod,l=o._tree.mod,c=u._tree.mod,h;while(o=$(o),i=V(i),o&&i)u=V(u),s=$(s),s._tree.ancestor=e,h=o._tree.prelim+l-i._tree.prelim-a+t(o,i),h>0&&(et(tt(o,e,r),e,h),a+=h,f+=h),l+=o._tree.mod,a+=i._tree.mod,c+=u._tree.mod,f+=s._tree.mod;o&&!$(s)&&(s._tree.thread=o,s._tree.mod+=l-f),i&&!V(u)&&(u._tree.thread=i,u._tree.mod+=a-c,r=e)}return r}var s=e.call(this,r,i),o=s[0];Y(o,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),u(o),a(o,-o._tree.prelim);var l=J(o,Q),c=J(o,K),h=J(o,G),p=l.x-t(l,c)/2,d=c.x+t(c,l)/2,v=h.depth||1;return Y(o,function(e){e.x=(e.x-p)/(d-p)*n[0],e.y=e.depth/v*n[1],delete e._tree}),s}var e=d3.layout.hierarchy().sort(null).value(null),t=X,n=[1,1];return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(e){return arguments.length?(n=e,r):n},N(r,e)},d3.layout.treemap=function(){function a(e,t){var n=-1,r=e.length,i,s;while(++n<r)s=(i=e[n]).value*(t<0?0:t),i.area=isNaN(s)||s<=0?0:s}function f(e){var t=e.children;if(t&&t.length){var n=i(e),r=[],s=t.slice(),o,u=Infinity,l,p=Math.min(n.dx,n.dy),d;a(s,n.dx*n.dy/e.value),r.area=0;while((d=s.length)>0)r.push(o=s[d-1]),r.area+=o.area,(l=c(r,p))<=u?(s.pop(),u=l):(r.area-=r.pop().area,h(r,p,n,!1),p=Math.min(n.dx,n.dy),r.length=r.area=0,u=Infinity);r.length&&(h(r,p,n,!0),r.length=r.area=0),t.forEach(f)}}function l(e){var t=e.children;if(t&&t.length){var n=i(e),r=t.slice(),s,o=[];a(r,n.dx*n.dy/e.value),o.area=0;while(s=r.pop())o.push(s),o.area+=s.area,s.z!=null&&(h(o,s.z?n.dx:n.dy,n,!r.length),o.length=o.area=0);t.forEach(l)}}function c(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,a=e.length;while(++o<a){if(!(r=e[o].area))continue;r<s&&(s=r),r>i&&(i=r)}return n*=n,t*=t,n?Math.max(t*i*u/n,n/(t*s*u)):Infinity}function h(e,n,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=n?t(e.area/n):0,l;if(n==r.dx){if(i||f>r.dy)f=r.dy;while(++s<o)l=e[s],l.x=u,l.y=a,l.dy=f,u+=l.dx=Math.min(r.x+r.dx-u,f?t(l.area/f):0);l.z=!0,l.dx+=r.x+r.dx-u,r.y+=f,r.dy-=f}else{if(i||f>r.dx)f=r.dx;while(++s<o)l=e[s],l.x=u,l.y=a,l.dx=f,a+=l.dy=Math.min(r.y+r.dy-a,f?t(l.area/f):0);l.z=!1,l.dy+=r.y+r.dy-a,r.x+=f,r.dx-=f}}function p(t){var r=o||e(t),i=r[0];return i.x=0,i.y=0,i.dx=n[0],i.dy=n[1],o&&e.revalue(i),a([i],i.dx*i.dy/i.value),(o?l:f)(i),s&&(o=r),r}var e=d3.layout.hierarchy(),t=Math.round,n=[1,1],r=null,i=nt,s=!1,o,u=.5*(1+Math.sqrt(5));return p.size=function(e){return arguments.length?(n=e,p):n},p.padding=function(e){function t(t){var n=e.call(p,t,t.depth);return n==null?nt(t):rt(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return rt(t,e)}if(!arguments.length)return r;var s;return i=(r=e)==null?nt:(s=typeof e)==="function"?t:s==="number"?(e=[e,e,e,e],n):n,p},p.round=function(e){return arguments.length?(t=e?Math.round:Number,p):t!=Number},p.sticky=function(e){return arguments.length?(s=e,o=null,p):s},p.ratio=function(e){return arguments.length?(u=e,p):u},N(p,e)}}(),function(){function e(e){return e.map(t).join(",")}function t(e){return/[",\n]/.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}d3.csv=function(e,t){d3.text(e,"text/csv",function(e){t(e&&d3.csv.parse(e))})},d3.csv.parse=function(e){var t;return d3.csv.parseRows(e,function(e,n){if(n){var r={},i=-1,s=t.length;while(++i<s)r[t[i]]=e[i];return r}return t=e,null})},d3.csv.parseRows=function(e,t){function f(){if(s.lastIndex>=e.length)return r;if(a)return a=!1,n;var t=s.lastIndex;if(e.charCodeAt(t)===34){var i=t;while(i++<e.length)if(e.charCodeAt(i)===34){if(e.charCodeAt(i+1)!==34)break;i++}s.lastIndex=i+2;var o=e.charCodeAt(i+1);return o===13?(a=!0,e.charCodeAt(i+2)===10&&s.lastIndex++):o===10&&(a=!0),e.substring(t+1,i).replace(/""/g,'"')}var u=s.exec(e);return u?(a=u[0].charCodeAt(0)!==44,e.substring(t,u.index)):(s.lastIndex=e.length,e.substring(t))}var n={},r={},i=[],s=/\r\n|[,\r\n]/g,o=0,u,a;s.lastIndex=0;while((u=f())!==r){var l=[];while(u!==n&&u!==r)l.push(u),u=f();if(t&&!(l=t(l,o++)))continue;i.push(l)}return i},d3.csv.format=function(t){return t.map(e).join("\n")}}(),function(){function t(e,t,n,r){var i,s,o=0,a=t.length,f=n.length;while(o<a){if(r>=f)return-1;i=t.charCodeAt(o++);if(i==37){s=u[t.charAt(o++)];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function a(e,t,n){return t.substring(n,n+=3).toLowerCase()in f?n:-1}function l(e,t,n){c.lastIndex=0;var r=c.exec(t.substring(n,n+10));return r?n+=r[0].length:-1}function p(e,t,n){var r=d[t.substring(n,n+=3).toLowerCase()];return r==null?-1:(e.setMonth(r),n)}function v(e,t,n){m.lastIndex=0;var r=m.exec(t.substring(n,n+12));return r?(e.setMonth(g[r[0].toLowerCase()]),n+=r[0].length):-1}function b(e,n,r){return t(e,o.c.toString(),n,r)}function w(e,n,r){return t(e,o.x.toString(),n,r)}function E(e,n,r){return t(e,o.X.toString(),n,r)}function S(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+4));return r?(e.setFullYear(r[0]),n+=r[0].length):-1}function x(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setFullYear(T()+ +r[0]),n+=r[0].length):-1}function T(){return~~((new Date).getFullYear()/1e3)*1e3}function N(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setMonth(r[0]-1),n+=r[0].length):-1}function C(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setDate(+r[0]),n+=r[0].length):-1}function k(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setHours(+r[0]),n+=r[0].length):-1}function L(e,t,n){return e.hour12=!0,k(e,t,n)}function A(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setMinutes(+r[0]),n+=r[0].length):-1}function O(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setSeconds(+r[0]),n+=r[0].length):-1}function M(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+3));return r?(e.setMilliseconds(+r[0]),n+=r[0].length):-1}function D(e,t,n){var r=P[t.substring(n,n+=2).toLowerCase()];return r==null?-1:(e.hour12pm=r,n)}function H(t){return new e(t.getFullYear(),0,1)}function B(e,t){return~~((t-e)/864e5-(t.getTimezoneOffset()-e.getTimezoneOffset())/1440)}function j(e){return r(1+B(H(e),e))}function F(e){var t=H(e);return n(~~((B(t,e)+t.getDay())/7))}function I(e){var t=H(e);return n(~~((B(t,e)+(t.getDay()+6)%7)/7))}function q(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",i=~~(Math.abs(t)/60),s=Math.abs(t)%60;return r+n(i)+n(s)}function R(){this._=new Date(Date.UTC.apply(this,arguments))}function z(e){return e.toISOString()}function W(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s||u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}function X(e){e.setTime(e.getTime()+6e4)}function V(e){e.setTime(e.getTime()+36e5)}function $(e,t,n){function r(t){return e(t)}return r.invert=function(t){return K(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(K)},r.ticks=function(n,i){var s=J(r.domain());if(typeof n!="function"){var o=s[1]-s[0],u=o/n,a=d3.bisect(Z,u);if(a==Z.length)return t.year(s,n);if(!a)return e.ticks(n).map(K);Math.log(u/Z[a-1])<Math.log(Z[a]/u)&&--a,n=t[a],i=n[1],n=n[0]}return n(s[0],new Date(+s[1]+1),i)},r.tickFormat=function(){return n},r.copy=function(){return $(e.copy(),t,n)},d3.rebind(r,e,"range","rangeRound","interpolate","clamp")}function J(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function K(e){return new Date(e)}function Q(e){return function(t){var n=e.length-1,r=e[n];while(!r[1](t))r=e[--n];return r[0](t)}}function G(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function Y(e){var t=e.getFullYear(),n=G(t),r=G(t+1);return t+(e-n)/(r-n)}function ut(e){var t=new Date(Date.UTC(e,0,1));return t.setUTCFullYear(e),t}function at(e){var t=e.getUTCFullYear(),n=ut(t),r=ut(t+1);return t+(e-n)/(r-n)}d3.time={};var e=Date;d3.time.format=function(n){function i(e){var t=[],i=-1,s=0,u,a;while(++i<r)n.charCodeAt(i)==37&&(t.push(n.substring(s,i),(a=o[u=n.charAt(++i)])?a(e):u),s=i+1);return t.push(n.substring(s,i)),t.join("")}var r=n.length;return i.parse=function(r){var i=new e(1900,0,1),s=t(i,n,r,0);if(s!=r.length)return null;if(i.hour12){var o=i.getHours()%12;i.setHours(i.hour12pm?o+12:o)}return delete i.hour12,delete i.hour12pm,i},i.toString=function(){return n},i};var n=d3.format("02d"),r=d3.format("03d"),i=d3.format("04d"),s=d3.format("2d"),o={a:function(e){return h[e.getDay()].substring(0,3)},A:function(e){return h[e.getDay()]},b:function(e){return y[e.getMonth()].substring(0,3)},B:function(e){return y[e.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(e){return n(e.getDate())},e:function(e){return s(e.getDate())},H:function(e){return n(e.getHours())},I:function(e){return n(e.getHours()%12||12)},j:j,L:function(e){return r(e.getMilliseconds())},m:function(e){return n(e.getMonth()+1)},M:function(e){return n(e.getMinutes())},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e){return n(e.getSeconds())},U:F,w:function(e){return e.getDay()},W:I,x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(e){return n(e.getFullYear()%100)},Y:function(e){return i(e.getFullYear()%1e4)},Z:q,"%":function(e){return"%"}},u={a:a,A:l,b:p,B:v,c:b,d:C,e:C,H:k,I:L,L:M,m:N,M:A,p:D,S:O,x:w,X:E,y:x,Y:S},f={sun:3,mon:3,tue:3,wed:3,thu:3,fri:3,sat:3},c=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/ig,h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},m=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/ig,g={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},y=["January","February","March","April","May","June","July","August","September","October","November","December"],_=/\s*\d+/,P={am:0,pm:1};d3.time.format.utc=function(t){function r(t){try{e=R;var r=new e;return r._=t,n(r)}finally{e=Date}}var n=d3.time.format(t);return r.parse=function(t){try{e=R;var r=n.parse(t);return r&&r._}finally{e=Date}},r.toString=n.toString,r},R.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.getTime()},setDate:function(e){this._.setUTCDate(e)},setDay:function(e){this._.setUTCDay(e)},setFullYear:function(e){this._.setUTCFullYear(e)},setHours:function(e){this._.setUTCHours(e)},setMilliseconds:function(e){this._.setUTCMilliseconds(e)},setMinutes:function(e){this._.setUTCMinutes(e)},setMonth:function(e){this._.setUTCMonth(e)},setSeconds:function(e){this._.setUTCSeconds(e)}};var U=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?z:U,z.parse=function(e){return new Date(e)},z.toString=U.toString,d3.time.second=function(e){return new Date(~~(e/1e3)*1e3)},d3.time.second.utc=d3.time.second,d3.time.seconds=W(d3.time.second,function(e){e.setTime(e.getTime()+1e3)},function(e){return e.getSeconds()}),d3.time.seconds.utc=d3.time.seconds,d3.time.minute=function(e){return new Date(~~(e/6e4)*6e4)},d3.time.minute.utc=d3.time.minute,d3.time.minutes=W(d3.time.minute,X,function(e){return e.getMinutes()}),d3.time.minutes.utc=W(d3.time.minute,X,function(e){return e.getUTCMinutes()}),d3.time.hour=function(e){var t=e.getTimezoneOffset()/60;return new Date((~~(e/36e5-t)+t)*36e5)},d3.time.hour.utc=function(e){return new Date(~~(e/36e5)*36e5)},d3.time.hours=W(d3.time.hour,V,function(e){return e.getHours()}),d3.time.hours.utc=W(d3.time.hour.utc,V,function(e){return e.getUTCHours()}),d3.time.day=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},d3.time.day.utc=function(e){return new Date(~~(e/864e5)*864e5)},d3.time.days=W(d3.time.day,function(e){e.setDate(e.getDate()+1)},function(e){return e.getDate()-1}),d3.time.days.utc=W(d3.time.day.utc,function(e){e.setUTCDate(e.getUTCDate()+1)},function(e){return e.getUTCDate()-1}),d3.time.week=function(e){return(e=d3.time.day(e)).setDate(e.getDate()-e.getDay()),e},d3.time.week.utc=function(e){return(e=d3.time.day.utc(e)).setUTCDate(e.getUTCDate()-e.getUTCDay()),e},d3.time.weeks=W(d3.time.week,function(e){e.setDate(e.getDate()+7)},function(e){return~~((e-new Date(e.getFullYear(),0,1))/6048e5)}),d3.time.weeks.utc=W(d3.time.week.utc,function(e){e.setUTCDate(e.getUTCDate()+7)},function(e){return~~((e-Date.UTC(e.getUTCFullYear(),0,1))/6048e5)}),d3.time.month=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},d3.time.month.utc=function(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1))},d3.time.months=W(d3.time.month,function(e){e.setMonth(e.getMonth()+1)},function(e){return e.getMonth()}),d3.time.months.utc=W(d3.time.month.utc,function(e){e.setUTCMonth(e.getUTCMonth()+1)},function(e){return e.getUTCMonth()}),d3.time.year=function(e){return new Date(e.getFullYear(),0,1)},d3.time.year.utc=function(e){return new Date(Date.UTC(e.getUTCFullYear(),0,1))},d3.time.years=W(d3.time.year,function(e){e.setFullYear(e.getFullYear()+1)},function(e){return e.getFullYear()}),d3.time.years.utc=W(d3.time.year.utc,function(e){e.setUTCFullYear(e.getUTCFullYear()+1)},function(e){return e.getUTCFullYear()});var Z=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],et=[[d3.time.seconds,1],[d3.time.seconds,5],[d3.time.seconds,15],[d3.time.seconds,30],[d3.time.minutes,1],[d3.time.minutes,5],[d3.time.minutes,15],[d3.time.minutes,30],[d3.time.hours,1],[d3.time.hours,3],[d3.time.hours,6],[d3.time.hours,12],[d3.time.days,1],[d3.time.days,2],[d3.time.weeks,1],[d3.time.months,1],[d3.time.months,3],[d3.time.years,1]],tt=[[d3.time.format("%Y"),function(e){return!0}],[d3.time.format("%B"),function(e){return e.getMonth()}],[d3.time.format("%b %d"),function(e){return e.getDate()!=1}],[d3.time.format("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[d3.time.format("%I %p"),function(e){return e.getHours()}],[d3.time.format("%I:%M"),function(e){return e.getMinutes()}],[d3.time.format(":%S"),function(e){return e.getSeconds()}],[d3.time.format(".%L"),function(e){return e.getMilliseconds()}]],nt=d3.scale.linear(),rt=Q(tt);et.year=function(e,t){return nt.domain(e.map(Y)).ticks(t).map(G)},d3.time.scale=function(){return $(d3.scale.linear(),et,rt)};var it=[[d3.time.seconds.utc,1],[d3.time.seconds.utc,5],[d3.time.seconds.utc,15],[d3.time.seconds.utc,30],[d3.time.minutes.utc,1],[d3.time.minutes.utc,5],[d3.time.minutes.utc,15],[d3.time.minutes.utc,30],[d3.time.hours.utc,1],[d3.time.hours.utc,3],[d3.time.hours.utc,6],[d3.time.hours.utc,12],[d3.time.days.utc,1],[d3.time.days.utc,2],[d3.time.weeks.utc,1],[d3.time.months.utc,1],[d3.time.months.utc,3],[d3.time.years.utc,1]],st=[[d3.time.format.utc("%Y"),function(e){return!0}],[d3.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(e){return e.getUTCDate()!=1}],[d3.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],[d3.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]],ot=Q(st);it.year=function(e,t){return nt.domain(e.map(at)).ticks(t).map(ut)},d3.time.scale.utc=function(){return $(d3.scale.linear(),it,ot)}}(),function(){function t(e,t){return function(n){return n&&n.type in e?e[n.type](n):t}}function n(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function r(e,t){e.type in i&&i[e.type](e,t)}function s(e,t){r(e.geometry,t)}function o(e,t){for(var n=e.features,i=0,s=n.length;i<s;i++)r(n[i].geometry,t)}function u(e,t){for(var n=e.geometries,i=0,s=n.length;i<s;i++)r(n[i],t)}function a(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function f(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function l(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r][0],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function c(e,t){t.apply(null,e.coordinates)}function h(e,t){for(var n=e.coordinates[0],r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function p(e){return e.source}function d(e){return e.target}function v(t,n){function g(t){var n=Math.sin(v-(t*=v))/m,r=Math.sin(t)/m,o=n*u*i+r*p*l,f=n*u*s+r*p*c,h=n*a+r*d;return[Math.atan2(f,o)/e,Math.atan2(h,Math.sqrt(o*o+f*f))/e]}var r=t[0]*e,i=Math.cos(r),s=Math.sin(r),o=t[1]*e,u=Math.cos(o),a=Math.sin(o),f=n[0]*e,l=Math.cos(f),c=Math.sin(f),h=n[1]*e,p=Math.cos(h),d=Math.sin(h),v=g.d=Math.acos(Math.max(-1,Math.min(1,a*d+u*p*Math.cos(f-r)))),m=Math.sin(v);return g}d3.geo={};var e=Math.PI/180;d3.geo.azimuthal=function(){function f(n){var o=n[0]*e-s,f=n[1]*e,l=Math.cos(o),c=Math.sin(o),h=Math.cos(f),p=Math.sin(f),d=t!=="orthographic"?a*p+u*h*l:null,v,m=t==="stereographic"?1/(1+d):t==="gnomonic"?1/d:t==="equidistant"?(v=Math.acos(d),v?v/Math.sin(v):0):t==="equalarea"?Math.sqrt(2/(1+d)):1,g=m*h*c,y=m*(a*h*l-u*p);return[r*g+i[0],r*y+i[1]]}var t="orthographic",n,r=200,i=[480,250],s,o,u,a;return f.invert=function(n){var o=(n[0]-i[0])/r,f=(n[1]-i[1])/r,l=Math.sqrt(o*o+f*f),c=t==="stereographic"?2*Math.atan(l):t==="gnomonic"?Math.atan(l):t==="equidistant"?l:t==="equalarea"?2*Math.asin(.5*l):Math.asin(l),h=Math.sin(c),p=Math.cos(c);return[(s+Math.atan2(o*h,l*u*p+f*a*h))/e,Math.asin(p*a-(l?f*h*u/l:0))/e]},f.mode=function(e){return arguments.length?(t=e+"",f):t},f.origin=function(t){return arguments.length?(n=t,s=n[0]*e,o=n[1]*e,u=Math.cos(o),a=Math.sin(o),f):n},f.scale=function(e){return arguments.length?(r=+e,f):r},f.translate=function(e){return arguments.length?(i=[+e[0],+e[1]],f):i},f.origin([0,0])},d3.geo.albers=function(){function f(t){var n=o*(e*t[0]-s),f=Math.sqrt(u-2*o*Math.sin(e*t[1]))/o;return[r*f*Math.sin(n)+i[0],r*(f*Math.cos(n)-a)+i[1]]}function l(){var r=e*n[0],i=e*n[1],l=e*t[1],c=Math.sin(r),h=Math.cos(r);return s=e*t[0],o=.5*(c+Math.sin(i)),u=h*h+2*o*c,a=Math.sqrt(u-2*o*Math.sin(l))/o,f}var t=[-98,38],n=[29.5,45.5],r=1e3,i=[480,250],s,o,u,a;return f.invert=function(t){var n=(t[0]-i[0])/r,f=(t[1]-i[1])/r,l=a+f,c=Math.atan2(n,l),h=Math.sqrt(n*n+l*l);return[(s+c/o)/e,Math.asin((u-h*h*o*o)/(2*o))/e]},f.origin=function(e){return arguments.length?(t=[+e[0],+e[1]],l()):t},f.parallels=function(e){return arguments.length?(n=[+e[0],+e[1]],l()):n},f.scale=function(e){return arguments.length?(r=+e,f):r},f.translate=function(e){return arguments.length?(i=[+e[0],+e[1]],f):i},l()},d3.geo.albersUsa=function(){function i(i){var s=i[0],o=i[1];return(o>50?t:s<-140?n:o<21?r:e)(i)}var e=d3.geo.albers(),t=d3.geo.albers().origin([-160,60]).parallels([55,65]),n=d3.geo.albers().origin([-160,20]).parallels([8,18]),r=d3.geo.albers().origin([-60,10]).parallels([8,18]);return i.scale=function(s){return arguments.length?(e.scale(s),t.scale(s*.6),n.scale(s),r.scale(s*1.5),i.translate(e.translate())):e.scale()},i.translate=function(s){if(!arguments.length)return e.translate();var o=e.scale()/1e3,u=s[0],a=s[1];return e.translate(s),t.translate([u-400*o,a+170*o]),n.translate([u-190*o,a+200*o]),r.translate([u+580*o,a+430*o]),i},i.scale(e.scale())},d3.geo.bonne=function(){function u(u){var a=u[0]*e-r,f=u[1]*e-i;if(s){var l=o+s-f,c=a*Math.cos(f)/l;a=l*Math.sin(c),f=l*Math.cos(c)-o}else a*=Math.cos(f),f*=-1;return[t*a+n[0],t*f+n[1]]}var t=200,n=[480,250],r,i,s,o;return u.invert=function(i){var u=(i[0]-n[0])/t,a=(i[1]-n[1])/t;if(s){var f=o+a,l=Math.sqrt(u*u+f*f);a=o+s-l,u=r+l*Math.atan2(u,f)/Math.cos(a)}else a*=-1,u/=Math.cos(a);return[u/e,a/e]},u.parallel=function(t){return arguments.length?(o=1/Math.tan(s=t*e),u):s/e},u.origin=function(t){return arguments.length?(r=t[0]*e,i=t[1]*e,u):[r/e,i/e]},u.scale=function(e){return arguments.length?(t=+e,u):t},u.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],u):n},u.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function n(n){var r=n[0]/360,i=-n[1]/360;return[e*r+t[0],e*i+t[1]]}var e=500,t=[480,250];return n.invert=function(n){var r=(n[0]-t[0])/e,i=(n[1]-t[1])/e;return[360*r,-360*i]},n.scale=function(t){return arguments.length?(e=+t,n):e},n.translate=function(e){return arguments.length?(t=[+e[0],+e[1]],n):t},n},d3.geo.mercator=function(){function r(r){var i=r[0]/360,s=-(Math.log(Math.tan(Math.PI/4+r[1]*e/2))/e)/360;return[t*i+n[0],t*Math.max(-0.5,Math.min(.5,s))+n[1]]}var t=500,n=[480,250];return r.invert=function(r){var i=(r[0]-n[0])/t,s=(r[1]-n[1])/t;return[360*i,2*Math.atan(Math.exp(-360*s*e))/e-90]},r.scale=function(e){return arguments.length?(t=+e,r):t},r.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],r):n},r},d3.geo.path=function(){function s(t,i){return typeof e=="function"&&(r=n(e.apply(this,arguments))),u(t)||null}function o(e){return i(e).join(",")}function f(e){var t=h(e[0]),n=0,r=e.length;while(++n<r)t-=h(e[n]);return t}function l(e){var t=d3.geom.polygon(e[0].map(i)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),s=r[0],o=r[1],u=n,a=0,f=e.length;while(++a<f)t=d3.geom.polygon(e[a].map(i)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),s-=r[0],o-=r[1],u-=n;return[s,o,6*u]}function h(e){return Math.abs(d3.geom.polygon(e.map(i)).area())}var e=4.5,r=n(e),i=d3.geo.albersUsa(),u=t({FeatureCollection:function(e){var t=[],n=e.features,r=-1,i=n.length;while(++r<i)t.push(u(n[r].geometry));return t.join("")},Feature:function(e){return u(e.geometry)},Point:function(e){return"M"+o(e.coordinates)+r},MultiPoint:function(e){var t=[],n=e.coordinates,i=-1,s=n.length;while(++i<s)t.push("M",o(n[i]),r);return t.join("")},LineString:function(e){var t=["M"],n=e.coordinates,r=-1,i=n.length;while(++r<i)t.push(o(n[r]),"L");return t.pop(),t.join("")},MultiLineString:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a;while(++r<i){s=n[r],u=-1,a=s.length,t.push("M");while(++u<a)t.push(o(s[u]),"L");t.pop()}return t.join("")},Polygon:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a;while(++r<i){s=n[r],u=-1;if((a=s.length-1)>0){t.push("M");while(++u<a)t.push(o(s[u]),"L");t[t.length-1]="Z"}}return t.join("")},MultiPolygon:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a,f,l,c;while(++r<i){s=n[r],u=-1,a=s.length;while(++u<a){f=s[u],l=-1;if((c=f.length-1)>0){t.push("M");while(++l<c)t.push(o(f[l]),"L");t[t.length-1]="Z"}}}return t.join("")},GeometryCollection:function(e){var t=[],n=e.geometries,r=-1,i=n.length;while(++r<i)t.push(u(n[r]));return t.join("")}}),a=s.area=t({FeatureCollection:function(e){var t=0,n=e.features,r=-1,i=n.length;while(++r<i)t+=a(n[r]);return t},Feature:function(e){return a(e.geometry)},Polygon:function(e){return f(e.coordinates)},MultiPolygon:function(e){var t=0,n=e.coordinates,r=-1,i=n.length;while(++r<i)t+=f(n[r]);return t},GeometryCollection:function(e){var t=0,n=e.geometries,r=-1,i=n.length;while(++r<i)t+=a(n[r]);return t}},0),c=s.centroid=t({Feature:function(e){return c(e.geometry)},Polygon:function(e){var t=l(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){var t=0,n=e.coordinates,r,i=0,s=0,o=0,u=-1,a=n.length;while(++u<a)r=l(n[u]),i+=r[0],s+=r[1],o+=r[2];return[i/o,s/o]}});return s.projection=function(e){return i=e,s},s.pointRadius=function(t){return typeof t=="function"?e=t:(e=+t,r=n(e)),s},s},d3.geo.bounds=function(e){var t=Infinity,n=Infinity,i=-Infinity,s=-Infinity;return r(e,function(e,r){e<t&&(t=e),e>i&&(i=e),r<n&&(n=r),r>s&&(s=r)}),[[t,n],[i,s]]};var i={Feature:s,FeatureCollection:o,GeometryCollection:u,LineString:a,MultiLineString:f,MultiPoint:a,MultiPolygon:l,Point:c,Polygon:h};d3.geo.circle=function(){function o(){}function u(e){return s.distance(e)<i}function f(e){var t=-1,n=e.length,r=[],o,u,a,f,c;while(++t<n)c=s.distance(a=e[t]),c<i?(u&&r.push(v(u,a)((f-i)/(f-c))),r.push(a),o=u=null):(u=a,!o&&r.length&&(r.push(v(r[r.length-1],u)((i-f)/(c-f))),o=u)),f=c;return u&&r.length&&(c=s.distance(a=r[0]),r.push(v(u,a)((f-i)/(f-c)))),l(r)}function l(e){var t=0,n=e.length,r,i,o=n?[e[0]]:e,u,a=s.source();while(++t<n){u=s.source(e[t-1])(e[t]).coordinates;for(r=0,i=u.length;++r<i;)o.push(u[r])}return s.source(a),o}var n=[0,0],r=89.99,i=r*e,s=d3.geo.greatArc().target(Object);o.clip=function(e){return s.source(typeof n=="function"?n.apply(this,arguments):n),a(e)};var a=t({FeatureCollection:function(e){var t=e.features.map(a).filter(Object);return t&&(e=Object.create(e),e.features=t,e)},Feature:function(e){var t=a(e.geometry);return t&&(e=Object.create(e),e.geometry=t,e)},Point:function(e){return u(e.coordinates)&&e},MultiPoint:function(e){var t=e.coordinates.filter(u);return t.length&&{type:e.type,coordinates:t}},LineString:function(e){var t=f(e.coordinates);return t.length&&(e=Object.create(e),e.coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(f).filter(function(e){return e.length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(f);return t[0].length&&(e=Object.create(e),e.coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map(function(e){return e.map(f)}).filter(function(e){return e[0].length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(a).filter(Object);return t.length&&(e=Object.create(e),e.geometries=t,e)}});return o.origin=function(e){return arguments.length?(n=e,o):n},o.angle=function(t){return arguments.length?(i=(r=+t)*e,o):r},o.precision=function(e){return arguments.length?(s.precision(e),o):s.precision()},o},d3.geo.greatArc=function(){function i(){var e=typeof t=="function"?t.apply(this,arguments):t,i=typeof n=="function"?n.apply(this,arguments):n,s=v(e,i),o=r/s.d,u=0,a=[e];while((u+=o)<1)a.push(s(u));return a.push(i),{type:"LineString",coordinates:a}}var t=p,n=d,r=6*e;return i.distance=function(){var e=typeof t=="function"?t.apply(this,arguments):t,r=typeof n=="function"?n.apply(this,arguments):n;return v(e,r).d},i.source=function(e){return arguments.length?(t=e,i):t},i.target=function(e){return arguments.length?(n=e,i):n},i.precision=function(t){return arguments.length?(r=t*e,i):r/e},i},d3.geo.greatCircle=d3.geo.circle}(),function(e){var t="0.3.4",n="hasOwnProperty",r=/[\.\/]/,i="*",s=function(){},o=function(e,t){return e-t},u,a,f={n:{}},l=function(e,t){var n=f,r=a,i=Array.prototype.slice.call(arguments,2),s=l.listeners(e),c=0,h=!1,p,d=[],v={},m=[],g=u,y=[];u=e,a=0;for(var b=0,w=s.length;b<w;b++)"zIndex"in s[b]&&(d.push(s[b].zIndex),s[b].zIndex<0&&(v[s[b].zIndex]=s[b]));d.sort(o);while(d[c]<0){p=v[d[c++]],m.push(p.apply(t,i));if(a)return a=r,m}for(b=0;b<w;b++){p=s[b];if("zIndex"in p)if(p.zIndex==d[c]){m.push(p.apply(t,i));if(a)break;do{c++,p=v[d[c]],p&&m.push(p.apply(t,i));if(a)break}while(p)}else v[p.zIndex]=p;else{m.push(p.apply(t,i));if(a)break}}return a=r,u=g,m.length?m:null};l.listeners=function(e){var t=e.split(r),n=f,s,o,u,a,l,c,h,p,d=[n],v=[];for(a=0,l=t.length;a<l;a++){p=[];for(c=0,h=d.length;c<h;c++){n=d[c].n,o=[n[t[a]],n[i]],u=2;while(u--)s=o[u],s&&(p.push(s),v=v.concat(s.f||[]))}d=p}return v},l.on=function(e,t){var n=e.split(r),i=f;for(var o=0,u=n.length;o<u;o++)i=i.n,!i[n[o]]&&(i[n[o]]={n:{}}),i=i[n[o]];i.f=i.f||[];for(o=0,u=i.f.length;o<u;o++)if(i.f[o]==t)return s;return i.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},l.stop=function(){a=1},l.nt=function(e){return e?(new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)")).test(u):u},l.off=l.unbind=function(e,t){var s=e.split(r),o,u,a,l,c,h,p,d=[f];for(l=0,c=s.length;l<c;l++)for(h=0;h<d.length;h+=a.length-2){a=[h,1],o=d[h].n;if(s[l]!=i)o[s[l]]&&a.push(o[s[l]]);else for(u in o)o[n](u)&&a.push(o[u]);d.splice.apply(d,a)}for(l=0,c=d.length;l<c;l++){o=d[l];while(o.n){if(t){if(o.f){for(h=0,p=o.f.length;h<p;h++)if(o.f[h]==t){o.f.splice(h,1);break}!o.f.length&&delete o.f}for(u in o.n)if(o.n[n](u)&&o.n[u].f){var v=o.n[u].f;for(h=0,p=v.length;h<p;h++)if(v[h]==t){v.splice(h,1);break}!v.length&&delete o.n[u].f}}else{delete o.f;for(u in o.n)o.n[n](u)&&o.n[u].f&&delete o.n[u].f}o=o.n}}},l.once=function(e,t){var n=function(){var r=t.apply(this,arguments);return l.unbind(e,n),r};return l.on(e,n)},l.version=t,l.toString=function(){return"You are running Eve "+t},typeof module!="undefined"&&module.exports?module.exports=l:typeof define!="undefined"?define("eve",[],function(){return l}):e.eve=l}(this),function(){function e(n){if(e.is(n,"function"))return t?n():eve.on("raphael.DOMload",n);if(e.is(n,O))return e._engine.create[h](e,n.splice(0,3+e.is(n[0],L))).add(n);var r=Array.prototype.slice.call(arguments,0);if(e.is(r[r.length-1],"function")){var i=r.pop();return t?i.call(e._engine.create[h](e,r)):eve.on("raphael.DOMload",function(){i.call(e._engine.create[h](e,r))})}return e._engine.create[h](e,arguments)}function ht(e){if(Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[o](n)&&(t[n]=ht(e[n]));return t}function wt(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function Et(e,t,n){function r(){var i=Array.prototype.slice.call(arguments,0),s=i.join("␀"),u=r.cache=r.cache||{},a=r.count=r.count||[];return u[o](s)?(wt(a,s),n?n(u[s]):u[s]):(a.length>=1e3&&delete u[a.shift()],a.push(s),u[s]=e[h](t,i),n?n(u[s]):u[s])}return r}function xt(){return this.hex}function Tt(e,t){var n=[];for(var r=0,i=e.length;i-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?s[3]={x:+e[0],y:+e[1]}:i-2==r&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}function Ct(e,t,n,r,i){var s=-3*t+9*n-9*r+3*i,o=e*s+6*t-12*n+6*r;return e*o-3*t+3*n}function kt(e,t,n,r,i,s,o,u,a){a==null&&(a=1),a=a>1?1:a<0?0:a;var f=a/2,l=12,c=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;for(var d=0;d<l;d++){var v=f*c[d]+f,m=Ct(v,e,n,i,o),g=Ct(v,t,r,s,u),y=m*m+g*g;p+=h[d]*S.sqrt(y)}return f*p}function Lt(e,t,n,r,i,s,o,u,a){if(a<0||kt(e,t,n,r,i,s,o,u)<a)return;var f=1,l=f/2,c=f-l,h,p=.01;h=kt(e,t,n,r,i,s,o,u,c);while(N(h-a)>p)l/=2,c+=(h<a?1:-1)*l,h=kt(e,t,n,r,i,s,o,u,c);return c}function At(e,t,n,r,i,s,o,u){if(x(e,n)<T(i,o)||T(e,n)>x(i,o)||x(t,r)<T(s,u)||T(t,r)>x(s,u))return;var a=(e*r-t*n)*(i-o)-(e-n)*(i*u-s*o),f=(e*r-t*n)*(s-u)-(t-r)*(i*u-s*o),l=(e-n)*(s-u)-(t-r)*(i-o);if(!l)return;var c=a/l,h=f/l,p=+c.toFixed(2),d=+h.toFixed(2);if(p<+T(e,n).toFixed(2)||p>+x(e,n).toFixed(2)||p<+T(i,o).toFixed(2)||p>+x(i,o).toFixed(2)||d<+T(t,r).toFixed(2)||d>+x(t,r).toFixed(2)||d<+T(s,u).toFixed(2)||d>+x(s,u).toFixed(2))return;return{x:c,y:h}}function Ot(e,t){return _t(e,t)}function Mt(e,t){return _t(e,t,1)}function _t(t,n,r){var i=e.bezierBBox(t),s=e.bezierBBox(n);if(!e.isBBoxIntersect(i,s))return r?0:[];var o=kt.apply(0,t),u=kt.apply(0,n),a=~~(o/5),f=~~(u/5),l=[],c=[],h={},p=r?0:[];for(var d=0;d<a+1;d++){var v=e.findDotsAtSegment.apply(e,t.concat(d/a));l.push({x:v.x,y:v.y,t:d/a})}for(d=0;d<f+1;d++)v=e.findDotsAtSegment.apply(e,n.concat(d/f)),c.push({x:v.x,y:v.y,t:d/f});for(d=0;d<a;d++)for(var m=0;m<f;m++){var g=l[d],y=l[d+1],b=c[m],w=c[m+1],E=N(y.x-g.x)<.001?"y":"x",S=N(w.x-b.x)<.001?"y":"x",x=At(g.x,g.y,y.x,y.y,b.x,b.y,w.x,w.y);if(x){if(h[x.x.toFixed(4)]==x.y.toFixed(4))continue;h[x.x.toFixed(4)]=x.y.toFixed(4);var T=g.t+N((x[E]-g[E])/(y[E]-g[E]))*(y.t-g.t),C=b.t+N((x[S]-b[S])/(w[S]-b[S]))*(w.t-b.t);T>=0&&T<=1&&C>=0&&C<=1&&(r?p++:p.push({x:x.x,y:x.y,t1:T,t2:C}))}}return p}function Dt(t,n,r){t=e._path2curve(t),n=e._path2curve(n);var i,s,o,u,a,f,l,c,h,p,d=r?0:[];for(var v=0,m=t.length;v<m;v++){var g=t[v];if(g[0]=="M")i=a=g[1],s=f=g[2];else{g[0]=="C"?(h=[i,s].concat(g.slice(1)),i=h[6],s=h[7]):(h=[i,s,i,s,a,f,a,f],i=a,s=f);for(var y=0,b=n.length;y<b;y++){var w=n[y];if(w[0]=="M")o=l=w[1],u=c=w[2];else{w[0]=="C"?(p=[o,u].concat(w.slice(1)),o=p[6],u=p[7]):(p=[o,u,o,u,l,c,l,c],o=l,u=c);var E=_t(h,p,r);if(r)d+=E;else{for(var S=0,x=E.length;S<x;S++)E[S].segment1=v,E[S].segment2=y,E[S].bez1=h,E[S].bez2=p;d=d.concat(E)}}}}}return d}function tn(e,t,n,r,i,s){e!=null?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function mn(){return this.x+m+this.y}function gn(){return this.x+m+this.y+m+this.width+" × "+this.height}function An(e,t,n,r,i,s){function h(e){return((a*e+u)*e+o)*e}function p(e,t){var n=d(e,t);return((c*n+l)*n+f)*n}function d(e,t){var n,r,i,s,f,l;for(i=e,l=0;l<8;l++){s=h(i)-e;if(N(s)<t)return i;f=(3*a*i+2*u)*i+o;if(N(f)<1e-6)break;i-=s/f}n=0,r=1,i=e;if(i<n)return n;if(i>r)return r;while(n<r){s=h(i);if(N(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)/2+n}return i}var o=3*t,u=3*(r-t)-o,a=1-o-u,f=3*n,l=3*(i-n)-f,c=1-f-l;return p(e,1/(200*s))}function On(e,t){var n=[],r={};this.ms=t,this.times=1;if(e){for(var i in e)e[o](i)&&(r[U(i)]=e[i],n.push(U(i)));n.sort(rt)}this.anim=r,this.top=n[n.length-1],this.percents=n}function Mn(t,r,i,s,u,a){i=U(i);var f,l,c,h=[],d,v,m,b=t.ms,w={},E={},S={};if(s)for(T=0,N=Nn.length;T<N;T++){var x=Nn[T];if(x.el.id==r.id&&x.anim==t){x.percent!=i?(Nn.splice(T,1),c=1):l=x,r.attr(x.totalOrigin);break}}else s=+E;for(var T=0,N=t.percents.length;T<N;T++){if(t.percents[T]==i||t.percents[T]>s*t.top){i=t.percents[T],v=t.percents[T-1]||0,b=b/t.top*(i-v),d=t.percents[T+1],f=t.anim[i];break}s&&r.attr(t.anim[t.percents[T]])}if(!f)return;if(!l){for(var C in f)if(f[o](C))if(V[o](C)||r.paper.customAttributes[o](C)){w[C]=r.attr(C),w[C]==null&&(w[C]=X[C]),E[C]=f[C];switch(V[C]){case L:S[C]=(E[C]-w[C])/b;break;case"colour":w[C]=e.getRGB(w[C]);var k=e.getRGB(E[C]);S[C]={r:(k.r-w[C].r)/b,g:(k.g-w[C].g)/b,b:(k.b-w[C].b)/b};break;case"path":var A=zt(w[C],E[C]),O=A[1];w[C]=A[0],S[C]=[];for(T=0,N=w[C].length;T<N;T++){S[C][T]=[0];for(var M=1,_=w[C][T].length;M<_;M++)S[C][T][M]=(O[T][M]-w[C][T][M])/b}break;case"transform":var D=r._,P=en(D[C],E[C]);if(P){w[C]=P.from,E[C]=P.to,S[C]=[],S[C].real=!0;for(T=0,N=w[C].length;T<N;T++){S[C][T]=[w[C][T][0]];for(M=1,_=w[C][T].length;M<_;M++)S[C][T][M]=(E[C][T][M]-w[C][T][M])/b}}else{var H=r.matrix||new tn,B={_:{transform:D.transform},getBBox:function(){return r.getBBox(1)}};w[C]=[H.a,H.b,H.c,H.d,H.e,H.f],Yt(B,E[C]),E[C]=B._.transform,S[C]=[(B.matrix.a-H.a)/b,(B.matrix.b-H.b)/b,(B.matrix.c-H.c)/b,(B.matrix.d-H.d)/b,(B.matrix.e-H.e)/b,(B.matrix.f-H.f)/b]}break;case"csv":var j=g(f[C])[y](n),F=g(w[C])[y](n);if(C=="clip-rect"){w[C]=F,S[C]=[],T=F.length;while(T--)S[C][T]=(j[T]-w[C][T])/b}E[C]=j;break;default:j=[][p](f[C]),F=[][p](w[C]),S[C]=[],T=r.paper.customAttributes[C].length;while(T--)S[C][T]=((j[T]||0)-(F[T]||0))/b}}var q=f.easing,R=e.easing_formulas[q];if(!R){R=g(q).match(I);if(R&&R.length==5){var z=R;R=function(e){return An(e,+z[1],+z[2],+z[3],+z[4],b)}}else R=st}m=f.start||t.start||+(new Date),x={anim:t,percent:i,timestamp:m,start:m+(t.del||0),status:0,initstatus:s||0,stop:!1,ms:b,easing:R,from:w,diff:S,to:E,el:r,callback:f.callback,prev:v,next:d,repeat:a||t.times,origin:r.attr(),totalOrigin:u},Nn.push(x);if(s&&!l&&!c){x.stop=!0,x.start=new Date-b*s;if(Nn.length==1)return kn()}c&&(x.start=new Date-x.ms*s),Nn.length==1&&Cn(kn)}else l.initstatus=s,l.start=new Date-l.ms*s;eve("raphael.anim.start."+r.id,r,t)}function _n(e){for(var t=0;t<Nn.length;t++)Nn[t].el.paper==e&&Nn.splice(t--,1)}e.version="2.1.0",e.eve=eve;var t,n=/[, ]+/,r={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},i=/\{(\d+)\}/g,s="prototype",o="hasOwnProperty",u={doc:document,win:window},a={was:Object.prototype[o].call(u.win,"Raphael"),is:u.win.Raphael},f=function(){this.ca=this.customAttributes={}},l,c="appendChild",h="apply",p="concat",d="createTouch"in u.doc,v="",m=" ",g=String,y="split",b="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[y](m),w={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},E=g.prototype.toLowerCase,S=Math,x=S.max,T=S.min,N=S.abs,C=S.pow,k=S.PI,L="number",A="string",O="array",M="toString",_="fill",D=Object.prototype.toString,P={},H="push",B=e._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,j=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,F={NaN:1,Infinity:1,"-Infinity":1},I=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,q=S.round,R="setAttribute",U=parseFloat,z=parseInt,W=g.prototype.toUpperCase,X=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},V=e._availableAnimAttrs={blur:L,"clip-rect":"csv",cx:L,cy:L,fill:"colour","fill-opacity":L,"font-size":L,height:L,opacity:L,path:"path",r:L,rx:L,ry:L,stroke:"colour","stroke-opacity":L,"stroke-width":L,transform:"transform",width:L,x:L,y:L},$=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,J=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,K={hs:1,rg:1},Q=/,?([achlmqrstvxz]),?/gi,G=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Y=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Z=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,et=e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,tt={},nt=function(e,t){return e.key-t.key},rt=function(e,t){return U(e)-U(t)},it=function(){},st=function(e){return e},ot=e._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-n,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},ut=function(e,t,n,r){return r==null&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},at=e._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return ut(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return ut(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ot(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return ot(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ot(t.x,t.y,t.width,t.height)}},ft=e.mapPath=function(e,t){if(!t)return e;var n,r,i,s,o,u,a;e=zt(e);for(i=0,o=e.length;i<o;i++){a=e[i];for(s=1,u=a.length;s<u;s+=2)n=t.x(a[s],a[s+1]),r=t.y(a[s],a[s+1]),a[s]=n,a[s+1]=r}return e};e._g=u,e.type=u.win.SVGAngle||u.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(e.type=="VML"){var lt=u.doc.createElement("div"),ct;lt.innerHTML='<v:shape adj="1"/>',ct=lt.firstChild,ct.style.behavior="url(#default#VML)";if(!ct||typeof ct.adj!="object")return e.type=v;lt=null}e.svg=!(e.vml=e.type=="VML"),e._Paper=f,e.fn=l=f.prototype=e.prototype,e._id=0,e._oid=0,e.is=function(e,t){return t=E.call(t),t=="finite"?!F[o](+e):t=="array"?e instanceof Array:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||t=="array"&&Array.isArray&&Array.isArray(e)||D.call(e).slice(8,-1).toLowerCase()==t},e.angle=function(t,n,r,i,s,o){if(s==null){var u=t-r,a=n-i;return!u&&!a?0:(180+S.atan2(-a,-u)*180/k+360)%360}return e.angle(t,n,s,o)-e.angle(r,i,s,o)},e.rad=function(e){return e%360*k/180},e.deg=function(e){return e*180/k%360},e.snapTo=function(t,n,r){r=e.is(r,"finite")?r:10;if(e.is(t,O)){var i=t.length;while(i--)if(N(t[i]-n)<=r)return t[i]}else{t=+t;var s=n%t;if(s<r)return n-s;if(s>t-r)return n-s+t}return n};var pt=e.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=S.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)});e.setWindow=function(t){eve("raphael.setWindow",e,u.win,t),u.win=t,u.doc=u.win.document,e._engine.initWin&&e._engine.initWin(u.win)};var dt=function(t){if(e.vml){var n=/^\s+|\s+$/g,r;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),r=i.body}catch(s){r=createPopup().document.body}var o=r.createTextRange();dt=Et(function(e){try{r.style.color=g(e).replace(n,v);var t=o.queryCommandValue("ForeColor");return t=(t&255)<<16|t&65280|(t&16711680)>>>16,"#"+("000000"+t.toString(16)).slice(-6)}catch(i){return"none"}})}else{var a=u.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",u.doc.body.appendChild(a),dt=Et(function(e){return a.style.color=e,u.doc.defaultView.getComputedStyle(a,v).getPropertyValue("color")})}return dt(t)},vt=function(){return"hsb("+[this.h,this.s,this.b]+")"},mt=function(){return"hsl("+[this.h,this.s,this.l]+")"},gt=function(){return this.hex},yt=function(t,n,r){n==null&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,n=t.g,t=t.r);if(n==null&&e.is(t,A)){var i=e.getRGB(t);t=i.r,n=i.g,r=i.b}if(t>1||n>1||r>1)t/=255,n/=255,r/=255;return[t,n,r]},bt=function(t,n,r,i){t*=255,n*=255,r*=255;var s={r:t,g:n,b:r,hex:e.rgb(t,n,r),toString:gt};return e.is(i,"finite")&&(s.opacity=i),s};e.color=function(t){var n;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(n=e.hsb2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(n=e.hsl2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(n=e.rgb2hsl(t),t.h=n.h,t.s=n.s,t.l=n.l,n=e.rgb2hsb(t),t.v=n.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=gt,t},e.hsb2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,r=e.o),e*=360;var i,s,o,u,a;return e=e%360/60,a=n*t,u=a*(1-N(e%2-1)),i=s=o=n-a,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],bt(i,s,o,r)},e.hsl2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h);if(e>1||t>1||n>1)e/=360,t/=100,n/=100;e*=360;var i,s,o,u,a;return e=e%360/60,a=2*t*(n<.5?n:1-n),u=a*(1-N(e%2-1)),i=s=o=n-a/2,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],bt(i,s,o,r)},e.rgb2hsb=function(e,t,n){n=yt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o;return s=x(e,t,n),o=s-T(e,t,n),r=o==0?null:s==e?(t-n)/o:s==t?(n-e)/o+2:(e-t)/o+4,r=(r+360)%6*60/360,i=o==0?0:o/s,{h:r,s:i,b:s,toString:vt}},e.rgb2hsl=function(e,t,n){n=yt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o,u,a;return o=x(e,t,n),u=T(e,t,n),a=o-u,r=a==0?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,s=(o+u)/2,i=a==0?0:s<.5?a/(2*s):a/(2-2*s),{h:r,s:i,l:s,toString:mt}},e._path2string=function(){return this.join(",").replace(Q,"$1")};var St=e._preload=function(e,t){var n=u.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,u.doc.body.removeChild(this)},n.onerror=function(){u.doc.body.removeChild(this)},u.doc.body.appendChild(n),n.src=e};e.getRGB=Et(function(t){if(!t||!!((t=g(t)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:xt};if(t=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:xt};!K[o](t.toLowerCase().substring(0,2))&&t.charAt()!="#"&&(t=dt(t));var n,r,i,s,u,a,f,l=t.match(j);return l?(l[2]&&(s=z(l[2].substring(5),16),i=z(l[2].substring(3,5),16),r=z(l[2].substring(1,3),16)),l[3]&&(s=z((a=l[3].charAt(3))+a,16),i=z((a=l[3].charAt(2))+a,16),r=z((a=l[3].charAt(1))+a,16)),l[4]&&(f=l[4][y](J),r=U(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=U(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=U(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),l[1].toLowerCase().slice(0,4)=="rgba"&&(u=U(f[3])),f[3]&&f[3].slice(-1)=="%"&&(u/=100)),l[5]?(f=l[5][y](J),r=U(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=U(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=U(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(r/=360),l[1].toLowerCase().slice(0,4)=="hsba"&&(u=U(f[3])),f[3]&&f[3].slice(-1)=="%"&&(u/=100),e.hsb2rgb(r,i,s,u)):l[6]?(f=l[6][y](J),r=U(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=U(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=U(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(r/=360),l[1].toLowerCase().slice(0,4)=="hsla"&&(u=U(f[3])),f[3]&&f[3].slice(-1)=="%"&&(u/=100),e.hsl2rgb(r,i,s,u)):(l={r:r,g:i,b:s,toString:xt},l.hex="#"+(16777216|s|i<<8|r<<16).toString(16).slice(1),e.is(u,"finite")&&(l.opacity=u),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:xt}},e),e.hsb=Et(function(t,n,r){return e.hsb2rgb(t,n,r).hex}),e.hsl=Et(function(t,n,r){return e.hsl2rgb(t,n,r).hex}),e.rgb=Et(function(e,t,n){return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)}),e.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var n=Nt(t);if(n.arr)return Ht(n.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return e.is(t,O)&&e.is(t[0],O)&&(i=Ht(t)),i.length||g(t).replace(G,function(e,t,n){var s=[],o=t.toLowerCase();n.replace(Z,function(e,t){t&&s.push(+t)}),o=="m"&&s.length>2&&(i.push([t][p](s.splice(0,2))),o="l",t=t=="m"?"l":"L");if(o=="r")i.push([t][p](s));else while(s.length>=r[o]){i.push([t][p](s.splice(0,r[o])));if(!r[o])break}}),i.toString=e._path2string,n.arr=Ht(i),i},e.parseTransformString=Et(function(t){if(!t)return null;var n={r:3,s:4,t:2,m:6},r=[];return e.is(t,O)&&e.is(t[0],O)&&(r=Ht(t)),r.length||g(t).replace(Y,function(e,t,n){var i=[],s=E.call(t);n.replace(Z,function(e,t){t&&i.push(+t)}),r.push([t][p](i))}),r.toString=e._path2string,r});var Nt=function(e){var t=Nt.ps=Nt.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[o](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};e.findDotsAtSegment=function(e,t,n,r,i,s,o,u,a){var f=1-a,l=C(f,3),c=C(f,2),h=a*a,p=h*a,d=l*e+c*3*a*n+f*3*a*a*i+p*o,v=l*t+c*3*a*r+f*3*a*a*s+p*u,m=e+2*a*(n-e)+h*(i-2*n+e),g=t+2*a*(r-t)+h*(s-2*r+t),y=n+2*a*(i-n)+h*(o-2*i+n),b=r+2*a*(s-r)+h*(u-2*s+r),w=f*e+a*n,E=f*t+a*r,x=f*i+a*o,T=f*s+a*u,N=90-S.atan2(m-y,g-b)*180/k;return(m>y||g<b)&&(N+=180),{x:d,y:v,m:{x:m,y:g},n:{x:y,y:b},start:{x:w,y:E},end:{x:x,y:T},alpha:N}},e.bezierBBox=function(t,n,r,i,s,o,u,a){e.is(t,"array")||(t=[t,n,r,i,s,o,u,a]);var f=Ut.apply(null,t);return{x:f.min.x,y:f.min.y,x2:f.max.x,y2:f.max.y,width:f.max.x-f.min.x,height:f.max.y-f.min.y}},e.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},e.isBBoxIntersect=function(t,n){var r=e.isPointInsideBBox;return r(n,t.x,t.y)||r(n,t.x2,t.y)||r(n,t.x,t.y2)||r(n,t.x2,t.y2)||r(t,n.x,n.y)||r(t,n.x2,n.y)||r(t,n.x,n.y2)||r(t,n.x2,n.y2)||(t.x<n.x2&&t.x>n.x||n.x<t.x2&&n.x>t.x)&&(t.y<n.y2&&t.y>n.y||n.y<t.y2&&n.y>t.y)},e.pathIntersection=function(e,t){return Dt(e,t)},e.pathIntersectionNumber=function(e,t){return Dt(e,t,1)},e.isPointInsidePath=function(t,n,r){var i=e.pathBBox(t);return e.isPointInsideBBox(i,n,r)&&Dt(t,[["M",n,r],["H",i.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Pt=e.pathBBox=function(e){var t=Nt(e);if(t.bbox)return t.bbox;if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=zt(e);var n=0,r=0,i=[],s=[],o;for(var u=0,a=e.length;u<a;u++){o=e[u];if(o[0]=="M")n=o[1],r=o[2],i.push(n),s.push(r);else{var f=Ut(n,r,o[1],o[2],o[3],o[4],o[5],o[6]);i=i[p](f.min.x,f.max.x),s=s[p](f.min.y,f.max.y),n=o[5],r=o[6]}}var l=T[h](0,i),c=T[h](0,s),d=x[h](0,i),v=x[h](0,s),m={x:l,y:c,x2:d,y2:v,width:d-l,height:v-c};return t.bbox=ht(m),m},Ht=function(t){var n=ht(t);return n.toString=e._path2string,n},Bt=e._pathToRelative=function(t){var n=Nt(t);if(n.rel)return Ht(n.rel);if(!e.is(t,O)||!e.is(t&&t[0],O))t=e.parsePathString(t);var r=[],i=0,s=0,o=0,u=0,a=0;t[0][0]=="M"&&(i=t[0][1],s=t[0][2],o=i,u=s,a++,r.push(["M",i,s]));for(var f=a,l=t.length;f<l;f++){var c=r[f]=[],h=t[f];if(h[0]!=E.call(h[0])){c[0]=E.call(h[0]);switch(c[0]){case"a":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+(h[6]-i).toFixed(3),c[7]=+(h[7]-s).toFixed(3);break;case"v":c[1]=+(h[1]-s).toFixed(3);break;case"m":o=h[1],u=h[2];default:for(var p=1,d=h.length;p<d;p++)c[p]=+(h[p]-(p%2?i:s)).toFixed(3)}}else{c=r[f]=[],h[0]=="m"&&(o=h[1]+i,u=h[2]+s);for(var v=0,m=h.length;v<m;v++)r[f][v]=h[v]}var g=r[f].length;switch(r[f][0]){case"z":i=o,s=u;break;case"h":i+=+r[f][g-1];break;case"v":s+=+r[f][g-1];break;default:i+=+r[f][g-2],s+=+r[f][g-1]}}return r.toString=e._path2string,n.rel=Ht(r),r},jt=e._pathToAbsolute=function(t){var n=Nt(t);if(n.abs)return Ht(n.abs);if(!e.is(t,O)||!e.is(t&&t[0],O))t=e.parsePathString(t);if(!t||!t.length)return[["M",0,0]];var r=[],i=0,s=0,o=0,u=0,a=0;t[0][0]=="M"&&(i=+t[0][1],s=+t[0][2],o=i,u=s,a++,r[0]=["M",i,s]);var f=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z";for(var l,c,h=a,d=t.length;h<d;h++){r.push(l=[]),c=t[h];if(c[0]!=W.call(c[0])){l[0]=W.call(c[0]);switch(l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+(c[6]+i),l[7]=+(c[7]+s);break;case"V":l[1]=+c[1]+s;break;case"H":l[1]=+c[1]+i;break;case"R":var v=[i,s][p](c.slice(1));for(var m=2,g=v.length;m<g;m++)v[m]=+v[m]+i,v[++m]=+v[m]+s;r.pop(),r=r[p](Tt(v,f));break;case"M":o=+c[1]+i,u=+c[2]+s;default:for(m=1,g=c.length;m<g;m++)l[m]=+c[m]+(m%2?i:s)}}else if(c[0]=="R")v=[i,s][p](c.slice(1)),r.pop(),r=r[p](Tt(v,f)),l=["R"][p](c.slice(-2));else for(var y=0,b=c.length;y<b;y++)l[y]=c[y];switch(l[0]){case"Z":i=o,s=u;break;case"H":i=l[1];break;case"V":s=l[1];break;case"M":o=l[l.length-2],u=l[l.length-1];default:i=l[l.length-2],s=l[l.length-1]}}return r.toString=e._path2string,n.abs=Ht(r),r},Ft=function(e,t,n,r){return[e,t,n,r,n,r]},It=function(e,t,n,r,i,s){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*s+u*r,i,s]},qt=function(e,t,n,r,i,s,o,u,a,f){var l=k*120/180,c=k/180*(+i||0),h=[],d,v=Et(function(e,t,n){var r=e*S.cos(n)-t*S.sin(n),i=e*S.sin(n)+t*S.cos(n);return{x:r,y:i}});if(!f){d=v(e,t,-c),e=d.x,t=d.y,d=v(u,a,-c),u=d.x,a=d.y;var m=S.cos(k/180*i),g=S.sin(k/180*i),b=(e-u)/2,w=(t-a)/2,E=b*b/(n*n)+w*w/(r*r);E>1&&(E=S.sqrt(E),n=E*n,r=E*r);var x=n*n,T=r*r,C=(s==o?-1:1)*S.sqrt(N((x*T-x*w*w-T*b*b)/(x*w*w+T*b*b))),L=C*n*w/r+(e+u)/2,A=C*-r*b/n+(t+a)/2,O=S.asin(((t-A)/r).toFixed(9)),M=S.asin(((a-A)/r).toFixed(9));O=e<L?k-O:O,M=u<L?k-M:M,O<0&&(O=k*2+O),M<0&&(M=k*2+M),o&&O>M&&(O-=k*2),!o&&M>O&&(M-=k*2)}else O=f[0],M=f[1],L=f[2],A=f[3];var _=M-O;if(N(_)>l){var D=M,P=u,H=a;M=O+l*(o&&M>O?1:-1),u=L+n*S.cos(M),a=A+r*S.sin(M),h=qt(u,a,n,r,i,0,o,P,H,[M,D,L,A])}_=M-O;var B=S.cos(O),j=S.sin(O),F=S.cos(M),I=S.sin(M),q=S.tan(_/4),R=4/3*n*q,U=4/3*r*q,z=[e,t],W=[e+R*j,t-U*B],X=[u+R*I,a-U*F],V=[u,a];W[0]=2*z[0]-W[0],W[1]=2*z[1]-W[1];if(f)return[W,X,V][p](h);h=[W,X,V][p](h).join()[y](",");var $=[];for(var J=0,K=h.length;J<K;J++)$[J]=J%2?v(h[J-1],h[J],c).y:v(h[J],h[J+1],c).x;return $},Rt=function(e,t,n,r,i,s,o,u,a){var f=1-a;return{x:C(f,3)*e+C(f,2)*3*a*n+f*3*a*a*i+C(a,3)*o,y:C(f,3)*t+C(f,2)*3*a*r+f*3*a*a*s+C(a,3)*u}},Ut=Et(function(e,t,n,r,i,s,o,u){var a=i-2*n+e-(o-2*i+n),f=2*(n-e)-2*(i-n),l=e-n,c=(-f+S.sqrt(f*f-4*a*l))/2/a,p=(-f-S.sqrt(f*f-4*a*l))/2/a,d=[t,u],v=[e,o],m;return N(c)>"1e12"&&(c=.5),N(p)>"1e12"&&(p=.5),c>0&&c<1&&(m=Rt(e,t,n,r,i,s,o,u,c),v.push(m.x),d.push(m.y)),p>0&&p<1&&(m=Rt(e,t,n,r,i,s,o,u,p),v.push(m.x),d.push(m.y)),a=s-2*r+t-(u-2*s+r),f=2*(r-t)-2*(s-r),l=t-r,c=(-f+S.sqrt(f*f-4*a*l))/2/a,p=(-f-S.sqrt(f*f-4*a*l))/2/a,N(c)>"1e12"&&(c=.5),N(p)>"1e12"&&(p=.5),c>0&&c<1&&(m=Rt(e,t,n,r,i,s,o,u,c),v.push(m.x),d.push(m.y)),p>0&&p<1&&(m=Rt(e,t,n,r,i,s,o,u,p),v.push(m.x),d.push(m.y)),{min:{x:T[h](0,v),y:T[h](0,d)},max:{x:x[h](0,v),y:x[h](0,d)}}}),zt=e._path2curve=Et(function(e,t){var n=!t&&Nt(e);if(!t&&n.curve)return Ht(n.curve);var r=jt(e),i=t&&jt(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(e,t){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][p](qt[h](0,[t.x,t.y][p](e.slice(1))));break;case"S":n=t.x+(t.x-(t.bx||t.x)),r=t.y+(t.y-(t.by||t.y)),e=["C",n,r][p](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][p](It(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][p](It(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][p](Ft(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][p](Ft(t.x,t.y,e[1],t.y));break;case"V":e=["C"][p](Ft(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][p](Ft(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t].length>7){e[t].shift();var n=e[t];while(n.length)e.splice(t++,0,["C"][p](n.splice(0,6)));e.splice(t,1),c=x(r.length,i&&i.length||0)}},f=function(e,t,n,s,o){e&&t&&e[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],c=x(r.length,i&&i.length||0))};for(var l=0,c=x(r.length,i&&i.length||0);l<c;l++){r[l]=u(r[l],s),a(r,l),i&&(i[l]=u(i[l],o)),i&&a(i,l),f(r,i,s,o,l),f(i,r,o,s,l);var d=r[l],v=i&&i[l],m=d.length,g=i&&v.length;s.x=d[m-2],s.y=d[m-1],s.bx=U(d[m-4])||s.x,s.by=U(d[m-3])||s.y,o.bx=i&&(U(v[g-4])||o.x),o.by=i&&(U(v[g-3])||o.y),o.x=i&&v[g-2],o.y=i&&v[g-1]}return i||(n.curve=Ht(r)),i?[r,i]:r},null,Ht),Wt=e._parseDots=Et(function(t){var n=[];for(var r=0,i=t.length;r<i;r++){var s={},o=t[r].match(/^([^:]*):?([\d\.]*)/);s.color=e.getRGB(o[1]);if(s.color.error)return null;s.color=s.color.hex,o[2]&&(s.offset=o[2]+"%"),n.push(s)}for(r=1,i=n.length-1;r<i;r++)if(!n[r].offset){var u=U(n[r-1].offset||0),a=0;for(var f=r+1;f<i;f++)if(n[f].offset){a=n[f].offset;break}a||(a=100,f=i),a=U(a);var l=(a-u)/(f-r+1);for(;r<f;r++)u+=l,n[r].offset=u+"%"}return n}),Xt=e._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},Vt=e._tofront=function(e,t){if(t.top===e)return;Xt(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e},$t=e._toback=function(e,t){if(t.bottom===e)return;Xt(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e},Jt=e._insertafter=function(e,t,n){Xt(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Kt=e._insertbefore=function(e,t,n){Xt(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Qt=e.toMatrix=function(e,t){var n=Pt(e),r={_:{transform:v},getBBox:function(){return n}};return Yt(r,t),r.matrix},Gt=e.transformPath=function(e,t){return ft(e,Qt(e,t))},Yt=e._extractTransform=function(t,n){if(n==null)return t._.transform;n=g(n).replace(/\.{3}|\u2026/g,t._.transform||v);var r=e.parseTransformString(n),i=0,s=0,o=0,u=1,a=1,f=t._,l=new tn;f.transform=r||[];if(r)for(var c=0,h=r.length;c<h;c++){var p=r[c],d=p.length,m=g(p[0]).toLowerCase(),y=p[0]!=m,b=y?l.invert():0,w,E,S,x,T;m=="t"&&d==3?y?(w=b.x(0,0),E=b.y(0,0),S=b.x(p[1],p[2]),x=b.y(p[1],p[2]),l.translate(S-w,x-E)):l.translate(p[1],p[2]):m=="r"?d==2?(T=T||t.getBBox(1),l.rotate(p[1],T.x+T.width/2,T.y+T.height/2),i+=p[1]):d==4&&(y?(S=b.x(p[2],p[3]),x=b.y(p[2],p[3]),l.rotate(p[1],S,x)):l.rotate(p[1],p[2],p[3]),i+=p[1]):m=="s"?d==2||d==3?(T=T||t.getBBox(1),l.scale(p[1],p[d-1],T.x+T.width/2,T.y+T.height/2),u*=p[1],a*=p[d-1]):d==5&&(y?(S=b.x(p[3],p[4]),x=b.y(p[3],p[4]),l.scale(p[1],p[2],S,x)):l.scale(p[1],p[2],p[3],p[4]),u*=p[1],a*=p[2]):m=="m"&&d==7&&l.add(p[1],p[2],p[3],p[4],p[5],p[6]),f.dirtyT=1,t.matrix=l}t.matrix=l,f.sx=u,f.sy=a,f.deg=i,f.dx=s=l.e,f.dy=o=l.f,u==1&&a==1&&!i&&f.bbox?(f.bbox.x+=+s,f.bbox.y+=+o):f.dirtyT=1},Zt=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},en=e._equaliseTransform=function(t,n){n=g(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];var r=x(t.length,n.length),i=[],s=[],o=0,u,a,f,l;for(;o<r;o++){f=t[o]||Zt(n[o]),l=n[o]||Zt(f);if(f[0]!=l[0]||f[0].toLowerCase()=="r"&&(f[2]!=l[2]||f[3]!=l[3])||f[0].toLowerCase()=="s"&&(f[3]!=l[3]||f[4]!=l[4]))return;i[o]=[],s[o]=[];for(u=0,a=x(f.length,l.length);u<a;u++)u in f&&(i[o][u]=f[u]),u in l&&(s[o][u]=l[u])}return{from:i,to:s}};e._getContainer=function(t,n,r,i){var s;s=i==null&&!e.is(t,"object")?u.doc.getElementById(t):t;if(s==null)return;return s.tagName?n==null?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:n,height:r}:{container:1,x:t,y:n,width:r,height:i}},e.pathToRelative=Bt,e._engine={},e.path2curve=zt,e.matrix=function(e,t,n,r,i,s){return new tn(e,t,n,r,i,s)},function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=S.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,r,i,s){var o=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],a=[[e,n,i],[t,r,s],[0,0,1]],f,l,c,h;e&&e instanceof tn&&(a=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]);for(f=0;f<3;f++)for(l=0;l<3;l++){h=0;for(c=0;c<3;c++)h+=u[f][c]*a[c][l];o[f][l]=h}this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2]},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new tn(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new tn(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){this.add(1,0,0,1,e,t)},t.scale=function(e,t,n,r){t==null&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},t.rotate=function(t,n,r){t=e.rad(t),n=n||0,r=r||0;var i=+S.cos(t).toFixed(9),s=+S.sin(t).toFixed(9);this.add(i,s,-s,i,n,r),this.add(1,0,0,1,-n,-r)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[g.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=S.sqrt(n(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=S.sqrt(n(i[1])),r(i[1]),t.shear/=t.scaley;var s=-i[0][1],o=i[1][1];return o<0?(t.rotate=e.deg(S.acos(o)),s<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(S.asin(s)),t.isSimple=!+t.shear.toFixed(9)&&(t.scalex.toFixed(9)==t.scaley.toFixed(9)||!t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this[y]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:v)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:v)+(t.rotate?"r"+[t.rotate,0,0]:v)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(tn.prototype);var nn=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(nn&&nn[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&nn&&nn[1]<8?l.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:l.safari=it;var rn=function(){this.returnValue=!1},sn=function(){return this.originalEvent.preventDefault()},on=function(){this.cancelBubble=!0},un=function(){return this.originalEvent.stopPropagation()},an=function(){if(u.doc.addEventListener)return function(e,t,n,r){var i=d&&w[t]?w[t]:t,s=function(i){var s=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,a=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,f=i.clientX+a,l=i.clientY+s;if(d&&w[o](t))for(var c=0,h=i.targetTouches&&i.targetTouches.length;c<h;c++)if(i.targetTouches[c].target==e){var p=i;i=i.targetTouches[c],i.originalEvent=p,i.preventDefault=sn,i.stopPropagation=un;break}return n.call(r,i,f,l)};return e.addEventListener(i,s,!1),function(){return e.removeEventListener(i,s,!1),!0}};if(u.doc.attachEvent)return function(e,t,n,r){var i=function(e){e=e||u.win.event;var t=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,i=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,s=e.clientX+i,o=e.clientY+t;return e.preventDefault=e.preventDefault||rn,e.stopPropagation=e.stopPropagation||on,n.call(r,e,s,o)};e.attachEvent("on"+t,i);var s=function(){return e.detachEvent("on"+t,i),!0};return s}}(),fn=[],ln=function(e){var t=e.clientX,n=e.clientY,r=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,i=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,s,o=fn.length;while(o--){s=fn[o];if(d){var a=e.touches.length,f;while(a--){f=e.touches[a];if(f.identifier==s.el._drag.id){t=f.clientX,n=f.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else e.preventDefault();var l=s.el.node,c,h=l.nextSibling,p=l.parentNode,v=l.style.display;u.win.opera&&p.removeChild(l),l.style.display="none",c=s.el.paper.getElementByPoint(t,n),l.style.display=v,u.win.opera&&(h?p.insertBefore(l,h):p.appendChild(l)),c&&eve("raphael.drag.over."+s.el.id,s.el,c),t+=i,n+=r,eve("raphael.drag.move."+s.el.id,s.move_scope||s.el,t-s.el._drag.x,n-s.el._drag.y,t,n,e)}},cn=function(t){e.unmousemove(ln).unmouseup(cn);var n=fn.length,r;while(n--)r=fn[n],r.el._drag={},eve("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,t);fn=[]},hn=e.el={};for(var pn=b.length;pn--;)(function(t){e[t]=hn[t]=function(n,r){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:an(this.shape||this.node||u.doc,t,n,r||this)})),this},e["un"+t]=hn["un"+t]=function(e){var n=this.events||[],r=n.length;while(r--)if(n[r].name==t&&n[r].f==e)return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}})(b[pn]);hn.data=function(t,n){var r=tt[this.id]=tt[this.id]||{};if(arguments.length==1){if(e.is(t,"object")){for(var i in t)t[o](i)&&this.data(i,t[i]);return this}return eve("raphael.data.get."+this.id,this,r[t],t),r[t]}return r[t]=n,eve("raphael.data.set."+this.id,this,n,t),this},hn.removeData=function(e){return e==null?tt[this.id]={}:tt[this.id]&&delete tt[this.id][e],this},hn.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},hn.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var dn=[];hn.drag=function(t,n,r,i,s,o){function a(a){(a.originalEvent||a).preventDefault();var f=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,l=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft;this._drag.x=a.clientX+l,this._drag.y=a.clientY+f,this._drag.id=a.identifier,!fn.length&&e.mousemove(ln).mouseup(cn),fn.push({el:this,move_scope:i,start_scope:s,end_scope:o}),n&&eve.on("raphael.drag.start."+this.id,n),t&&eve.on("raphael.drag.move."+this.id,t),r&&eve.on("raphael.drag.end."+this.id,r),eve("raphael.drag.start."+this.id,s||i||this,a.clientX+l,a.clientY+f,a)}return this._drag={},dn.push({el:this,start:a}),this.mousedown(a),this},hn.onDragOver=function(e){e?eve.on("raphael.drag.over."+this.id,e):eve.unbind("raphael.drag.over."+this.id)},hn.undrag=function(){var t=dn.length;while(t--)dn[t].el==this&&(this.unmousedown(dn[t].start),dn.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!dn.length&&e.unmousemove(ln).unmouseup(cn)},l.circle=function(t,n,r){var i=e._engine.circle(this,t||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},l.rect=function(t,n,r,i,s){var o=e._engine.rect(this,t||0,n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(o),o},l.ellipse=function(t,n,r,i){var s=e._engine.ellipse(this,t||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},l.path=function(t){t&&!e.is(t,A)&&!e.is(t[0],O)&&(t+=v);var n=e._engine.path(e.format[h](e,arguments),this);return this.__set__&&this.__set__.push(n),n},l.image=function(t,n,r,i,s){var o=e._engine.image(this,t||"about:blank",n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(o),o},l.text=function(t,n,r){var i=e._engine.text(this,t||0,n||0,g(r));return this.__set__&&this.__set__.push(i),i},l.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var n=new Dn(t);return this.__set__&&this.__set__.push(n),n},l.setStart=function(e){this.__set__=e||this.set()},l.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},l.setSize=function(t,n){return e._engine.setSize.call(this,t,n)},l.setViewBox=function(t,n,r,i,s){return e._engine.setViewBox.call(this,t,n,r,i,s)},l.top=l.bottom=null,l.raphael=e;var vn=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,a=t.top+(u.win.pageYOffset||i.scrollTop||r.scrollTop)-s,f=t.left+(u.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o;return{y:a,x:f}};l.getElementByPoint=function(e,t){var n=this,r=n.canvas,i=u.doc.elementFromPoint(e,t);if(u.win.opera&&i.tagName=="svg"){var s=vn(r),o=r.createSVGRect();o.x=e-s.x,o.y=t-s.y,o.width=o.height=1;var a=r.getIntersectionList(o,null);a.length&&(i=a[a.length-1])}if(!i)return null;while(i.parentNode&&i!=r.parentNode&&!i.raphael)i=i.parentNode;return i==n.canvas.parentNode&&(i=r),i=i&&i.raphael?n.getById(i.raphaelid):null,i},l.getById=function(e){var t=this.bottom;while(t){if(t.id==e)return t;t=t.next}return null},l.forEach=function(e,t){var n=this.bottom;while(n){if(e.call(t,n)===!1)return this;n=n.next}return this},l.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(r){r.isPointInside(e,t)&&n.push(r)}),n},hn.isPointInside=function(t,n){var r=this.realPath=this.realPath||at[this.type](this);return e.isPointInsidePath(r,t,n)},hn.getBBox=function(e){if(this.removed)return{};var t=this._;if(e){if(t.dirty||!t.bboxwt)this.realPath=at[this.type](this),t.bboxwt=Pt(this.realPath),t.bboxwt.toString=gn,t.dirty=0;return t.bboxwt}if(t.dirty||t.dirtyT||!t.bbox){if(t.dirty||!this.realPath)t.bboxwt=0,this.realPath=at[this.type](this);t.bbox=Pt(ft(this.realPath,this.matrix)),t.bbox.toString=gn,t.dirty=t.dirtyT=0}return t.bbox},hn.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},hn.glow=function(e){if(this.type=="text")return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),s=this.realPath||at[this.type](this);s=this.matrix?ft(s,this.matrix):s;for(var o=1;o<n+1;o++)i.push(r.path(s).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*o).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var yn={},bn=function(t,n,r,i,s,o,u,a,f){return f==null?kt(t,n,r,i,s,o,u,a):e.findDotsAtSegment(t,n,r,i,s,o,u,a,Lt(t,n,r,i,s,o,u,a,f))},wn=function(t,n){return function(r,i,s){r=zt(r);var o,u,a,f,l="",c={},h,p=0;for(var d=0,v=r.length;d<v;d++){a=r[d];if(a[0]=="M")o=+a[1],u=+a[2];else{f=bn(o,u,a[1],a[2],a[3],a[4],a[5],a[6]);if(p+f>i){if(n&&!c.start){h=bn(o,u,a[1],a[2],a[3],a[4],a[5],a[6],i-p),l+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y];if(s)return l;c.start=l,l=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,a[5],a[6]].join(),p+=f,o=+a[5],u=+a[6];continue}if(!t&&!n)return h=bn(o,u,a[1],a[2],a[3],a[4],a[5],a[6],i-p),{x:h.x,y:h.y,alpha:h.alpha}}p+=f,o=+a[5],u=+a[6]}l+=a.shift()+a}return c.end=l,h=t?p:n?c:e.findDotsAtSegment(o,u,a[0],a[1],a[2],a[3],a[4],a[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},En=wn(1),Sn=wn(),xn=wn(0,1);e.getTotalLength=En,e.getPointAtLength=Sn,e.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return xn(e,t).end;var r=xn(e,n,1);return t?xn(r,t).end:r},hn.getTotalLength=function(){if(this.type!="path")return;return this.node.getTotalLength?this.node.getTotalLength():En(this.attrs.path)},hn.getPointAtLength=function(e){if(this.type!="path")return;return Sn(this.attrs.path,e)},hn.getSubpath=function(t,n){if(this.type!="path")return;return e.getSubpath(this.attrs.path,t,n)};var Tn=e.easing_formulas={linear:function(e){return e},"<":function(e){return C(e,1.7)},">":function(e){return C(e,.48)},"<>":function(e){var t=.48-e/1.04,n=S.sqrt(.1734+t*t),r=n-t,i=C(N(r),1/3)*(r<0?-1:1),s=-n-t,o=C(N(s),1/3)*(s<0?-1:1),u=i+o+.5;return(1-u)*3*u*u+u*u*u},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:C(2,-10*e)*S.sin((e-.075)*2*k/.3)+1},bounce:function(e){var t=7.5625,n=2.75,r;return e<1/n?r=t*e*e:e<2/n?(e-=1.5/n,r=t*e*e+.75):e<2.5/n?(e-=2.25/n,r=t*e*e+.9375):(e-=2.625/n,r=t*e*e+.984375),r}};Tn.easeIn=Tn["ease-in"]=Tn["<"],Tn.easeOut=Tn["ease-out"]=Tn[">"],Tn.easeInOut=Tn["ease-in-out"]=Tn["<>"],Tn["back-in"]=Tn.backIn,Tn["back-out"]=Tn.backOut;var Nn=[],Cn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},kn=function(){var t=+(new Date),n=0;for(;n<Nn.length;n++){var r=Nn[n];if(r.el.removed||r.paused)continue;var i=t-r.start,s=r.ms,u=r.easing,a=r.from,f=r.diff,l=r.to,c=r.t,h=r.el,d={},v,g={},y;r.initstatus?(i=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*s,r.status=r.initstatus,delete r.initstatus,r.stop&&Nn.splice(n--,1)):r.status=(r.prev+(r.percent-r.prev)*(i/s))/r.anim.top;if(i<0)continue;if(i<s){var b=u(i/s);for(var w in a)if(a[o](w)){switch(V[w]){case L:v=+a[w]+b*s*f[w];break;case"colour":v="rgb("+[Ln(q(a[w].r+b*s*f[w].r)),Ln(q(a[w].g+b*s*f[w].g)),Ln(q(a[w].b+b*s*f[w].b))].join(",")+")";break;case"path":v=[];for(var E=0,S=a[w].length;E<S;E++){v[E]=[a[w][E][0]];for(var x=1,T=a[w][E].length;x<T;x++)v[E][x]=+a[w][E][x]+b*s*f[w][E][x];v[E]=v[E].join(m)}v=v.join(m);break;case"transform":if(f[w].real){v=[];for(E=0,S=a[w].length;E<S;E++){v[E]=[a[w][E][0]];for(x=1,T=a[w][E].length;x<T;x++)v[E][x]=a[w][E][x]+b*s*f[w][E][x]}}else{var N=function(e){return+a[w][e]+b*s*f[w][e]};v=[["m",N(0),N(1),N(2),N(3),N(4),N(5)]]}break;case"csv":if(w=="clip-rect"){v=[],E=4;while(E--)v[E]=+a[w][E]+b*s*f[w][E]}break;default:var C=[][p](a[w]);v=[],E=h.paper.customAttributes[w].length;while(E--)v[E]=+C[E]+b*s*f[w][E]}d[w]=v}h.attr(d),function(e,t,n){setTimeout(function(){eve("raphael.anim.frame."+e,t,n)})}(h.id,h,r.anim)}else{(function(t,n,r){setTimeout(function(){eve("raphael.anim.frame."+n.id,n,r),eve("raphael.anim.finish."+n.id,n,r),e.is(t,"function")&&t.call(n)})})(r.callback,h,r.anim),h.attr(l),Nn.splice(n--,1);if(r.repeat>1&&!r.next){for(y in l)l[o](y)&&(g[y]=r.totalOrigin[y]);r.el.attr(g),Mn(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&Mn(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat)}}e.svg&&h&&h.paper&&h.paper.safari(),Nn.length&&Cn(kn)},Ln=function(e){return e>255?255:e<0?0:e};hn.animateWith=function(t,n,r,i,s,o){var u=this;if(u.removed)return o&&o.call(u),u;var a=r instanceof On?r:e.animation(r,i,s,o),f,l;Mn(a,u,a.percents[0],null,u.attr());for(var c=0,h=Nn.length;c<h;c++)if(Nn[c].anim==n&&Nn[c].el==t){Nn[h-1].start=Nn[c].start;break}return u},hn.onAnimation=function(e){return e?eve.on("raphael.anim.frame."+this.id,e):eve.unbind("raphael.anim.frame."+this.id),this},On.prototype.delay=function(e){var t=new On(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},On.prototype.repeat=function(e){var t=new On(this.anim,this.ms);return t.del=this.del,t.times=S.floor(x(e,0))||1,t},e.animation=function(t,n,r,i){if(t instanceof On)return t;if(e.is(r,"function")||!r)i=i||r||null,r=null;t=Object(t),n=+n||0;var s={},u,a;for(a in t)t[o](a)&&U(a)!=a&&U(a)+"%"!=a&&(u=!0,s[a]=t[a]);return u?(r&&(s.easing=r),i&&(s.callback=i),new On({100:s},n)):new On(t,n)},hn.animate=function(t,n,r,i){var s=this;if(s.removed)return i&&i.call(s),s;var o=t instanceof On?t:e.animation(t,n,r,i);return Mn(o,s,o.percents[0],null,s.attr()),s},hn.setTime=function(e,t){return e&&t!=null&&this.status(e,T(t,e.ms)/e.ms),this},hn.status=function(e,t){var n=[],r=0,i,s;if(t!=null)return Mn(e,this,-1,T(t,1)),this;i=Nn.length;for(;r<i;r++){s=Nn[r];if(s.el.id==this.id&&(!e||s.anim==e)){if(e)return s.status;n.push({anim:s.anim,status:s.status})}}return e?0:n},hn.pause=function(e){for(var t=0;t<Nn.length;t++)Nn[t].el.id==this.id&&(!e||Nn[t].anim==e)&&eve("raphael.anim.pause."+this.id,this,Nn[t].anim)!==!1&&(Nn[t].paused=!0);return this},hn.resume=function(e){for(var t=0;t<Nn.length;t++)if(Nn[t].el.id==this.id&&(!e||Nn[t].anim==e)){var n=Nn[t];eve("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},hn.stop=function(e){for(var t=0;t<Nn.length;t++)Nn[t].el.id==this.id&&(!e||Nn[t].anim==e)&&eve("raphael.anim.stop."+this.id,this,Nn[t].anim)!==!1&&Nn.splice(t--,1);return this},eve.on("raphael.remove",_n),eve.on("raphael.clear",_n),hn.toString=function(){return"Raphaël’s object"};var Dn=function(e){this.items=[],this.length=0,this.type="set";if(e)for(var t=0,n=e.length;t<n;t++)e[t]&&(e[t].constructor==hn.constructor||e[t].constructor==Dn)&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},Pn=Dn.prototype;Pn.push=function(){var e,t;for(var n=0,r=arguments.length;n<r;n++)e=arguments[n],e&&(e.constructor==hn.constructor||e.constructor==Dn)&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},Pn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Pn.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(e.call(t,this.items[n],n)===!1)return this;return this};for(var Hn in hn)hn[o](Hn)&&(Pn[Hn]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][h](n,t)})}}(Hn));Pn.attr=function(t,n){if(t&&e.is(t,O)&&e.is(t[0],"object"))for(var r=0,i=t.length;r<i;r++)this.items[r].attr(t[r]);else for(var s=0,o=this.items.length;s<o;s++)this.items[s].attr(t,n);return this},Pn.clear=function(){while(this.length)this.pop()},Pn.splice=function(e,t,n){e=e<0?x(this.length+e,0):e,t=x(0,T(this.length-e,t));var r=[],i=[],s=[],o;for(o=2;o<arguments.length;o++)s.push(arguments[o]);for(o=0;o<t;o++)i.push(this[e+o]);for(;o<this.length-e;o++)r.push(this[e+o]);var u=s.length;for(o=0;o<u+r.length;o++)this.items[e+o]=this[e+o]=o<u?s[o]:r[o-u];o=this.items.length=this.length-=t-u;while(this[o])delete this[o++];return new Dn(i)},Pn.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},Pn.animate=function(t,n,r,i){(e.is(r,"function")||!r)&&(i=r||null);var s=this.items.length,o=s,u,a=this,f;if(!s)return this;i&&(f=function(){!--s&&i.call(a)}),r=e.is(r,A)?r:f;var l=e.animation(t,n,r,f);u=this.items[--o].animate(l);while(o--)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(u,l,l);return this},Pn.insertAfter=function(e){var t=this.items.length;while(t--)this.items[t].insertAfter(e);return this},Pn.getBBox=function(){var e=[],t=[],n=[],r=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var s=this.items[i].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),r.push(s.y+s.height)}return e=T[h](0,e),t=T[h](0,t),n=x[h](0,n),r=x[h](0,r),{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t}},Pn.clone=function(e){e=new Dn;for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},Pn.toString=function(){return"Raphaël‘s set"},e.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[o](r)&&(t.face[r]=e.face[r]);this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t];if(!e.svg){t.face["units-per-em"]=z(e.face["units-per-em"],10);for(var i in e.glyphs)if(e.glyphs[o](i)){var s=e.glyphs[i];t.glyphs[i]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"};if(s.k)for(var u in s.k)s[o](u)&&(t.glyphs[i].k[u]=s.k[u])}}return e},l.getFont=function(t,n,r,i){i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400;if(!e.fonts)return;var s=e.fonts[t];if(!s){var u=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,v)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[o](a)&&u.test(a)){s=e.fonts[a];break}}var f;if(s)for(var l=0,c=s.length;l<c;l++){f=s[l];if(f.face["font-weight"]==n&&(f.face["font-style"]==r||!f.face["font-style"])&&f.face["font-stretch"]==i)break}return f},l.print=function(t,r,i,s,o,u,a){u=u||"middle",a=x(T(a||0,1),-1);var f=g(i)[y](v),l=0,c=0,h=v,p;e.is(s,i)&&(s=this.getFont(s));if(s){p=(o||16)/s.face["units-per-em"];var d=s.face.bbox[y](n),m=+d[0],b=d[3]-d[1],w=0,E=+d[1]+(u=="baseline"?b+ +s.face.descent:b/2);for(var S=0,N=f.length;S<N;S++){if(f[S]=="\n")l=0,k=0,c=0,w+=b;else{var C=c&&s.glyphs[f[S-1]]||{},k=s.glyphs[f[S]];l+=c?(C.w||s.w)+(C.k&&C.k[f[S]]||0)+s.w*a:0,c=1}k&&k.d&&(h+=e.transformPath(k.d,["t",l*p,w*p,"s",p,p,m,E,"t",(t-m)/p,(r-E)/p]))}}return this.path(h).attr({fill:"#000",stroke:"none"})},l.add=function(t){if(e.is(t,"array")){var n=this.set(),i=0,s=t.length,u;for(;i<s;i++)u=t[i]||{},r[o](u.type)&&n.push(this[u.type]().attr(u))}return n},e.format=function(t,n){var r=e.is(n,O)?[0][p](n):arguments;return t&&e.is(t,A)&&r.length-1&&(t=t.replace(i,function(e,t){return r[++t]==null?v:r[t]})),t||v},e.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,s){t=t||r,i&&(t in i&&(i=i[t]),typeof i=="function"&&s&&(i=i()))}),i=(i==null||i==r?e:i)+"",i};return function(t,r){return String(t).replace(e,function(e,t){return n(e,t,r)})}}(),e.ninja=function(){return a.was?u.win.Raphael=a.is:delete Raphael,e},e.st=Pn,function(t,n,r){function i(){/in/.test(t.readyState)?setTimeout(i,9):e.eve("raphael.DOMload")}t.readyState==null&&t.addEventListener&&(t.addEventListener(n,r=function(){t.removeEventListener(n,r,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),a.was?u.win.Raphael=e:Raphael=e,eve.on("raphael.DOMload",function(){t=!0})}(),window.Raphael.svg&&function(e){var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,s=Math,o=s.max,u=s.abs,a=s.pow,f=/[, ]+/,l=e.eve,c="",h=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},v={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,i){if(i){typeof r=="string"&&(r=m(r));for(var s in i)i[t](s)&&(s.substring(0,6)=="xlink:"?r.setAttributeNS(p,s.substring(6),n(i[s])):r.setAttribute(s,n(i[s])))}else r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},g=function(t,i){var f="linear",l=t.id+i,h=.5,p=.5,d=t.node,v=t.paper,g=d.style,y=e._g.doc.getElementById(l);if(!y){i=n(i).replace(e._radial_gradient,function(e,t,n){f="radial";if(t&&n){h=r(t),p=r(n);var i=(p>.5)*2-1;a(h-.5,2)+a(p-.5,2)>.25&&(p=s.sqrt(.25-a(h-.5,2))*i+.5)&&p!=.5&&(p=p.toFixed(5)-1e-5*i)}return c}),i=i.split(/\s*\-\s*/);if(f=="linear"){var b=i.shift();b=-r(b);if(isNaN(b))return null;var w=[0,0,s.cos(e.rad(b)),s.sin(e.rad(b))],E=1/(o(u(w[2]),u(w[3]))||1);w[2]*=E,w[3]*=E,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var S=e._parseDots(i);if(!S)return null;l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(v.defs.removeChild(t.gradient),delete t.gradient);if(!t.gradient){y=m(f+"Gradient",{id:l}),t.gradient=y,m(y,f=="radial"?{fx:h,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),v.defs.appendChild(y);for(var x=0,T=S.length;x<T;x++)y.appendChild(m("stop",{offset:S[x].offset?S[x].offset:x?"100%":"0%","stop-color":S[x].color||"#fff"}))}}return m(d,{fill:"url(#"+l+")",opacity:1,"fill-opacity":1}),g.fill=c,g.opacity=1,g.fillOpacity=1,1},y=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(r,i,s){if(r.type=="path"){var o=n(i).toLowerCase().split("-"),u=r.paper,a=s?"end":"start",f=r.node,l=r.attrs,h=l["stroke-width"],p=o.length,g="classic",y,b,w,E,S,x=3,T=3,N=5;while(p--)switch(o[p]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=o[p];break;case"wide":T=5;break;case"narrow":T=2;break;case"long":x=5;break;case"short":x=2}g=="open"?(x+=2,T+=2,N+=2,w=1,E=s?4:1,S={fill:"none",stroke:l.stroke}):(E=w=x/2,S={fill:l.stroke,stroke:"none"}),r._.arrows?s?(r._.arrows.endPath&&v[r._.arrows.endPath]--,r._.arrows.endMarker&&v[r._.arrows.endMarker]--):(r._.arrows.startPath&&v[r._.arrows.startPath]--,r._.arrows.startMarker&&v[r._.arrows.startMarker]--):r._.arrows={};if(g!="none"){var C="raphael-marker-"+g,k="raphael-marker-"+a+g+x+T;e._g.doc.getElementById(C)?v[C]++:(u.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:d[g],id:C})),v[C]=1);var L=e._g.doc.getElementById(k),A;L?(v[k]++,A=L.getElementsByTagName("use")[0]):(L=m(m("marker"),{id:k,markerHeight:T,markerWidth:x,orient:"auto",refX:E,refY:T/2}),A=m(m("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+x/2+" "+T/2+") ":c)+"scale("+x/N+","+T/N+")","stroke-width":(1/((x/N+T/N)/2)).toFixed(4)}),L.appendChild(A),u.defs.appendChild(L),v[k]=1),m(A,S);var O=w*(g!="diamond"&&g!="oval");s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-O*h):(y=O*h,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),S={},S["marker-"+a]="url(#"+k+")";if(b||y)S.d=Raphael.getSubpath(l.path,y,b);m(f,S),r._.arrows[a+"Path"]=C,r._.arrows[a+"Marker"]=k,r._.arrows[a+"dx"]=O,r._.arrows[a+"Type"]=g,r._.arrows[a+"String"]=i}else s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-y):(y=0,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),r._.arrows[a+"Path"]&&m(f,{d:Raphael.getSubpath(l.path,y,b)}),delete r._.arrows[a+"Path"],delete r._.arrows[a+"Marker"],delete r._.arrows[a+"dx"],delete r._.arrows[a+"Type"],delete r._.arrows[a+"String"];for(S in v)if(v[t](S)&&!v[S]){var M=e._g.doc.getElementById(S);M&&M.parentNode.removeChild(M)}}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},E=function(e,t,r){t=w[n(t).toLowerCase()];if(t){var i=e.attrs["stroke-width"]||"1",s={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],u=t.length;while(u--)o[u]=t[u]*i+(u%2?1:-1)*s;m(e.node,{"stroke-dasharray":o.join(",")})}},S=function(r,s){var a=r.node,l=r.attrs,h=a.style.visibility;a.style.visibility="hidden";for(var d in s)if(s[t](d)){if(!e._availableAttrs[t](d))continue;var v=s[d];l[d]=v;switch(d){case"blur":r.blur(v);break;case"href":case"title":case"target":var w=a.parentNode;if(w.tagName.toLowerCase()!="a"){var S=m("a");w.insertBefore(S,a),S.appendChild(a),w=S}d=="target"?w.setAttributeNS(p,"show",v=="blank"?"new":v):w.setAttributeNS(p,d,v);break;case"cursor":a.style.cursor=v;break;case"transform":r.transform(v);break;case"arrow-start":b(r,v);break;case"arrow-end":b(r,v,1);break;case"clip-rect":var x=n(v).split(f);if(x.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var N=m("clipPath"),C=m("rect");N.id=e.createUUID(),m(C,{x:x[0],y:x[1],width:x[2],height:x[3]}),N.appendChild(C),r.paper.defs.appendChild(N),m(a,{"clip-path":"url(#"+N.id+")"}),r.clip=C}if(!v){var k=a.getAttribute("clip-path");if(k){var L=e._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,c));L&&L.parentNode.removeChild(L),m(a,{"clip-path":c}),delete r.clip}}break;case"path":r.type=="path"&&(m(a,{d:v?l.path=e._pathToAbsolute(v):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1)));break;case"width":a.setAttribute(d,v),r._.dirty=1;if(!l.fx)break;d="x",v=l.x;case"x":l.fx&&(v=-l.x-(l.width||0));case"rx":if(d=="rx"&&r.type=="rect")break;case"cx":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"height":a.setAttribute(d,v),r._.dirty=1;if(!l.fy)break;d="y",v=l.y;case"y":l.fy&&(v=-l.y-(l.height||0));case"ry":if(d=="ry"&&r.type=="rect")break;case"cy":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"r":r.type=="rect"?m(a,{rx:v,ry:v}):a.setAttribute(d,v),r._.dirty=1;break;case"src":r.type=="image"&&a.setAttributeNS(p,"href",v);break;case"stroke-width":if(r._.sx!=1||r._.sy!=1)v/=o(u(r._.sx),u(r._.sy))||1;r.paper._vbSize&&(v*=r.paper._vbSize),a.setAttribute(d,v),l["stroke-dasharray"]&&E(r,l["stroke-dasharray"],s),r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"stroke-dasharray":E(r,v,s);break;case"fill":var A=n(v).match(e._ISURL);if(A){N=m("pattern");var O=m("image");N.id=e.createUUID(),m(N,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(O,{x:0,y:0,"xlink:href":A[1]}),N.appendChild(O),function(t){e._preload(A[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(O,{width:e,height:n}),r.paper.safari()})}(N),r.paper.defs.appendChild(N),m(a,{fill:"url(#"+N.id+")"}),r.pattern=N,r.pattern&&y(r);break}var M=e.getRGB(v);if(!M.error)delete s.gradient,delete l.gradient,!e.is(l.opacity,"undefined")&&e.is(s.opacity,"undefined")&&m(a,{opacity:l.opacity}),!e.is(l["fill-opacity"],"undefined")&&e.is(s["fill-opacity"],"undefined")&&m(a,{"fill-opacity":l["fill-opacity"]});else if((r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v)){if("opacity"in l||"fill-opacity"in l){var _=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(_){var D=_.getElementsByTagName("stop");m(D[D.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=v,l.fill="none";break}M[t]("opacity")&&m(a,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=e.getRGB(v),a.setAttribute(d,M.hex),d=="stroke"&&M[t]("opacity")&&m(a,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity}),d=="stroke"&&r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v);break;case"opacity":l.gradient&&!l[t]("stroke-opacity")&&m(a,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(l.gradient){_=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c)),_&&(D=_.getElementsByTagName("stop"),m(D[D.length-1],{"stop-opacity":v}));break};default:d=="font-size"&&(v=i(v,10)+"px");var P=d.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});a.style[P]=v,r._.dirty=1,a.setAttribute(d,v)}}T(r,s),a.style.visibility=h},x=1.2,T=function(r,s){if(r.type!="text"||!(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y")))return;var o=r.attrs,u=r.node,a=u.firstChild?i(e._g.doc.defaultView.getComputedStyle(u.firstChild,c).getPropertyValue("font-size"),10):10;if(s[t]("text")){o.text=s.text;while(u.firstChild)u.removeChild(u.firstChild);var f=n(s.text).split("\n"),l=[],h;for(var p=0,d=f.length;p<d;p++)h=m("tspan"),p&&m(h,{dy:a*x,x:o.x}),h.appendChild(e._g.doc.createTextNode(f[p])),u.appendChild(h),l[p]=h}else{l=u.getElementsByTagName("tspan");for(p=0,d=l.length;p<d;p++)p?m(l[p],{dy:a*x,x:o.x}):m(l[0],{dy:0})}m(u,{x:o.x,y:o.y}),r._.dirty=1;var v=r._getBBox(),g=o.y-(v.y+v.height/2);g&&e.is(g,"finite")&&m(l[0],{dy:g})},N=function(t,n){var r=0,i=0;this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},C=e.el;N.prototype=C,C.constructor=N,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new N(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},C.rotate=function(e,t,i){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},C.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3])),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this},C.translate=function(e,t){return this.removed?this:(e=n(e).split(f),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},C.transform=function(n){var r=this._;if(n==null)return r.transform;e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix});if(r.sx!=1||r.sy!=1){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},C.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},C.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},C.remove=function(){if(this.removed||!this.node.parentNode)return;var t=this.paper;t.__set__&&t.__set__.exclude(this),l.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),e._tear(this,t),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]=typeof this[n]=="function"?e._removedFactory(n):null;this.removed=!0},C._getBBox=function(){if(this.node.style.display=="none"){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(n){}finally{t=t||{}}return e&&this.hide(),t},C.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;var o=n.split(f),u={};for(var a=0,c=o.length;a<c;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return c-1?u:u[o[0]]}if(r==null&&e.is(n,"array")){u={};for(a=0,c=n.length;a<c;a++)u[n[a]]=this.attr(n[a]);return u}if(r!=null){var h={};h[n]=r}else n!=null&&e.is(n,"object")&&(h=n);for(var p in h)l("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var v in d)d[t](v)&&(h[v]=d[v])}return S(this,h),this},C.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&e._tofront(this,t),this},C.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;t.tagName.toLowerCase()=="a"?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper);var n=this.paper;return this},C.insertAfter=function(t){if(this.removed)return this;var n=t.node||t[t.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this},C.insertBefore=function(t){if(this.removed)return this;var n=t.node||t[0].node;return n.parentNode.insertBefore(this.node,n),e._insertbefore(this,t,this.paper),this},C.blur=function(t){var n=this;if(+t!==0){var r=m("filter"),i=m("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,m(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},e._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var s=new N(i,e);return s.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},s.type="circle",m(i,s.attrs),s},e._engine.rect=function(e,t,n,r,i,s){var o=m("rect");e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:t,y:n,width:r,height:i,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},u.type="rect",m(o,u.attrs),u},e._engine.ellipse=function(e,t,n,r,i){var s=m("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new N(s,e);return o.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},o.type="ellipse",m(s,o.attrs),o},e._engine.image=function(e,t,n,r,i,s){var o=m("image");m(o,{x:n,y:r,width:i,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:n,y:r,width:i,height:s,src:t},u.type="image",u},e._engine.text=function(t,n,r,i){var s=m("text");t.canvas&&t.canvas.appendChild(s);var o=new N(s,t);return o.attrs={x:n,y:r,"text-anchor":"middle",text:i,font:e._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",S(o,o.attrs),o},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container,r=t.x,i=t.y,s=t.width,o=t.height;if(!n)throw new Error("SVG container not found.");var u=m("svg"),a="overflow:hidden;",f;return r=r||0,i=i||0,s=s||512,o=o||342,m(u,{height:o,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),n==1?(u.style.cssText=a+"position:absolute;left:"+r+"px;top:"+i+"px",e._g.doc.body.appendChild(u),f=1):(u.style.cssText=a+"position:relative",n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u)),n=new e._Paper,n.width=s,n.height=o,n.canvas=u,n.clear(),n._left=n._top=0,f&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){l("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var s=o(n/this.width,r/this.height),u=this.top,a=i?"meet":"xMinYMin",f,c;e==null?(this._vbSize&&(s=1),delete this._vbSize,f="0 0 "+this.width+h+this.height):(this._vbSize=s,f=e+h+t+h+n+h+r),m(this.canvas,{viewBox:f,preserveAspectRatio:a});while(s&&u)c="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":c}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e=this.canvas,t=e.style,n;try{n=e.getScreenCTM()||e.createSVGMatrix()}catch(r){n=e.createSVGMatrix()}var i=-n.e%1,s=-n.f%1;if(i||s)i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),s&&(this._top=(this._top+s)%1,t.top=this._top+"px")},e.prototype.clear=function(){e.eve("raphael.clear",this);var t=this.canvas;while(t.firstChild)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){l("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null};var k=e.st;for(var L in C)C[t](L)&&!k[t](L)&&(k[L]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(L))}(window.Raphael),window.Raphael.vml&&function(e){var t="hasOwnProperty",n=String,r=parseFloat,i=Math,s=i.round,o=i.max,u=i.min,a=i.abs,f="fill",l=/[, ]+/,c=e.eve,h=" progid:DXImageTransform.Microsoft",p=" ",d="",v={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",w=21600,E={path:1,rect:1,image:1},S={circle:1,ellipse:1},x=function(t){var r=/[ahqstv]/ig,i=e._pathToAbsolute;n(t).match(r)&&(i=e._path2curve),r=/[clmz]/g;if(i==e._pathToAbsolute&&!n(t).match(r)){var o=n(t).replace(m,function(e,t,n){var r=[],i=t.toLowerCase()=="m",o=v[t];return n.replace(y,function(e){i&&r.length==2&&(o+=r+v[t=="m"?"l":"L"],r=[]),r.push(s(e*w))}),o+r});return o}var u=i(t),a,f;o=[];for(var l=0,c=u.length;l<c;l++){a=u[l],f=u[l][0].toLowerCase(),f=="z"&&(f="x");for(var h=1,g=a.length;h<g;h++)f+=s(a[h]*w)+(h!=g-1?",":d);o.push(f)}return o.join(p)},T=function(t,n,r){var i=e.matrix();return i.rotate(-t,.5,.5),{dx:i.x(n,r),dy:i.y(n,r)}},N=function(e,t,n,r,i,s){var o=e._,u=e.matrix,l=o.fillpos,c=e.node,h=c.style,d=1,v="",m,g=w/t,y=w/n;h.visibility="hidden";if(!t||!n)return;c.coordsize=a(g)+p+a(y),h.rotation=s*(t*n<0?-1:1);if(s){var b=T(s,r,i);r=b.dx,i=b.dy}t<0&&(v+="x"),n<0&&(v+=" y")&&(d=-1),h.flip=v,c.coordorigin=r*-g+p+i*-y;if(l||o.fillsize){var E=c.getElementsByTagName(f);E=E&&E[0],c.removeChild(E),l&&(b=T(s,u.x(l[0],l[1]),u.y(l[0],l[1])),E.position=b.dx*d+p+b.dy*d),o.fillsize&&(E.size=o.fillsize[0]*a(t)+p+o.fillsize[1]*a(n)),c.appendChild(E)}h.visibility="visible"};e.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var C=function(e,t,r){var i=n(t).toLowerCase().split("-"),s=r?"end":"start",o=i.length,u="classic",a="medium",f="medium";while(o--)switch(i[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":u=i[o];break;case"wide":case"narrow":f=i[o];break;case"long":case"short":a=i[o]}var l=e.node.getElementsByTagName("stroke")[0];l[s+"arrow"]=u,l[s+"arrowlength"]=a,l[s+"arrowwidth"]=f},k=function(i,a){i.attrs=i.attrs||{};var c=i.node,h=i.attrs,v=c.style,m,g=E[i.type]&&(a.x!=h.x||a.y!=h.y||a.width!=h.width||a.height!=h.height||a.cx!=h.cx||a.cy!=h.cy||a.rx!=h.rx||a.ry!=h.ry||a.r!=h.r),y=S[i.type]&&(h.cx!=a.cx||h.cy!=a.cy||h.r!=a.r||h.rx!=a.rx||h.ry!=a.ry),b=i;for(var T in a)a[t](T)&&(h[T]=a[T]);g&&(h.path=e._getPath[i.type](i),i._.dirty=1),a.href&&(c.href=a.href),a.title&&(c.title=a.title),a.target&&(c.target=a.target),a.cursor&&(v.cursor=a.cursor),"blur"in a&&i.blur(a.blur);if(a.path&&i.type=="path"||g)c.path=x(~n(h.path).toLowerCase().indexOf("r")?e._pathToAbsolute(h.path):h.path),i.type=="image"&&(i._.fillpos=[h.x,h.y],i._.fillsize=[h.width,h.height],N(i,1,1,0,0,0));"transform"in a&&i.transform(a.transform);if(y){var k=+h.cx,A=+h.cy,O=+h.rx||+h.r||0,_=+h.ry||+h.r||0;c.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((k-O)*w),s((A-_)*w),s((k+O)*w),s((A+_)*w),s(k*w))}if("clip-rect"in a){var D=n(a["clip-rect"]).split(l);if(D.length==4){D[2]=+D[2]+ +D[0],D[3]=+D[3]+ +D[1];var P=c.clipRect||e._g.doc.createElement("div"),H=P.style;H.clip=e.format("rect({1}px {2}px {3}px {0}px)",D),c.clipRect||(H.position="absolute",H.top=0,H.left=0,H.width=i.paper.width+"px",H.height=i.paper.height+"px",c.parentNode.insertBefore(P,c),P.appendChild(c),c.clipRect=P)}a["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(i.textpath){var B=i.textpath.style;a.font&&(B.font=a.font),a["font-family"]&&(B.fontFamily='"'+a["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,d)+'"'),a["font-size"]&&(B.fontSize=a["font-size"]),a["font-weight"]&&(B.fontWeight=a["font-weight"]),a["font-style"]&&(B.fontStyle=a["font-style"])}"arrow-start"in a&&C(b,a["arrow-start"]),"arrow-end"in a&&C(b,a["arrow-end"],1);if(a.opacity!=null||a["stroke-width"]!=null||a.fill!=null||a.src!=null||a.stroke!=null||a["stroke-width"]!=null||a["stroke-opacity"]!=null||a["fill-opacity"]!=null||a["stroke-dasharray"]!=null||a["stroke-miterlimit"]!=null||a["stroke-linejoin"]!=null||a["stroke-linecap"]!=null){var j=c.getElementsByTagName(f),F=!1;j=j&&j[0],!j&&(F=j=M(f)),i.type=="image"&&a.src&&(j.src=a.src),a.fill&&(j.on=!0);if(j.on==null||a.fill=="none"||a.fill===null)j.on=!1;if(j.on&&a.fill){var I=n(a.fill).match(e._ISURL);if(I){j.parentNode==c&&c.removeChild(j),j.rotate=!0,j.src=I[1],j.type="tile";var q=i.getBBox(1);j.position=q.x+p+q.y,i._.fillpos=[q.x,q.y],e._preload(I[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else j.color=e.getRGB(a.fill).hex,j.src=d,j.type="solid",e.getRGB(a.fill).error&&(b.type in{circle:1,ellipse:1}||n(a.fill).charAt()!="r")&&L(b,a.fill,j)&&(h.fill="none",h.gradient=a.fill,j.rotate=!1)}if("fill-opacity"in a||"opacity"in a){var U=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+e.getRGB(a.fill).o+1||2)-1);U=u(o(U,0),1),j.opacity=U,j.src&&(j.color="none")}c.appendChild(j);var z=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],W=!1;!z&&(W=z=M("stroke"));if(a.stroke&&a.stroke!="none"||a["stroke-width"]||a["stroke-opacity"]!=null||a["stroke-dasharray"]||a["stroke-miterlimit"]||a["stroke-linejoin"]||a["stroke-linecap"])z.on=!0;(a.stroke=="none"||a.stroke===null||z.on==null||a.stroke==0||a["stroke-width"]==0)&&(z.on=!1);var X=e.getRGB(a.stroke);z.on&&a.stroke&&(z.color=X.hex),U=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+X.o+1||2)-1);var V=(r(a["stroke-width"])||1)*.75;U=u(o(U,0),1),a["stroke-width"]==null&&(V=h["stroke-width"]),a["stroke-width"]&&(z.weight=V),V&&V<1&&(U*=V)&&(z.weight=1),z.opacity=U,a["stroke-linejoin"]&&(z.joinstyle=a["stroke-linejoin"]||"miter"),z.miterlimit=a["stroke-miterlimit"]||8,a["stroke-linecap"]&&(z.endcap=a["stroke-linecap"]=="butt"?"flat":a["stroke-linecap"]=="square"?"square":"round");if(a["stroke-dasharray"]){var $={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};z.dashstyle=$[t](a["stroke-dasharray"])?$[a["stroke-dasharray"]]:d}W&&c.appendChild(z)}if(b.type=="text"){b.paper.canvas.style.display=d;var J=b.paper.span,K=100,Q=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);v=J.style,h.font&&(v.font=h.font),h["font-family"]&&(v.fontFamily=h["font-family"]),h["font-weight"]&&(v.fontWeight=h["font-weight"]),h["font-style"]&&(v.fontStyle=h["font-style"]),Q=r(h["font-size"]||Q&&Q[0])||10,v.fontSize=Q*K+"px",b.textpath.string&&(J.innerHTML=n(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=J.getBoundingClientRect();b.W=h.w=(G.right-G.left)/K,b.H=h.h=(G.bottom-G.top)/K,b.X=h.x,b.Y=h.y+b.H/2,("x"in a||"y"in a)&&(b.path.v=e.format("m{0},{1}l{2},{1}",s(h.x*w),s(h.y*w),s(h.x*w)+1));var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var Z=0,et=Y.length;Z<et;Z++)if(Y[Z]in a){b._.dirty=1;break}switch(h["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},L=function(t,s,o){t.attrs=t.attrs||{};var u=t.attrs,a=Math.pow,f,l,c="linear",h=".5 .5";t.attrs.gradient=s,s=n(s).replace(e._radial_gradient,function(e,t,n){return c="radial",t&&n&&(t=r(t),n=r(n),a(t-.5,2)+a(n-.5,2)>.25&&(n=i.sqrt(.25-a(t-.5,2))*((n>.5)*2-1)+.5),h=t+p+n),d}),s=s.split(/\s*\-\s*/);if(c=="linear"){var v=s.shift();v=-r(v);if(isNaN(v))return null}var m=e._parseDots(s);if(!m)return null;t=t.shape||t.node;if(m.length){t.removeChild(o),o.on=!0,o.method="none",o.color=m[0].color,o.color2=m[m.length-1].color;var g=[];for(var y=0,b=m.length;y<b;y++)m[y].offset&&g.push(m[y].offset+p+m[y].color);o.colors=g.length?g.join():"0% "+o.color,c=="radial"?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=h,o.angle=0):(o.type="gradient",o.angle=(270-v)%360),t.appendChild(o)}return 1},A=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},O=e.el;A.prototype=O,O.constructor=A,O.transform=function(t){if(t==null)return this._.transform;var r=this.paper._viewBoxShift,i=r?"s"+[r.scale,r.scale]+",-1,-1t"+[r.dx,r.dy]:d,s;r&&(s=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||d)),!this.fvb&&i!=""&&(this.fvb=i);var o=i+t;this.fvb&&t==this.fvb&&(o=i),e._extractTransform(this,o);var u=this.matrix.clone(),a=this.skew,f=this.node,l,c=~n(this.attrs.fill).indexOf("-"),h=!n(this.attrs.fill).indexOf("url(");u.translate(-0.5,-0.5);if(h||c){a.matrix="1 0 0 1",a.offset="0 0",l=u.split();if(c&&l.noRotation||!l.isSimple){f.style.filter=u.toFilter();var v=this.getBBox(),m=this.getBBox(1),g=v.x-m.x,y=v.y-m.y;f.coordorigin=g*-w+p+y*-w,N(this,1,1,g,y,0)}else f.style.filter=d,N(this,l.scalex,l.scaley,l.dx,l.dy,l.rotate)}else f.style.filter=d,a.matrix=n(u),a.offset=u.offset();return s&&(this._.transform=s),this},O.rotate=function(e,t,i){if(this.removed)return this;if(e==null)return;e=n(e).split(l),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this},O.translate=function(e,t){return this.removed?this:(e=n(e).split(l),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},O.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(l),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3]),isNaN(i)&&(i=null),isNaN(s)&&(s=null)),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this._.dirtyT=1,this},O.hide=function(){return!this.removed&&(this.node.style.display="none"),this},O.show=function(){return!this.removed&&(this.node.style.display=d),this},O._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},O.remove=function(){if(this.removed||!this.node.parentNode)return;this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null;this.removed=!0},O.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n==f&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var o=n.split(l),u={};for(var a=0,h=o.length;a<h;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return h-1?u:u[o[0]]}if(this.attrs&&r==null&&e.is(n,"array")){u={};for(a=0,h=n.length;a<h;a++)u[n[a]]=this.attr(n[a]);return u}var p;r!=null&&(p={},p[n]=r),r==null&&e.is(n,"object")&&(p=n);for(var d in p)c("raphael.attr."+d+"."+this.id,this,p[d]);if(p){for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&p[t](d)&&e.is(this.paper.customAttributes[d],"function")){var v=this.paper.customAttributes[d].apply(this,[].concat(p[d]));this.attrs[d]=p[d];for(var m in v)v[t](m)&&(p[m]=v[m])}p.text&&this.type=="text"&&(this.textpath.string=p.text),k(this,p)}return this},O.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},O.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this)},O.insertAfter=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this)},O.insertBefore=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper),this)},O.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;r=r.replace(g,d),+t!==0?(this.attrs.blur=t,n.filter=r+p+h+".Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",s(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur)},e._engine.path=function(e,t){var n=M("shape");n.style.cssText=b,n.coordsize=w+p+w,n.coordorigin=t.coordorigin;var r=new A(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=d,k(r,i),t.canvas.appendChild(n);var s=M("skew");return s.on=!0,n.appendChild(s),r.skew=s,r.transform(d),r},e._engine.rect=function(t,n,r,i,s,o){var u=e._rectPath(n,r,i,s,o),a=t.path(u),f=a.attrs;return a.X=f.x=n,a.Y=f.y=r,a.W=f.width=i,a.H=f.height=s,f.r=o,f.path=u,a.type="rect",a},e._engine.ellipse=function(e,t,n,r,i){var s=e.path(),o=s.attrs;return s.X=t-r,s.Y=n-i,s.W=r*2,s.H=i*2,s.type="ellipse",k(s,{cx:t,cy:n,rx:r,ry:i}),s},e._engine.circle=function(e,t,n,r){var i=e.path(),s=i.attrs;return i.X=t-r,i.Y=n-r,i.W=i.H=r*2,i.type="circle",k(i,{cx:t,cy:n,r:r}),i},e._engine.image=function(t,n,r,i,s,o){var u=e._rectPath(r,i,s,o),a=t.path(u).attr({stroke:"none"}),l=a.attrs,c=a.node,h=c.getElementsByTagName(f)[0];return l.src=n,a.X=l.x=r,a.Y=l.y=i,a.W=l.width=s,a.H=l.height=o,l.path=u,a.type="image",h.parentNode==c&&c.removeChild(h),h.rotate=!0,h.src=n,h.type="tile",a._.fillpos=[r,i],a._.fillsize=[s,o],c.appendChild(h),N(a,1,1,0,0,0),a},e._engine.text=function(t,r,i,o){var u=M("shape"),a=M("path"),f=M("textpath");r=r||0,i=i||0,o=o||"",a.v=e.format("m{0},{1}l{2},{1}",s(r*w),s(i*w),s(r*w)+1),a.textpathok=!0,f.string=n(o),f.on=!0,u.style.cssText=b,u.coordsize=w+p+w,u.coordorigin="0 0";var l=new A(u,t),c={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:o};l.shape=u,l.path=a,l.textpath=f,l.type="text",l.attrs.text=n(o),l.attrs.x=r,l.attrs.y=i,l.attrs.w=1,l.attrs.h=1,k(l,c),u.appendChild(f),u.appendChild(a),t.canvas.appendChild(u);var h=M("skew");return h.on=!0,u.appendChild(h),l.skew=h,l.transform(d),l},e._engine.setSize=function(t,n){var r=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),r.width=t,r.height=n,r.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,r,i,s){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,r,i,s]);var u=this.width,a=this.height,f=1/o(r/u,i/a),l,c;return s&&(l=a/i,c=u/r,r*l<u&&(t-=(u-r*l)/2/l),i*c<a&&(n-=(a-i*c)/2/c)),this._viewBox=[t,n,r,i,!!s],this._viewBoxShift={dx:-t,dy:-n,scale:f},this.forEach(function(e){e.transform("...")}),this};var M;e._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),M=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){M=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,r=t.height,i,s=t.width,o=t.x,u=t.y;if(!n)throw new Error("VML container not found.");var a=new e._Paper,f=a.canvas=e._g.doc.createElement("div"),l=f.style;return o=o||0,u=u||0,s=s||512,r=r||342,a.width=s,a.height=r,s==+s&&(s+="px"),r==+r&&(r+="px"),a.coordsize=w*1e3+p+w*1e3,a.coordorigin="0 0",a.span=e._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",f.appendChild(a.span),l.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,r),n==1?(e._g.doc.body.appendChild(f),l.left=o+"px",l.top=u+"px",l.position="absolute"):n.firstChild?n.insertBefore(f,n.firstChild):n.appendChild(f),a.renderfix=function(){},a},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=d,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null;return!0};var _=e.st;for(var D in O)O[t](D)&&!_[t](D)&&(_[D]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(D))}(window.Raphael),function(){var e=function(){if(!(this instanceof e))return new e;this._callbacks={},this._fired={}};e.prototype.addListener=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(t),this},e.prototype.bind=e.prototype.addListener,e.prototype.on=e.prototype.addListener,e.prototype.await=e.prototype.addListener,e.prototype.removeListener=function(e,t){var n=this._callbacks,r,i;if(!e)this._callbacks={};else if(n)if(!t)n[e]=[];else{var s=n[e];if(!s)return this;i=s.length;for(r=0;r<i;r++)if(t===s[r]){s[r]=null;break}}return this},e.prototype.unbind=e.prototype.removeListener,e.prototype.removeAllListeners=function(e){return this.unbind(e)},e.prototype.trigger=function(e,t){var n,r,i,s,o,u,a,f=2;if(!(r=this._callbacks))return this;while(f--){i=f?e:"all",n=r[i];if(n)for(u=0,a=n.length;u<a;u++)(s=n[u])?(o=f?Array.prototype.slice.call(arguments,1):arguments,s.apply(this,o)):(n.splice(u,1),u--,a--)}return this},e.prototype.emit=e.prototype.trigger,e.prototype.fire=e.prototype.trigger,e.prototype.once=function(e,t){var n=this,r=function(){t.apply(n,arguments),n.unbind(e,r)};return this.bind(e,r),this},e.prototype.immediate=function(e,t,n){return this.bind(e,t),this.trigger(e,n),this};var t=function(e,t,n,r){var i=this,s,o=0,u=arguments.length,a,f,l,c,h,p=0,d={};if(u<3)return this;c=Array.prototype.slice.apply(arguments,[0,u-2]),l=arguments[u-2],h=arguments[u-1];if(typeof l!="function")return this;s=c.length,a=function(e){var t=h?"once":"bind";i[t](e,function(t){i._fired[e]=i._fired[e]||{},i._fired[e].data=t,d[e]||(d[e]=!0,p++)})};for(o=0;o<s;o++)a(c[o]);f=function(){if(p<s)return;var e=[];for(o=0;o<s;o++)e.push(i._fired[c[o]].data);h&&i.unbind("all",f),l.apply(null,e)},i.bind("all",f)};e.prototype.all=function(e,n,r){var i=Array.prototype.concat.apply([],arguments);return i.push(!0),t.apply(this,i),this},e.prototype.assign=e.prototype.all,e.prototype.tail=function(){var e=Array.prototype.concat.apply([],arguments);return e.push(!1),t.apply(this,e),this},e.prototype.assignAll=e.prototype.tail,e.prototype.assignAlways=e.prototype.tail,e.prototype.after=function(e,t,n){if(t===0)return n.call(null,[]),this;var r=this,i=[],s;return s=function(o,u){o===e&&(t--,i.push(u),t<1&&(r.unbind("all",s),n.apply(null,[i])))},r.bind("all",s),this},e.prototype.any=function(){var e=this,t,n,r=arguments.length,i=arguments[r-1],s=Array.prototype.slice.apply(arguments,[0,r-1]),o=s.length,u=s.join("_");e.once(u,i),n=function(t){e.bind(t,function(n){e.trigger(u,{data:n,eventName:t})})};for(t=0;t<o;t++)n(s[t])},e.prototype.not=function(e,t){var n=this;n.bind("all",function(n,r){n!==e&&t(r)})},e.create=function(){var t=new e;return arguments.length&&t.assign.apply(t,Array.prototype.slice.call(arguments)),t},typeof exports!="undefined"?exports.EventProxy=e:this.EventProxy=e}(),function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(s.expando)}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function vt(e,t){t.src?s.ajax({url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function Lt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?xt:Tt,o=0,u=i.length;if(r>0){if(n!=="border")for(;o<u;o++)n||(r-=parseFloat(s.css(e,"padding"+i[o]))||0),n==="margin"?r+=parseFloat(s.css(e,n+i[o]))||0:r-=parseFloat(s.css(e,"border"+i[o]+"Width"))||0;return r+"px"}r=Nt(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;o<u;o++)r+=parseFloat(s.css(e,"padding"+i[o]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+i[o]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+i[o]))||0);return r+"px"}function Gt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(Rt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Yt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Xt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Yt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Yt(e,n,r,i,"*",o)),c}function Zt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function en(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||Ot.test(e)?r(e,i):en(e+"["+(typeof i=="object"||s.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)en(e+"["+i+"]",t[i],n,r);else r(e,t)}function tn(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function nn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function fn(){try{return new e.XMLHttpRequest}catch(t){}}function ln(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function bn(){return setTimeout(wn,0),yn=s.now()}function wn(){yn=t}function En(e,t){var n={};return s.each(gn.concat.apply([],gn.slice(0,t)),function(){n[this]=e}),n}function Sn(e){if(!cn[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){hn||(hn=n.createElement("iframe"),hn.frameBorder=hn.width=hn.height=0),t.appendChild(hn);if(!pn||!hn.createElement)pn=(hn.contentWindow||hn.contentDocument).document,pn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),pn.close();r=pn.createElement(e),pn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(hn)}cn[e]=i}return cn[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)i.access(e,f,n[f],s,o,r);return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++)o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test(" ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?h(o):u==="function"&&(!e.unique||!d.has(o))&&n.push(o)},p=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,c=f||0,f=0,l=n.length;for(;n&&c<l;c++)if(n[c].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}a=!1,n&&(e.once?i===!0?d.disable():n=[]:r&&r.length&&(i=r.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(n){var e=n.length;h(arguments),a?l=n.length:i&&i!==!0&&(f=e,p(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){a&&s<=l&&(l--,s<=c&&c--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(a?e.once||r.push([t,n]):(!e.once||!i)&&p(t,n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v,m=n.createElement("div"),g=n.documentElement;m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=m.getElementsByTagName("*"),i=m.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=m.getElementsByTagName("input")[0],t={leadingWhitespace:m.firstChild.nodeType===3,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:m.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete m.test}catch(y){t.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){t.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),m.appendChild(a),l=n.createDocumentFragment(),l.appendChild(m.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,l.removeChild(a),l.appendChild(m),m.innerHTML="",e.getComputedStyle&&(f=n.createElement("div"),f.style.width="0",f.style.marginRight="0",m.style.width="2px",m.appendChild(f),t.reliableMarginRight=(parseInt((e.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);if(m.attachEvent)for(d in{submit:1,change:1,focusin:1})p="on"+d,v=p in m,v||(m.setAttribute(p,"return;"),v=typeof m[p]=="function"),t[d+"Bubbles"]=v;return l.removeChild(m),l=o=u=f=m=a=null,s(function(){var e,r,i,o,u,a,f,l,h,p,d,g=n.getElementsByTagName("body")[0];if(!g)return;f=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",h="visibility:hidden;border:0;",p="style='"+l+"border:5px solid #000;padding:0;'",d="<div "+p+"><div></div></div>"+"<table "+p+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=n.createElement("div"),e.style.cssText=h+"width:0;height:0;position:static;top:0;margin-top:"+f+"px",g.insertBefore(e,g.firstChild),m=n.createElement("div"),e.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=m.getElementsByTagName("td"),v=c[0].offsetHeight===0,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=v&&c[0].offsetHeight===0,m.innerHTML="",m.style.width=m.style.paddingLeft="1px",s.boxModel=t.boxModel=m.offsetWidth===2,typeof m.style.zoom!="undefined"&&(m.style.display="inline",m.style.zoom=1,t.inlineBlockNeedsLayout=m.offsetWidth===2,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=m.offsetWidth!==2),m.style.cssText=l+h,m.innerHTML=d,r=m.firstChild,i=r.firstChild,u=r.nextSibling.firstChild.firstChild,a={doesNotAddBorder:i.offsetTop!==5,doesAddBorderForTableAndCells:u.offsetTop===5},i.style.position="fixed",i.style.top="20px",a.fixedPosition=i.offsetTop===20||i.offsetTop===15,i.style.position=i.style.top="",r.style.overflow="hidden",r.style.position="relative",a.subtractsBorderForOverflowNotVisible=i.offsetTop===-5,a.doesNotIncludeMarginInBodyOffset=g.offsetTop!==f,g.removeChild(e),m=e=null,s.extend(t,a)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e=="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++)o=i[a].name,o.indexOf("data-")===0&&(o=s.camelCase(o.substring(5)),c(this[0],o,u[o]));s._data(this[0],"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(u=this.triggerHandler("getData"+r[1]+"!",[r[0]]),u===t&&this.length&&(u=s.data(this[0],e),u=c(this[0],e,u)),u===t&&r[1]?this.data(r[0]):u):this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),s.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?s.queue(this[0],e):this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise()}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,!0,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,e,t,!0,s.prop)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;u<o;u++)i=r[u],i&&(n=s.propFix[i]||i,s.attr(e,i,""),e.removeAttribute(E?i:n),w.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/\bhover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=[],f,l,c,h,p,d,v,m,g,y,b;o[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){h=s(this),h.context=this.ownerDocument||this;for(c=n.target;c!=this;c=c.parentNode||this){d={},m=[],h[0]=c;for(f=0;f<i;f++)g=r[f],y=g.selector,d[y]===t&&(d[y]=g.quick?D(c,g.quick):h.is(y)),d[y]&&m.push(g);m.length&&a.push({elem:c,matches:m})}}r.length>i&&a.push({elem:this,matches:r.slice(i)});for(f=0;f<a.length&&!n.isPropagationStopped();f++){v=a[f],n.currentTarget=v.elem;for(l=0;l<v.matches.length&&!n.isImmediatePropagationStopped();l++){g=v.matches[l];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace))n.data=g.data,n.handleObj=g,p=((s.event.special[g.origType]||{}).handle||g.handler).apply(v.elem,o),p!==t&&(n.result=p,p===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.POS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.isFunction(e)?this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):s.text(this)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(s.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else s.isFunction(e)?this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,vt)}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||!nt.test("<"+e.nodeName)?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o;t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!Z.test(l))l=t.createTextNode(l);else{l=l.replace(Q,"<$1></$2>");var c=(G.exec(l)||["",""])[1].toLowerCase(),h=ot[c]||ot._default,p=h[0],d=t.createElement("div");t===n?ut.appendChild(d):V(t).appendChild(d),d.innerHTML=h[1]+l+h[2];while(p--)d=d.lastChild;if(!s.support.tbody){var v=Y.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a)s.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!s.support.leadingWhitespace&&K.test(l)&&d.insertBefore(t.createTextNode(K.exec(l)[0]),d.firstChild),l=d.childNodes}var g;if(!s.support.appendChecked)if(l[0]&&typeof (g=l.length)=="number")for(a=0;a<g;a++)pt(l[a]);else pt(l);l.nodeType?u.push(l):u=s.merge(u,l)}if(r){o=function(e){return!e.type||it.test(e.type)};for(f=0;u[f];f++)if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript"))i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f]);else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var mt=/alpha\([^)]*\)/i,gt=/opacity=([^)]*)/,yt=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,wt=/^-?\d/,Et=/^([\-+])=([\-+.\de]+)/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Left","Right"],Tt=["Top","Bottom"],Nt,Ct,kt;s.fn.css=function(e,n){return arguments.length===2&&n===t?this:s.access(this,e,n,!0,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Nt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=Et.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Nt)return Nt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),s.curCSS=s.css,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?Lt(e,t,r):(s.swap(e,St,function(){i=Lt(e,t,r)}),i)},set:function(e,t){if(!bt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(mt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=mt.test(o)?o.replace(mt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){var n;return s.swap(e,{display:"inline-block"},function(){t?n=Nt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),n.defaultView&&n.defaultView.getComputedStyle&&(Ct=function(e,t){var n,r,i;return t=t.replace(yt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),n}),n.documentElement.currentStyle&&(kt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!bt.test(s)&&wt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Nt=Ct||kt,s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)});var At=/%20/g,Ot=/\[\]$/,Mt=/\r?\n/g,_t=/#.*$/,Dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Pt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ht=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ft=/\?/,It=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,qt=/^(?:select|textarea)/i,Rt=/\s+/,Ut=/([?&])_=[^&]*/,zt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Wt=s.fn.load,Xt={},Vt={},$t,Jt,Kt=["*/"]+["*"];try{$t=i.href}catch(Qt){$t=n.createElement("a"),$t.href="",$t=$t.href}Jt=zt.exec($t.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&Wt)return Wt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(It,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||qt.test(this.nodeName)||Pt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Zt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Zt(e,t),e},ajaxSettings:{url:$t,isLocal:Ht.test(Jt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Kt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Gt(Xt),ajaxTransport:Gt(Vt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?tn(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=nn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=Dt.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(_t,"").replace(jt,Jt[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(Rt),r.crossDomain==null&&(g=zt.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==Jt[1]&&g[2]==Jt[2]&&(g[3]||(g[1]==="http:"?80:443))==(Jt[3]||(Jt[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Yt(Xt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Bt.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(Ft.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Ut,"$1_="+x);r.url=T+(T===r.url?(Ft.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Kt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Yt(Vt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)en(o,e[o],n,i);return r.join("&").replace(At,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var rn=s.now(),sn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+rn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(sn.test(t.url)||i&&sn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(sn,c),t.url===f&&(i&&(l=l.replace(sn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var on=e.ActiveXObject?function(){for(var e in an)an[e](0,1)}:!1,un=0,an;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&fn()||ln()}:fn,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,on&&delete an[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p),h.text=u.responseText;try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++un,on&&(an||(an={},s(e).unload(on)),an[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var cn={},hn,pn,dn=/^(?:toggle|show|hide)$/,vn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,mn,gn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],yn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(En("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),i===""&&s.css(r,"display")==="none"&&s._data(r,"olddisplay",Sn(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(En("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(En("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]),u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||Sn(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],dn.test(u)?(d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),d?(s._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=vn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(s.cssNumber[a]?"":"px"),p!=="px"&&(s.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,s.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:En("show",1),slideUp:En("hide",1),slideToggle:En("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=yn||bn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t&&s._data(i.elem,"fxshow"+i.prop,i.start)},u()&&s.timers.push(u)&&!mn&&(mn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=yn||bn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(mn),mn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?s.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=i.body,a=Nn(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:s.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===r&&(c+=t.offsetTop,h+=t.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return s.support.fixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;return n===t?(i=this[0],i?(o=Nn(i),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]):null):this.each(function(){o=Nn(this),o?o.scrollTo(e?s(o).scrollLeft():n,e?n:s(o).scrollTop()):this[r]=n})}}),s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null},s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null},s.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(s.isFunction(e))return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))});if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})}(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=r.unshift,l=i.toString,c=i.hasOwnProperty,h=r.forEach,p=r.map,d=r.reduce,v=r.reduceRight,m=r.filter,g=r.every,y=r.some,b=r.indexOf,w=r.lastIndexOf,E=Array.isArray,S=Object.keys,x=s.bind,T=function(e){if(e instanceof T)return e;if(!(this instanceof T))return new T(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=T),exports._=T):e._=T,T.VERSION="1.4.2";var N=T.each=T.forEach=function(e,t,r){if(e==null)return;if(h&&e.forEach===h)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(T.has(e,o)&&t.call(r,e[o],o,e)===n)return};T.map=T.collect=function(e,t,n){var r=[];return e==null?r:p&&e.map===p?e.map(t,n):(N(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);N(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduceRight===v)return r&&(t=T.bind(t,r)),arguments.length>2?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=T.keys(e);s=o.length}N(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.find=T.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},T.filter=T.select=function(e,t,n){var r=[];return e==null?r:m&&e.filter===m?e.filter(t,n):(N(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){var r=[];return e==null?r:(N(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},T.every=T.all=function(e,t,r){t||(t=T.identity);var i=!0;return e==null?i:g&&e.every===g?e.every(t,r):(N(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=T.some=T.any=function(e,t,r){t||(t=T.identity);var i=!1;return e==null?i:y&&e.some===y?e.some(t,r):(N(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};T.contains=T.include=function(e,t){var n=!1;return e==null?n:b&&e.indexOf===b?e.indexOf(t)!=-1:(n=C(e,function(e){return e===t}),n)},T.invoke=function(e,t){var n=u.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.where=function(e,t){return T.isEmpty(t)?[]:T.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-Infinity;var r={computed:-Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return Infinity;var r={computed:Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},T.shuffle=function(e){var t,n=0,r=[];return N(e,function(e){t=T.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return T.isFunction(e)?e:function(t){return t[e]}};T.sortBy=function(e,t,n){var r=k(t);return T.pluck(T.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t);return N(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};T.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(T.has(e,t)?e[t]:e[t]=[]).push(n)})},T.countBy=function(e,t,n){return L(e,t,n,function(e,t,n){T.has(e,t)||(e[t]=0),e[t]++})},T.sortedIndex=function(e,t,n,r){n=n==null?T.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},T.toArray=function(e){return e?e.length===+e.length?u.call(e):T.values(e):[]},T.size=function(e){return e==null?0:e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},T.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},T.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},T.rest=T.tail=T.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},T.compact=function(e){return T.filter(e,function(e){return!!e})};var A=function(e,t,n){return N(e,function(e){T.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};T.flatten=function(e,t){return A(e,t,[])},T.without=function(e){return T.difference(e,u.call(arguments,1))},T.uniq=T.unique=function(e,t,n,r){var i=n?T.map(e,n,r):e,s=[],o=[];return N(i,function(n,r){if(t?!r||o[o.length-1]!==n:!T.contains(o,n))o.push(n),s.push(e[r])}),s},T.union=function(){return T.uniq(a.apply(r,arguments))},T.intersection=function(e){var t=u.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=a.apply(r,u.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){var e=u.call(arguments),t=T.max(T.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=T.pluck(e,""+r);return n},T.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},T.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=T.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},T.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};T.bind=function(t,n){var r,i;if(t.bind===x&&x)return x.apply(t,u.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return i=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=t.prototype;var e=new O,s=t.apply(e,i.concat(u.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(u.call(arguments)))}},T.bindAll=function(e){var t=u.call(arguments,1);return t.length==0&&(t=T.functions(e)),N(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(u.call(arguments,1)))},T.throttle=function(e,t){var n,r,i,s,o,u,a=T.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&(u=e.apply(n,r)),a()};return i||(i=setTimeout(f,t)),s?o=!0:(s=!0,u=e.apply(n,r)),a(),u}},T.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},T.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},T.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},T.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push(e[n]);return t},T.pairs=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push([n,e[n]]);return t},T.invert=function(e){var t={};for(var n in e)T.has(e,n)&&(t[e[n]]=n);return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return N(u.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return N(n,function(n){n in e&&(t[n]=e[n])}),t},T.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)T.contains(n,i)||(t[i]=e[i]);return t},T.defaults=function(e){return N(u.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var i=l.call(e);if(i!=l.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=M(e[o],t[o],n,r)))break}else{var a=e.constructor,f=t.constructor;if(a!==f&&!(T.isFunction(a)&&a instanceof a&&T.isFunction(f)&&f instanceof f))return!1;for(var c in e)if(T.has(e,c)){o++;if(!(u=T.has(t,c)&&M(e[c],t[c],n,r)))break}if(u){for(c in t)if(T.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};T.isEqual=function(e,t){return M(e,t,[],[])},T.isEmpty=function(e){if(e==null)return!0;if(T.isArray(e)||T.isString(e))return e.length===0;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!!e&&e.nodeType===1},T.isArray=E||function(e){return l.call(e)=="[object Array]"},T.isObject=function(e){return e===Object(e)},N(["Arguments","Function","String","Number","Date","RegExp"],function(e){T["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!!e&&!!T.has(e,"callee")}),typeof /./!="function"&&(T.isFunction=function(e){return typeof e=="function"}),T.isFinite=function(e){return T.isNumber(e)&&isFinite(e)},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return e===!0||e===!1||l.call(e)=="[object Boolean]"},T.isNull=function(e){return e===null},T.isUndefined=function(e){return e===void 0},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=t,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},T.random=function(e,t){return t==null&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=T.invert(_.escape);var D={escape:new RegExp("["+T.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(_.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(e){T[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),T.result=function(e,t){if(e==null)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){N(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(T,e))}})};var P=0;T.uniqueId=function(e){var t=P++;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(e,t,n){n=T.defaults({},n,T.templateSettings);var r=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),s+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?"'+\n((__t=("+r+"))==null?'':__t)+\n'":o?"';\n"+o+"\n__p+='":"",i=u+t.length}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,T);var a=function(e){return o.call(this,e,T)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},T.chain=function(e){return T(e).chain()};var F=function(e){return this._chain?T(e).chain():e};T.mixin(T),N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),N(["concat","join","slice"],function(e){var t=r[e];T.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("DataV",function(e){var t=function(){};t.version="0.0.1",t.Themes={},t.Themes.get=function(e){var n=t.Themes.current||"default";return t.Themes._currentTheme||(t.Themes._currentTheme=t.Themes[n]),t.Themes._currentTheme[e]},t.Themes.add=function(){var e=[].slice.call(arguments,0);theme=e.pop();if(arguments.length<2)throw new Error("Arguments format error. should be: (themsName, theme)");if(typeof theme!="object")throw new Error("second argument theme should be a json object");if(!theme.COLOR_ARGS)throw new Error("theme.COLOR_ARGS needed");if(!theme.COLOR_ARGS instanceof Array)throw new Error("theme.COLOR_ARGS should be an array");if(!(theme.COLOR_ARGS[0]instanceof Array))throw new Error("theme.COLOR_ARGS[0] should be an array");for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t.Themes.hasOwnProperty(i))throw new Error("The "+i+" has been defined");t.Themes[i]=theme}},t.Themes.add("default","theme0",{COLOR_ARGS:[["#3dc6f4","#8ce3ff"],["#214fd9","#7396ff"],["#4f21d9","#9673ff"],["#c43df2","#e38cff"],["#d8214f","#ff7396"],["#f3c53c","#ffe38c"]]}),t.Themes.add("theme1",{COLOR_ARGS:[["#e72e8b","#ff7fbf"],["#d94f21","#ff9673"],["#f3c53c","#ffe38c"],["#8be62f","#bfff7f"],["#14cc14","#66ff66"],["#2fe68a","#7fffc0"]]}),t.Themes.add("theme2",{COLOR_ARGS:[["#2f8ae7","#7fc0ff"],["#8a2ee7","#bf7fff"],["#f33dc6","#ff8ce3"],["#8be62f","#bfff7f"],["#14cc14","#66ff66"],["#2fe68a","#7fffc0"]]}),t.Themes.add("theme3",{COLOR_ARGS:[["#2f8ae7","#896DA3"],["#8e34df","#FFADA6"],["#f738c0","#65FCFC"],["#84e653","#555566"],["#0cc53e","#db3f7c"],["#00e793s","#db3f7c"]]}),t.Themes.add("theme4",{COLOR_ARGS:[["#d94f21","#7a88d1"],["#579ce2","#87bdf4"],["#3bb4df","#7fd1ef"],["#a380ff","#baa0ff"],["#a164c5","#c28fe1"],["#d93a92","#ec74b6"],["#b82377","#d569a7"],["#bb3ca3","#d381c2"],["#da2d57","#ec6b8a"],["#4ca716","#4ca716"],["#5b63c2","#8e93d7"],["#15a9a3","#4ecac5"],["#a9ab48","#e8c670"],["#2aa5f5","#73c4fa"],["#f67e10","#feb648"],["#1faa77","#62c8a2"],["#eb4f20","#f58563"],["#ffc000","#ffd659"],["#f16ebc","#f6a1d3"],["#d23457","#e27b92"]]}),t.changeTheme=function(e){var n=t.Themes[e];return n&&(t.Themes.current=e,t.Themes._currentTheme=null),!!n},t.getColor=function(){var e=t.Themes,n=e.get("COLOR_ARGS");return n},t.getDiscreteColor=function(){var e=t.getColor();if(!_.isArray(e))throw new Error("The color should be Array");var n=e.length,r=[];if(_.isArray(e[0]))for(var i=0;i<colorLineCount;i++)getColor.push(e[i][0]);else r=e;return function(e){var t=r,i=n;return t[e%thisolorCount]}},t.gradientColor=function(e,t){if(!_.isArray(e))throw new Error("The color should be Array");var n=e[0],r,i=e.length,s;return i===1?(s=Raphael.color(e[0]),endColor=Raphael.hsb(s.h/360,(s.s-30)/100,1)):endColor=e[i-1],t=t||"normal ",t==="special"?function(e){var t=Raphael.color(n),r=Raphael.color(endColor),s=t.h*360,o=r.h*360,u=t.h*20,a=r.h*20,f,l;u>=a?(f=360-s+o,l=i-u+a):(f=o-s,l=a-u);var c=(s+f*e)/360,h=(70+Math.abs(4-(u+l*e)%8)*5)/100,p=(100-Math.abs(4-(u+l*e)%8)*5)/100;return Raphael.hsb(c,h,p)}:d3.interpolateRgb.apply(null,[n,endColor])},t.json=function(e,t){d3.json(e,t)},t.csv=function(e,t){d3.text(e,"text/csv",function(e){t(e&&d3.csv.parseRows(e))})},t.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},t.extend=function(e,t){typeof e!="function"&&(t=e,e=function(){}),t=t||{};var n=function(){e.apply(this,arguments),this.constructor===e&&this.initialize&&this.initialize.apply(this,arguments)};return n.prototype=new e,n.prototype.constructor=e,$.extend(n.prototype,t),n};var n=t.extend(EventProxy,{type:"Chart",initialize:function(e,t){this.defaults={},this.plugins={}}});return n.prototype.getType=function(){return this.type},n.prototype.checkContainer=function(e){var t=null;typeof e=="string"?t=document.getElementById(e):e.nodeName?t=e:e instanceof jQuery&&e.size()>0&&(t=e[0]);if(!t)throw new Error("Please specify which node to render.");return t},n.prototype.setOptions=function(e){return _.extend(this.defaults,e)},n.prototype.plug=function(e,t){return this[e]=t,this.plugins[e]=t,this},n.prototype.unplug=function(e){return this.plugins.hasOwnProperty(e)&&(delete this.plugins[e],delete this[e]),this},t.Chart=n,t.FloatTag=function(){function n(t){var n=t,r=$("<div/>").css({border:"1px solid","border-color":$.browser.msie?"rgb(0, 0, 0)":"rgba(0, 0, 0, 0.8)","background-color":$.browser.msie?"rgb(0, 0, 0)":"rgba(0, 0, 0, 0.75)",color:"white","border-radius":"2px",padding:"12px 8px","font-size":"12px","box-shadow":"3px 3px 6px 0px rgba(0,0,0,0.58)","font-familiy":"宋体","z-index":1e4,"text-align":"center",visibility:"hidden",position:"absolute"});return $(n).append(r).mousemove({jqNode:r,container:n},e),r}var e=function(e){var n=e.data.jqNode,r=e.data.container,i={x:20,y:20},s=$(r).offset();if(!e.pageX||!e.pageY)return!1;var o=e.pageX-s.left,u=e.pageY-s.top,a=$(r).position();t.call(this),floatTagWidth=n.outerWidth(),floatTagHeight=n.outerHeight(),floatTagWidth+o+2*i.x<=$(r).width()?o+=i.x:o=o-floatTagWidth-i.x,u>=floatTagHeight+i.y?u=u-i.y-floatTagHeight:u+=i.y,n.css("left",o+"px"),n.css("top",u+"px")},t=function(){};return n.setContent=function(e){if(arguments.length===0)return t;t=e},n},t.sum=function(e,t){var n=0,r,i;if(typeof t=="undefined")for(r=0,i=e.length;r<i;r++)n+=e[r];else if(typeof t=="function")for(r=0,i=e.length;r<i;r++)n+=t(e[r]);else{if(typeof t!="string"&&typeof t!="number")throw new Error("iterator error");for(r=0,i=e.length;r<i;r++)n+=t(e[r][t])}return n},t}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Axis",function(e){function t(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function n(e){return e.rangeExtent?e.rangeExtent():t(e.range())}function r(e,n,r){var i=[];if(r&&n.length>1){var s=t(e.domain()),o=-1,u=n.length,a=(n[1]-n[0])/++r,f,l;while(++o<u)for(f=r;--f>0;)(l=+n[o]-f*a)>=s[0]&&i.push(l);for(--o,f=0;++f<r&&(l=+n[o]+f*a)<s[1];)i.push(l)}return i}var i=function(){function v(v){var m=e.ticks?e.ticks.apply(e,a):e.domain(),g=f===undefined?e.tickFormat?e.tickFormat.apply(e,a):String:f,y=r(e,m,l),b=n(e),w=v.set();switch(t){case"bottom":y.forEach(function(t,n,r){var i=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+i+","+s+"V0").attr(p))}),m.forEach(function(t,n,r){var s=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+s+","+i+"V0").attr(c)),w.push(v.text(s,Math.max(i,0)+u+2,typeof g=="function"?g(t):g).attr({"text-anchor":"middle"}).attr(h))}),w.push(v.path("M"+b[0]+","+o+"V0H"+b[1]+"V"+o).attr(d));break;case"top":y.forEach(function(t,n,r){var i=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+i+","+ -s+"V0").attr(p))}),m.forEach(function(t,n,r){var s=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+s+","+ -i+"V0").attr(c)),w.push(v.text(s,-(Math.max(i,0)+u+2),typeof g=="function"?g(t):g).attr({"text-anchor":"middle"}).attr(h))}),w.push(v.path("M"+b[0]+","+ -o+"V0H"+b[1]+"V"+ -o).attr(d));break;case"left":y.forEach(function(t,n,r){var i=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+ -s+","+i+"H0").attr(p))}),m.forEach(function(t,n,r){var s=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+ -i+","+s+"H0").attr(c)),w.push(v.text(-(Math.max(i,0)+u),s,typeof g=="function"?g(t):g).attr({"text-anchor":"end"}).attr(h))}),w.push(v.path("M"+ -o+","+b[0]+"H0V"+b[1]+"H"+ -o).attr(d));break;case"right":y.forEach(function(t,n,r){var i=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+s+","+i+"H0").attr(p))}),m.forEach(function(t,n,r){var s=e.ticks?e(t):e(t)+e.rangeBand()/2;w.push(v.path("M"+i+","+s+"H0").attr(c)),w.push(v.text(Math.max(i,0)+u,s,typeof g=="function"?g(t):g).attr({"text-anchor":"start"}).attr(h))}),w.push(v.path("M"+o+","+b[0]+"H0V"+b[1]+"H"+o).attr(d))}return w}var e=d3.scale.linear(),t="bottom",i=6,s=6,o=6,u=3,a=[10],f,l=0,c={},h={},p={},d={};return v.scale=function(t){return arguments.length?(e=t,v):e},v.orient=function(e){return arguments.length?(t=e,v):t},v.ticks=function(){return arguments.length?(a=arguments,v):a},v.tickFormat=function(e){return arguments.length?(f=e,v):f},v.tickSize=function(e,t,n){if(!arguments.length)return i;var r=arguments.length-1;return i=+e,s=r>1?+t:i,o=r>0?+arguments[r]:i,v},v.tickPadding=function(e){return arguments.length?(u=+e,v):u},v.tickSubdivide=function(e){return arguments.length?(l=+e,v):l},v.tickAttr=function(e){return arguments.length?(c=e,v):c},v.tickTextAttr=function(e){return arguments.length?(h=e,v):h},v.minorTickAttr=function(e){return arguments.length?(p=e,v):p},v.domainAttr=function(e){return arguments.length?(d=e,v):d},v};return i}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Brush",function(e){function h(e,t){e.fg.attr({x:t[0][0],width:t[1][0]-t[0][0]}),e.resizerSet.forEach(function(e){var n=e.data("resizeOrient");n==="n"||n==="s"||n==="w"||n==="nw"||n==="sw"?e.attr({x:t[0][0]-2}):e.attr({x:t[1][0]-2}),(n==="n"||n==="s")&&e.attr({width:t[1][0]-t[0][0]})})}function p(e,t){e.fg.attr({y:t[0][1],height:t[1][1]-t[0][1]}),e.resizerSet.forEach(function(e){var n=e.data("resizeOrient");n==="n"||n==="e"||n==="w"||n==="nw"||n==="ne"?e.attr({y:t[0][1]-3}):e.attr({y:t[1][1]-4}),(n==="e"||n==="w")&&e.attr({height:t[1][1]-t[0][1]})})}function d(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function v(e){return e.rangeExtent?e.rangeExtent():d(e.range())}function m(e,t,n){var r=v(t),i=r[0],s=r[1],a=l[n],c=o[1][n]-o[0][n],h,p;u&&(i-=a,s-=c+a),h=Math.max(i,Math.min(s,e[n])),u?p=(h+=a)+c:(f&&(a=Math.max(i,Math.min(s,2*f[n]-h))),a<h?(p=h,h=a):p=a),o[0][n]=h,o[1][n]=p}function g(e){if(l){var t=$(r).offset(),a=[e.pageX-t.left,e.pageY-t.top];u||(e.altKey?(f||(f=[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]),l[0]=o[+(a[0]<f[0])][0],l[1]=o[+(a[1]<f[1])][1]):f=null),i&&(m(a,i,0),h(c,o)),s&&(m(a,s,1),p(c,o)),n("brush")}}function y(e){e.keyCode===32&&r&&!u&&(f=null,l[0]-=o[1][0],l[1]-=o[1][1],u=2,e.stopPropagation())}function b(e){e.keyCode===32&&u===2&&(l[0]+=o[1][0],l[1]+=o[1][1],u=0,e.stopPropagation())}function w(e){l&&(g(e),c.resizerSet.forEach(function(e){var n=e.data("resizeOrient"),r=t.empty()?0:6;n==="n"||n==="s"?e.attr({height:r}):e.attr({width:r})}),n("brushend"),t=n=r=i=s=o=u=a=f=l=c=null,e.stopPropagation())}var t,n,r,i,s,o,u,a,f,l,c,E={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},S={n:"row-resize",e:"col-resize",s:"row-resize",w:"col-resize",nw:"all-scroll",ne:"all-scroll",se:"all-scroll",sw:"all-scroll"},x=function(){function B(e){var h=e.target,p;t=j,r=$(P.paper.canvas).parent(),o=x,p=$(r).offset(),l=[e.pageX-p.left,e.pageY-p.top],c=P,u=h.__brushNodeType__==="fg"?!0:!1,u?(l[0]=x[0][0]-l[0],l[1]=x[0][1]-l[1]):/^resize/.test(h.__brushNodeType__)?(a=h.__brushNodeType__.split("_")[1],l[0]=x[+/w$/.test(a)][0],l[1]=x[+/^n/.test(a)][1]):e.altKey&&(f=l.slice()),i=!/^(n|s)$/.test(a)&&d,s=!/^(e|w)$/.test(a)&&m,n=F(this,arguments),n("brushstart"),g(e),e.stopPropagation()}function j(e){var t=d&&m?["n","e","s","w","nw","ne","se","sw"]:d?["e","w"]:m?["n","s"]:[];return d&&(T=v(d),N=T[0],k=T[1]-T[0]),m&&(T=v(m),C=T[0],L=T[1]-T[0]),P.paper=e,P.brushSet=e.set(),P.resizerSet=e.set(),P.bg=e.rect(N,C,k,L).attr({fill:"#dddddd",stroke:"none",cursor:"crosshair"}).attr(A),P.bg.node.__brushNodeType__="bg",P.bg.node.ondragstart=function(){return!1},H="brush"+P.bg.id,P.bg.node.setAttribute("class","brush bg rvml "+H),P.bg.node.setAttribute("className","brush bg rvml "+H),P.fg=e.rect(N,C,d?0:k,m?0:L).attr({fill:"steelblue",stroke:"none",cursor:"move"}).attr(O),P.fg.node.__brushNodeType__="fg",P.fg.node.ondragstart=function(){return!1},P.fg.node.setAttribute("class","brush fg rvml "+H),P.fg.node.setAttribute("className","brush fg rvml "+H),t.forEach(function(t){var n=e.rect(N,C,d?6:k,m?6:L).data("resizeOrient",t).attr({cursor:E[t],fill:"white",stroke:"black",opacity:0});Raphael.vml&&n.attr({cursor:S[t]}),j.empty()&&(t==="n"||t==="s"?n.attr({height:0}):n.attr({width:0})),n.node.__brushNodeType__="resizer_"+t,n.node.ondragstart=function(){return!1},n.node.setAttribute("class","brush rvml "+H+" "+E[t]),n.node.setAttribute("className","brush rvml "+H+" "+E[t]),P.resizerSet.push(n)}),d&&h(P,x),m&&p(P,x),$(e.canvas).on("mousedown","."+H,B),j.brushElements=P,j}var e=d3.dispatch("brushstart","brush","brushend"),d,m,x=[[0,0],[0,0]],T,N,C,k,L,A={fill:"#dddddd",stroke:"none",cursor:"crosshair"},O={fill:"steelblue",stroke:"none",cursor:"move"},M=function(){},_=function(){},D=function(){},P={},H,F=function(t,n){return function(r){var i=d3.event;try{d3.event={type:r,target:j},e[r].apply(t,n)}finally{d3.event=i}}};return j.left=function(e){return arguments.length?(N=e,j):N},j.top=function(e){return arguments.length?(C=e,j):C},j.width=function(e){return arguments.length?(k=e,j):k},j.height=function(e){return arguments.length?(L=e,j):L},j.x=function(e){return arguments.length?(d=e,j):d},j.y=function(e){return arguments.length?(m=e,j):m},j.extent=function(e){var t,n,r,i,s;return arguments.length?(d&&(t=e[0],n=e[1],m&&(t=t[0],n=n[0]),d.invert&&(t=d(t),n=d(n)),n<t&&(s=t,t=n,n=s),x[0][0]=t,x[1][0]=n),m&&(r=e[0],i=e[1],d&&(r=r[1],i=i[1]),m.invert&&(r=m(r),i=m(i)),i<r&&(s=r,r=i,i=s),x[0][1]=r,x[1][1]=i),j):(d&&(t=x[0][0],n=x[1][0],d.invert&&(t=d.invert(t),n=d.invert(n)),n<t&&(s=t,t=n,n=s)),m&&(r=x[0][1],i=x[1][1],m.invert&&(r=m.invert(r),i=m.invert(i)),i<r&&(s=r,r=i,i=s)),d&&m?[[t,r],[n,i]]:d?[t,n]:m&&[r,i])},j.clear=function(){return x[0][0]=x[0][1]=x[1][0]=x[1][1]=0,j.refresh(),j},j.refresh=function(){return d&&h(P,x),m&&p(P,x),j},j.remove=function(){return $(paper.canvas).off("mousedown","."+H,B),P.fg.remove(),P.bg.remove(),P.resizerSet.remove(),j},j.empty=function(){return d&&x[0][0]===x[1][0]||m&&x[0][1]===x[1][1]},j.backgroundAttr=function(e){return arguments.length?(A=e,j):A},j.foregroundAttr=function(e){return arguments.length?(O=e,j):O},$(document).bind("mousemove",g).bind("mouseup",w).bind("keydown",y).bind("keyup",b),d3.rebind(j,e,"on")};return x}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Bubble",function(e){var t=e("DataV"),n=e("Axis"),r=t.extend(t.Chart,{initialize:function(e,t){this.type="Bubble",this.node=this.checkContainer(e),this.defaults.width=800,this.defaults.height=600,this.defaults.minRadius=10,this.defaults.maxRadius=40,this.defaults.meshInterval=20,this.defaults.borderMargin=[200,30,0,80],this.defaults.allDimensions=[],this.defaults.dimensions=[],this.defaults.dimensionType={},this.defaults.dimensionDomain={},this.defaults.dotStrokeColor={stroke:"#fff"},this.defaults.colorBarWidth=40,this.defaults.colorBarHeight=27,this.defaults.colorBarBorder=10,this.defaults.skeletonCircleAttr={fill:"#000","fill-opacity":.6,"stroke-width":0},this.defaults.skeletonLineAttr={stroke:"#000","stroke-width":.5,"stroke-opacity":.5},this.defaults.colorBarAttr={stroke:"#C9C9C9","stroke-opacity":0,r:5},this.defaults.textAttr={fill:"#000","fill-opacity":1,"font-family":"雅黑","font-size":12},this.setOptions(t),this.createCanvas()}});return r.prototype.createCanvas=function(){var e=this.defaults;m=e.borderMargin,this.backCanvas=new Raphael(this.node,e.width,e.height),this.foreCanvas=Raphael(this.node,e.width,e.height),$(this.node).css("position","relative"),$(this.foreCanvas.canvas).css({position:"absolute",zIndex:2,left:m[0],top:m[1]}),canvasStyle=this.node.style,canvasStyle.position="relative",this.floatTag=t.FloatTag()(this.node),this.floatTag.css({visibility:"hidden"}),$(this.node).append(this.floatTag)},r.prototype.chooseDimensions=function(e){var t=this.defaults;t.dimensions=e.filter(function(e){return _.indexOf(t.allDimensions,e)!==-1}),this.timeDimen=t.dimensions[0],this.keyDimen=t.dimensions[1],this.xDimen=t.dimensions[2],this.yDimen=t.dimensions[3],this.sizeDimen=t.dimensions[4],this.colorDimen=t.dimensions[5],this.keys=[],this.times=[],this.timeKeys=[];for(var n=0,r=this.source.length;n<r;n++)this.keys.push(this.source[n][this.keyDimen]),this.times.push(this.source[n][this.timeDimen]);this.times=_.uniq(this.times),this.keys=_.uniq(this.keys),this.timeKeys=_.range(this.times.length),this.startTime=0},r.prototype.setSource=function(e){function a(e){return!isNaN(parseFloat(e))&&isFinite(e)}var t=this.defaults;t.allDimensions=e[0],t.dimensions=e[0],this.source=[];for(var n=1,r=e.length;n<r;n++){var i={},s=t.allDimensions;for(var o=0,u=s.length;o<u;o++)i[s[o]]=e[n][o];this.source.push(i)}t.dimensionType={};for(var n=0,r=t.allDimensions.length;n<r;n++){var f="quantitative";for(var o=1,u=e.length;o<u;o++){var l=e[o][n];if(l&&!a(l)){f="ordinal";break}}t.dimensionType[t.allDimensions[n]]=f}for(var n=0,r=t.allDimensions.length;n<r;n++){var s=t.allDimensions[n];t.dimensionType[s]==="quantitative"?t.dimensionDomain[s]=d3.extent(this.source,function(e){return Math.abs(e[s])}):t.dimensionDomain[s]=this.source.map(function(e){return e[s]})}this.timeDimen=t.dimensions[0],this.keyDimen=t.dimensions[1],this.xDimen=t.dimensions[2],this.yDimen=t.dimensions[3],this.sizeDimen=t.dimensions[4],this.colorDimen=t.dimensions[5],this.keys=[],this.times=[],this.timeKeys=[];for(var n=0,r=this.source.length;n<r;n++)this.keys.push(this.source[n][this.keyDimen]),this.times.push(this.source[n][this.timeDimen]);this.times=_.uniq(this.times),this.keys=_.uniq(this.keys);for(var n=0,r=this.times.length;n<r;n++)this.timeKeys.push(n);this.startTime=0},r.prototype.getScale=function(){var e=this,t=this.defaults;m=t.borderMargin,w=t.width-m[0]-m[2],h=t.height-m[1]-m[3],maxRadius=t.maxRadius,minRadius=t.minRadius,backCanvas=this.backCanvas,xDimen=this.xDimen,yDimen=this.yDimen,sizeDimen=this.sizeDimen,colorDimen=this.colorDimen,timeDimen=this.timeDimen,xMin=t.dimensionDomain[xDimen][0],yMin=t.dimensionDomain[yDimen][0],xMax=t.dimensionDomain[xDimen][1],yMax=t.dimensionDomain[yDimen][1],xBorder=(maxRadius+30)*(xMax-xMin)/w,yBorder=(maxRadius+30)*(yMax-yMin)/h,xDomain=[xMin-xBorder,xMax+xBorder],yDomain=[yMin-yBorder,yMax+yBorder],this.x={},this.x[xDimen]=d3.scale.linear().domain(xDomain).range([m[0],m[0]+w]),this.y={},this.y[yDimen]=d3.scale.linear().domain(yDomain).range([h,0]),this.z={},this.z[sizeDimen]=d3.scale.linear().domain(t.dimensionDomain[sizeDimen]).range([minRadius,maxRadius]),this.c={},this.c[colorDimen]=this.colorDB({mode:"random",ratio:.5});var n=_.uniq(this.keys.map(function(t){return e.getColorData(t)})),r=[20,t.height-m[3]-n.length*23,200,220],i=backCanvas.set(),s=[];for(var o=0,u=n.length;o<u;o++){var a=this.c[colorDimen](n[o]);s.push(backCanvas.rect(r[0]+10,r[1]+10+23*o,120,20).attr({fill:"#ebebeb",stroke:"none"}).hide()),backCanvas.rect(r[0]+10+3,r[1]+10+23*o+6,16,8).attr({fill:a,stroke:"none"}),backCanvas.text(r[0]+10+3+16+8,r[1]+10+23*o+10,n[o]).attr({fill:"black","fill-opacity":1,"font-family":"Verdana","font-size":12}).attr({"text-anchor":"start"}),i.push(backCanvas.rect(r[0]+10,r[1]+10+23*o,50,20).attr({fill:"white","fill-opacity":0,stroke:"none"}).data("type",o).data("colorType",n[o]))}this.interactionType=null,e=this,i.forEach(function(t){t.hover(function(){if(!e.interval)for(var n=0,r=s.length;n<r;n++)n===t.data("type")&&(s[n].show(),e.interactionType=t.data("colorType"),e.generatePaths(Math.ceil(e.startTime)))},function(){for(var n=0,r=s.length;n<r;n++)n===t.data("type")&&(s[n].hide(),e.interactionType=null)})});var f=backCanvas.rect(0,0,24,24,2).attr({stroke:"none",fill:"#d6d6d6"}),l="M7,18L19,12L7,6V18z",c="M7,7sh4v10sh-4z",p="M13,7sh4v10sh-4z",d=backCanvas.path(l).attr({"stroke-width":0,"stroke-linejoin":"round",fill:"#606060"}),v=backCanvas.set();v.push(backCanvas.path(c)),v.push(backCanvas.path(p)),v.attr({"stroke-width":0,"stroke-linejoin":"round",fill:"#606060"}),f.transform("t"+(m[0]-t.colorBarHeight)+","+(m[1]+h+33)),d.transform("t"+(m[0]-t.colorBarHeight)+","+(m[1]+h+33)),v.transform("t"+(m[0]-t.colorBarHeight)+","+(m[1]+h+33)),d.attr({"stroke-width":0,"stroke-linejoin":"round","fill-opacity":0});var g=backCanvas.set();g.push(f),g.push(d),g.push(v),g.dblclick(function(){e.clearAnimation(),e.render()}),g.click(function(){e.interval?(v.attr({"fill-opacity":0}),d.attr({"fill-opacity":1}),e.pause()):(d.attr({"fill-opacity":0}),v.attr({"fill-opacity":1}),e.initControls())}),g.hover(function(){d.attr({fill:"#ffffff"}),v.attr({fill:"#ffffff"})},function(){d.attr({fill:"#606060"}),v.attr({fill:"#606060"})})},r.prototype.renderAxis=function(){var e=this.defaults;m=e.borderMargin,w=e.width-m[0]-m[2],h=e.height-m[1]-m[3],colorData=[],maxRadius=e.maxRadius,minRadius=e.minRadius,yaxis=n().orient("left"),xaxis=n().orient("bottom"),backCanvas=this.backCanvas,xDimen=this.xDimen,yDimen=this.yDimen,xMin=e.dimensionDomain[xDimen][0],yMin=e.dimensionDomain[yDimen][0],xMax=e.dimensionDomain[xDimen][1],yMax=e.dimensionDomain[yDimen][1],xBorder=(maxRadius+30)*(xMax-xMin)/w,yBorder=(maxRadius+30)*(yMax-yMin)/h,xDomain=[xMin-xBorder,xMax+xBorder],yDomain=[yMin-yBorder,yMax+yBorder],axixX=d3.scale.linear().domain(xDomain).range([0,w]),axixY=d3.scale.linear().domain(yDomain).range([h,0]),backCanvas.clear(),xaxis.scale(axixX).tickSubdivide(1).tickSize(6,3,0).tickPadding(5).tickAttr({stroke:"#929292"}).tickTextAttr({"font-size":"10px",fill:"#929292"}).minorTickAttr({stroke:"#929292"}).domainAttr({"stroke-width":1,stroke:"#929292"})(backCanvas).attr({transform:"t"+m[0]+","+(m[1]+h)}),yaxis.scale(axixY).tickSubdivide(1).tickSize(6,3,0).tickPadding(5).tickAttr({stroke:"#929292"}).tickTextAttr({"font-size":"10px",fill:"#929292"}).minorTickAttr({stroke:"#929292"}).domainAttr({"stroke-width":1,stroke:"#929292"})(backCanvas).attr({transform:"t"+m[0]+","+m[1]});var t=backCanvas.text(m[0]+w/2,m[1]+h+40,this.xDimen);t.attr({"font-size":"15px","font-family":"Arial",fill:"#000000"});var r=backCanvas.text(m[0]-50,m[1]+h/2,this.yDimen);r.attr({"font-size":"15px","font-family":"Arial",fill:"#000000"}).transform("r-90")},r.prototype.colorDB=function(e){var n=t.getColor(),r,i=e||{},s=i.mode||"default",o,u;switch(s){case"gradient":var a=e.index||0;a=a<0?0:Math.min(a,n.length-1),r=d3.interpolateRgb.apply(null,[n[a][0],n[a][1]]);break;case"random":case"default":var f=i.ratio||0;f<0&&(f=0),f>1&&(f=1);var l=[];for(o=0,u=n.length;o<u;o++){var c=d3.interpolateRgb.apply(null,[n[o][0],n[o][1]]);l.push(c(f))}r=d3.scale.ordinal().range(l)}return r},r.prototype.generatePaths=function(e){function D(r,i){if(!that.interval){that.choose=!0;var s=that.floatTag;for(var o=0,u=S.length;o<u;o++)o!=i&&S[o].attr({"stroke-width":0,"fill-opacity":.2});x.attr({stroke:"#d6d6d6","stroke-dasharray":"-"});var f="<b>"+that.keyDimen+":{key}</b><br/><b>"+that.xDimen+":{xDimen}</b><br/><b>"+that.yDimen+":{yDimen}</b><br/><b>"+that.sizeDimen+":{sizeDimen}</b><br/><b>"+that.colorDimen+":{colorDimen}</b><br/><b>"+that.timeDimen+":{timeDimen}</b>";for(var l=0,u=b.length;l<u;l++){var c=that.interpolateData(b[l],b,that.getKeyData(xDimen,r)),h=that.interpolateData(b[l],b,that.getKeyData(yDimen,r)),p=that.interpolateData(b[l],b,that.getKeyData(sizeDimen,r)),d=that.getColorData(r),v=that.x[xDimen](c)-n[0],m=that.y[yDimen](h),g=that.z[sizeDimen](p),w=that.c[colorDimen](d),E=.1+Math.pow(1.5,l)/Math.pow(1.5,u);historyBubble=a.circle(v,m,g),historyBubble.attr({"stroke-width":0,fill:w,"fill-opacity":E}),f=f.replace("{key}",r),f=f.replace("{xDimen}",c),f=f.replace("{yDimen}",h),f=f.replace("{sizeDimen}",p),f=f.replace("{colorDimen}",d),f=f.replace("{timeDimen}",that.times[b[l]]),b[l]==Math.ceil(e)?(historyBubble.attr({"stroke-width":1,stroke:"#f00"}),historyBubble.hover(function(){s.html('<div style="text-align: left;margin:auto;color:#ffffff">'+f+"</div>"),s.css({visibility:"visible"})},function(){s.css({visibility:"hidden"})})):historyBubble.hover(function(){this.attr({"stroke-width":1,stroke:"#f00"}),s.html('<div style="text-align: left;margin:auto;color:#ffffff">'+f+"</div>"),s.css({visibility:"visible"})},function(){this.attr({"stroke-width":0}),s.css({visibility:"hidden"})}),historyBubble.click(function(){that.generatePaths(Math.ceil(e)),that.choose=!1})}var T=a.set();for(var l=1,u=b.length;l<u;l++){var c=that.interpolateData(b[l],b,that.getKeyData(xDimen,r)),h=that.interpolateData(b[l],b,that.getKeyData(yDimen,r)),v=that.x[xDimen](c)-n[0],m=that.y[yDimen](h),N=that.interpolateData(b[l-1],b,that.getKeyData(xDimen,r)),C=that.interpolateData(b[l-1],b,that.getKeyData(yDimen,r)),k=that.x[xDimen](N)-n[0],L=that.y[yDimen](C);skeletonLine=a.path("M"+k+" "+L+"L"+v+" "+m),skeletonLine.attr(t.skeletonLineAttr),T.push(skeletonLine)}var A=a.set();for(var l=0,u=b.length;l<u;l++){var c=that.interpolateData(b[l],b,that.getKeyData(xDimen,r)),h=that.interpolateData(b[l],b,that.getKeyData(yDimen,r)),p=that.interpolateData(b[l],b,that.getKeyData(sizeDimen,r)),d=that.getColorData(r),v=that.x[xDimen](c)-n[0],m=that.y[yDimen](h),g=that.z[sizeDimen](p),w=that.c[colorDimen](d),E=.1+l*.9/b.length;skeletonCircle=a.circle(v,m,y),skeletonCircle.attr(t.skeletonCircleAttr).attr({stroke:w}),A.push(skeletonCircle),b[l]==Math.ceil(e)?(skeletonCircle.attr({fill:"#f00"}),skeletonCircle.click(function(){that.generatePaths(Math.ceil(e))}),skeletonCircle.hover(function(){s.html('<div style="text-align: left;margin:auto;color:#ffffff">'+f+"</div>"),s.css({visibility:"visible"}),A.attr({"fill-opacity":.35}),this.attr({"fill-opacity":1,r:5}),T.attr({opacity:.35})},function(){s.css({visibility:"hidden"}),this.attr(t.dotStrokeColor),A.attr({"fill-opacity":.7}),this.attr({r:y}),T.attr({opacity:.7})})):skeletonCircle.hover(function(){s.html('<div style="text-align: left;margin:auto;color:#ffffff">'+f+"</div>"),s.css({visibility:"visible"}),A.attr({"fill-opacity":.35}),this.attr({"fill-opacity":1,r:5}),T.attr({opacity:.35})},function(){s.css({visibility:"hidden"}),this.attr(t.dotStrokeColor),A.attr({"fill-opacity":.7}),this.attr({r:y}),T.attr({opacity:.7})})}}}var t=this.defaults,n=t.borderMargin,r=t.meshInterval,i=t.width-n[0]-n[2],s=t.height-n[1]-n[3],o=18,u=s*.86,a=this.foreCanvas,f,l,c,p,d,v,m,g,y=2,b=this.timeKeys,w=this.keys,E=[],S=[];e<this.times.length-1?this.startTime=e:this.startTime=0,a.clear();var x=a.set(),T=i/r,N=s/r;for(var C=1;C<T;C++)x.push(a.path("M"+C*r+" "+0+"L"+C*r+" "+(s-1)).attr({stroke:"#ebebeb","stroke-width":1}));for(var C=1;C<N;C++)x.push(a.path("M1 "+(s-C*r)+"L"+i+" "+(s-C*r)).attr({stroke:"#ebebeb","stroke-dasharray":"-","stroke-width":.5}));for(var C=0,k=w.length;C<k;C++){f=this.interpolateData(e,b,this.getKeyData(xDimen,w[C])),l=this.interpolateData(e,b,this.getKeyData(yDimen,w[C])),c=this.interpolateData(e,b,this.getKeyData(sizeDimen,w[C])),p=this.getColorData(w[C]);var L={key:w[C],x0:f,y0:l,r0:c,c0:p,year:this.times[e.toFixed(0)]};E.push(L)}var A=this.floatTag,O="<b>"+that.keyDimen+":{key}</b><br/><b>"+that.xDimen+":{xDimen}</b><br/><b>"+that.yDimen+":{yDimen}</b><br/><b>"+that.sizeDimen+":{sizeDimen}</b><br/><b>"+that.colorDimen+":{colorDimen}</b><br/><b>"+that.timeDimen+":{timeDimen}</b>",M=a.text(20,n[1]+h+15,this.times[e.toFixed(0)]);M.attr({"font-size":o,fill:"#606060","text-anchor":"start"}),E.sort(function(e,t){return t.r0<e.r0?-1:t.r0>e.r0?1:0});for(var C=0,k=E.length;C<k;C++){var L=E[C],d=this.x[xDimen](L.x0)-n[0],v=this.y[yDimen](L.y0),m=this.z[sizeDimen](L.r0),g=this.c[colorDimen](L.c0),_=a.circle(d,v,m);_.attr({"stroke-width":0,fill:g,"fill-opacity":.5}).data("key",L.key).data("colorType",L.c0),S.push(_)}S.forEach(function(t,n){O=O.replace("{key}",E[n].key),O=O.replace("{xDimen}",E[n].x0),O=O.replace("{yDimen}",E[n].y0),O=O.replace("{sizeDimen}",E[n].r0),O=O.replace("{colorDimen}",E[n].c0),O=O.replace("{timeDimen}",e),t.hover(function(){A.html('<div style="text-align: left;margin:auto;color:#ffffff">'+O+"</div>"),A.css({visibility:"visible"});if(!that.choose){t.attr({"stroke-width":1,stroke:"#f00","fill-opacity":.8}),x.attr({stroke:"#d6d6d6","stroke-dasharray":"-","stroke-width":1});for(var e=0,r=S.length;e<r;e++)e!=n&&S[e].attr({"stroke-width":0,"fill-opacity":.2})}},function(){A.css({visibility:"hidden"});if(!that.choose){t.attr({"stroke-width":0,"fill-opacity":.5}),x.attr({stroke:"#ebebeb","stroke-dasharray":"-","stroke-width":1});for(var e=0,r=S.length;e<r;e++)e!=n&&S[e].attr({"stroke-width":0,"fill-opacity":.5})}}),t.click(function(){e==Math.ceil(e)?D(this.data("key"),n):(D(this.data("key"),n),this.remove())})}),that=this,this.interactionType&&S.forEach(function(e){e.data("colorType")==that.interactionType&&D(e.data("key"))})},r.prototype.getKeyData=function(e,t){var n=[];for(var r=0;r<this.source.length;r++)this.source[r][this.keyDimen]===t&&n.push(this.source[r][e]);return n},r.prototype.getColorData=function(e){for(var t=0;t<this.source.length;t++)if(this.source[t][this.keyDimen]===e)return this.source[t][this.colorDimen]},r.prototype.initControls=function(){var e=this,t=this.times.length-1;value=this.startTime,this.interval=setInterval(function(){value<=t?(e.generatePaths(value),value+=.25):(clearInterval(e.interval),e.interval=0)},250)},r.prototype.interpolateData=function(e,t,n){var r=Math.ceil(e);if(e==t[r])return n[r];var i=Math.max(0,r-1),s=n[i],o=r,u=n[o],a=t[i],f=t[o],l=(e-a)/(f-a),c=+s+ +((u-s)*l);return c},r.prototype.clearAnimation=function(){clearInterval(this.interval),this.interval=0,this.backCanvas.clear(),this.foreCanvas.clear()},r.prototype.pause=function(){clearInterval(this.interval),this.interval=0},r.prototype.render=function(e){clearInterval(this.interval),this.setOptions(e),this.interval||this.renderAxis(),this.foreCanvas.clear(),this.getScale(),this.initControls()},r}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Bullet",function(e){var t=e("DataV"),n=e("Axis"),r=t.extend(t.Chart,{initialize:function(e,t){this.type="Bullet",this.node=this.checkContainer(e),this.defaults.orient="horizonal",this.defaults.axisStyle="linear",this.defaults.logBase=Math.E,this.defaults.tickDivide=5,this.defaults.margin=[10,10,20,80],this.defaults.centerBarRatio=.3,this.defaults.markerWidth=4,this.defaults.markerRatio=.7,this.defaults.titleRatio=.6,this.defaults.backgroundColor=["#666","#ddd"],this.defaults.measureColor=["steelblue","#B0C4DE"],this.defaults.markerColor="#000",this.defaults.width=200,this.defaults.height=80,this.setOptions(t),this.createCanvas()}});return r.prototype.createCanvas=function(){var e=this.defaults;this.canvas=new Raphael(this.node,e.width,e.height)},r.prototype.setSource=function(e){var t=this.defaults,r,i;this.data=e,t.orient==="horizonal"?(i="bottom",r=[t.margin[3],t.width-t.margin[1]]):t.orient==="vertical"&&(i="left",r=[t.height-t.margin[2],t.margin[0]]),t.axisStyle==="linear"?this.scale=d3.scale.linear():t.axisStyle==="log"&&(this.scale=d3.scale.log()),this.data.min=this.data.ranges[0],this.data.max=this.data.ranges[this.data.ranges.length-1],this.scale.domain([this.data.min,this.data.max]).range(r),t.axisStyle==="linear"?this.axis=n().scale(this.scale).orient(i).ticks(t.tickDivide).domainAttr({stroke:"none"}):t.axisStyle==="log"&&(this.logScale=d3.scale.linear().domain([Math.log(this.data.min)/Math.log(t.logBase),Math.log(this.data.max)/Math.log(t.logBase)]).range(r),this.axis=n().orient(i).scale(this.logScale).ticks(t.tickDivide).tickFormat(function(e){return Math.round(Math.pow(t.logBase,e))}).domainAttr({stroke:"none"}))},r.prototype.generatePaths=function(){var e=this.defaults;e.backgroundColor&&(this.color=d3.interpolateRgb.apply(null,[e.backgroundColor[0],e.backgroundColor[1]])),e.measureColor&&(this.measureColor=d3.interpolateRgb.apply(null,[e.measureColor[0],e.measureColor[1]])),e.orient==="horizonal"?this.paintHorizonal():e.orient==="vertical"&&this.paintVertical()},r.prototype.paintHorizonal=function(){var e=this.defaults,t=this.canvas,n=this.data,r=e.margin,i=[],s=[],o=[],u=[],a,f,l,c,h,p=e.height-r[0]-r[2],d;this.axis(t).attr({transform:"t0,"+(e.height-r[2])}),i=n.ranges,n.rangeTitles&&(u=n.rangeTitles),d=r[3];for(a=0,f=i.length-1;a<f;a++)h=this.scale(i[a+1])-this.scale(i[a]),l=t.rect(d,r[0],h,p).attr({stroke:"none",fill:this.color(f===1?1:a/(f-1)),title:u[a]?u[a]:""}),d+=h;n.measures.forEach(function(e,t){var r=n.measureTitles,i=r&&r[t]?r[t]:"";s.push({measure:e,measureTitle:i})}),s.sort(function(e,t){return d3.ascending(e.measure,t.measure)}),d=this.scale(n.min);for(a=0,f=s.length;a<f;a++)value=Math.max(n.min,Math.min(n.max,s[a].measure)),h=this.scale(value)-d,t.rect(d,r[0]+p*(1-e.centerBarRatio)/2,h,p*e.centerBarRatio).attr({stroke:"none",fill:this.measureColor(f===1?1:a/(f-1)),title:s[a].measureTitle}),d+=h;o=n.markers;for(a=0,f=o.length;a<f;a++)t.rect(this.scale(o[a])-e.markerWidth/2,r[0]+p*(1-e.markerRatio)/2,e.markerWidth,p*e.markerRatio).attr({stroke:"none",fill:e.markerColor,title:n.markerTitles&&n.markerTitles[a]?n.markerTitles[a]:""});n.title&&(c=n.subtitle?e.titleRatio:1,this.title=t.text(r[3]-5,r[0]+p/2,n.title).attr({"text-anchor":"end","font-weight":"bold","font-size":p*c*.9})),n.subtitle&&(this.subtitle=t.text(r[3]-5,e.height-r[2],n.subtitle).attr({"text-anchor":"end","font-size":p*(1-e.titleRatio)*.9}))},r.prototype.paintVertical=function(){var e=this.defaults,t=this.canvas,n=this.data,r=e.margin,i=[],s=[],o=[],u=[],a,f,l,c,h=e.width-r[1]-r[3],p,d;this.axis(t).attr({transform:"t"+r[3]+","+0}),i=n.ranges,n.rangeTitles&&(u=n.rangeTitles),d=e.height-r[2];for(a=0,f=i.length-1;a<f;a++)p=-this.scale(i[a+1])+this.scale(i[a]),l=t.rect(r[3],d-p,h,p).attr({stroke:"none",fill:this.color(f===1?1:a/(f-1)),title:u[a]?u[a]:""}),d-=p;n.measures.forEach(function(e,t){var r=n.measureTitles,i=r&&r[t]?r[t]:"";s.push({measure:e,measureTitle:i})}),s.sort(function(e,t){return d3.ascending(e.measure,t.measure)}),d=this.scale(n.min);for(a=0,f=s.length;a<f;a++)value=Math.max(n.min,Math.min(n.max,s[a].measure)),p=-this.scale(value)+d,t.rect(r[3]+h*(1-e.centerBarRatio)/2,d-p,h*e.centerBarRatio,p).attr({stroke:"none",fill:this.measureColor(f===1?1:a/(f-1)),title:s[a].measureTitle}),d-=p;o=n.markers;for(a=0,f=o.length;a<f;a++)t.rect(r[3]+h*(1-e.markerRatio)/2,this.scale(o[a])-e.markerWidth/2,h*e.markerRatio,e.markerWidth).attr({stroke:"none",fill:e.markerColor,title:n.markerTitles&&n.markerTitles[a]?n.markerTitles[a]:""});n.title&&(c=n.subtitle?e.titleRatio:1,r[0]*=.9,this.title=t.text((e.width+r[3]-r[1])/2,r[0]*c/2,n.title).attr({"text-anchor":"middle","font-weight":"bold","font-size":r[0]*c*.8})),n.subtitle&&(this.subtitle=t.text((e.width+r[3]-r[1])/2,r[0]*(1-(1-c)/2),n.subtitle).attr({"text-anchor":"middle","font-size":r[0]*(1-c)*.8}))},r.prototype.clearCanvas=function(){this.canvas.clear()},r.prototype.render=function(e){this.setOptions(e),this.generatePaths()},r}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Bundle",function(e){var t=e("DataV"),n=t.extend(t.Chart,{initialize:function(e,t){this.type="Bundle",this.node=this.checkContainer(e),this.json={},this.defaults.diameter=960,this.defaults.radius=this.defaults.diameter/2,this.defaults.innerRadius=this.defaults.radius-120,this.defaults.tension=.85,this.defaults.color={defaultLineColor:"#4065AF",defaultWordColor:"#000000",lineHoverColor:"#02B0ED",nodeHoverColor:"#02B0ED",importNodesColor:"#5DA714",exportNodesColor:"#FE3919"},this.setOptions(t),this.createCanvas()}});return n.prototype.setOptions=function(e){if(e){var t;for(t in e)e.hasOwnProperty(t)&&(this.defaults[t]=e[t],t==="diameter"?(this.defaults.radius=this.defaults.diameter/2,this.defaults.innerRadius=this.defaults.radius-120):t==="radius"?(this.defaults.diameter=this.defaults.radius*2,this.defaults.innerRadius=this.defaults.radius-120):t==="innerRadius"?(this.defaults.radius=this.defaults.innerRadius+120,this.defaults.diameter=this.defaults.radius*2):t==="width"&&(this.defaults.diameter=this.defaults.width,this.defaults.radius=this.defaults.diameter/2,this.defaults.innerRadius=this.defaults.radius-120))}},n.prototype.setSource=function(e){if(e[0]&&e[0]instanceof Array){e[0][0]==="name"&&(e=e.slice(1));var t=[],n=[],r,i=this;e.forEach(function(e,r){if(e[0]==="")throw new Error("name can not be empty(line:"+(r+1)+").");e[1]!==""&&(n=e[1].split(" ")),t[r]={name:e[0],imports:n}}),this.json=t}else this.json=e},n.prototype.createCanvas=function(){var e=this.defaults;this.canvas=new Raphael(this.node,e.diameter,e.diameter)},n.prototype.layout=function(){var e={root:function(e){function n(e,r){var i=t[e],s;return i||(i=t[e]=r||{name:e,children:[]},e.length&&(i.parent=n(e.substring(0,s=e.lastIndexOf("."))),i.parent.children.push(i),i.key=e.substring(s+1))),i}var t={};return e.forEach(function(e){n(e.name,e)}),t[""]},imports:function(e){var t={},n=[];return e.forEach(function(e){t[e.name]=e}),e.forEach(function(e){e.imports&&e.imports.forEach(function(r){n.push({source:t[e.name],target:t[r]})})}),n}},t=d3.layout.cluster().size([360,this.defaults.innerRadius]).sort(null).value(function(e){return e.size});this.nodes=t.nodes(e.root(this.json)),this.links=e.imports(this.nodes)},n.prototype.render=function(){this.layout(),this.generatePaths()},n.prototype.generatePaths=function(e){var t=this,n=this.canvas,r=n.set(),i=n.set(),s=d3.layout.bundle(),o=d3.svg.line.radial().interpolate("bundle").tension(this.defaults.tension).radius(function(e){return e.y}).angle(function(e){return e.x/180*Math.PI}),u=this.nodes,a=this.links,f=a.length,l=s(a),c="",h="",p=0,d=0,v=0,m=0,g,y="",b={},w={},E={},S,x,T,N,C,k,L,A,O,M,_=function(){var e=this;i.preLink&&i.preLink.attr("stroke",t.defaults.color.defaultLineColor).attr("stroke-width",1).attr("stroke-opacity",.6),i.preLink=this,e.attr("stroke",t.defaults.color.lineHoverColor).attr("stroke-width",2).attr("stroke-opacity",1).toFront()},D=function(){var e=this.data("relatedElements");this.data("relatedNode").attr({fill:t.defaults.color.nodeHoverColor,"fill-opacity":1,"font-weight":"600"}),this.attr({fill:t.defaults.color.nodeHoverColor,"fill-opacity":0}),e.sourceLink.forEach(function(e){e.attr({stroke:t.defaults.color.importNodesColor,"stroke-width":1,"stroke-opacity":.9}).toFront()}),e.sourceNode.forEach(function(e){e.attr({fill:t.defaults.color.importNodesColor,"font-weight":"600"})}),e.targetLink.forEach(function(e){e.attr({stroke:t.defaults.color.exportNodesColor,"stroke-width":1,"stroke-opacity":.9}).toFront()}),e.targetNode.forEach(function(e){e.attr({fill:t.defaults.color.exportNodesColor,"font-weight":"600"})})},P=function(){var e=this.data("relatedElements");this.data("relatedNode").attr({fill:t.defaults.color.defaultWordColor,"font-weight":"400","fill-opacity":1}),e.targetLink.forEach(function(e){e.attr({stroke:t.defaults.color.defaultLineColor,"stroke-width":1,"stroke-opacity":.6})}),e.targetNode.forEach(function(e){e.attr({fill:t.defaults.color.defaultWordColor,"font-weight":"400"})}),e.sourceLink.forEach(function(e){e.attr({stroke:t.defaults.color.defaultLineColor,"stroke-width":1,"stroke-opacity":.6})}),e.sourceNode.forEach(function(e){e.attr({fill:t.defaults.color.defaultWordColor,"font-weight":"400"})})};for(x=0;x<u.length;x++)u[x].children||(c="T"+t.defaults.radius+","+t.defaults.radius+"R",p=u[x].y+20,d=(u[x].x-90)*Math.PI/180,v=p*Math.cos(d),m=p*Math.sin(d),u[x].x<180?g="start":g="end",u[x].x<180?y="":y="R180",c+=u[x].x-90+y+"T"+v+","+m,N=n.text().attr("font","11px arial").data("color",t.defaults.color).attr("text",u[x].key).transform(c).attr("text-anchor",g).attr("fill",t.defaults.color.defaultWordColor),C=N.getBBox(!0),k=N.getBBox(),Raphael.vml&&(k.x=k.x+C.width/2*Math.cos(d),k.y=k.y+C.width/2*Math.sin(d)),L=k.x+k.width/2-C.x-C.width/2,A=k.y+k.height/2-C.y-C.height/2,h="T"+L+","+A+"R"+(u[x].x-90)+y,O=n.rect(C.x,C.y,C.width,C.height).transform(h).data("relatedNode",N).attr({fill:"#fff",opacity:.01}),T=u[x].key,w[T]=N,E[T]=O,b[T]={targetLink:[],sourceLink:[],targetNode:[],sourceNode:[]},r.push(N));for(S=0;S<f;S++){var H=l[S],B=o(H),j=a[S].source.key,F=a[S].target.key,I="link source: "+j+"\n"+"link target: "+F;M=n.path(B).attr("stroke-opacity",.6).attr("title",I).attr("d",B).attr("stroke",t.defaults.color.defaultLineColor).translate(t.defaults.radius,t.defaults.radius).mouseover(_),M[0].el=M,b[j].targetLink.push(M),b[j].targetNode.push(w[F]),b[F].sourceLink.push(M),b[F].sourceNode.push(w[j]),i.push(M)}$(this.canvas.canvas).mousemove(function(e){!e.target.el&&i.preLink&&(i.preLink.attr("stroke",t.defaults.color.defaultLineColor).attr("stroke-width",1).attr("stroke-opacity",.6),i.preLink=undefined)});for(T in E)E.hasOwnProperty(T)&&E[T].data("relatedElements",b[T]).mouseover(D).mouseout(P)},n}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Chord",function(e){var t=e("DataV"),n=t.extend(t.Chart,{initialize:function(e,t){this.type="Chord",this.node=this.checkContainer(e),this.matrix=[],this.groupNames=[],this.defaults.legend=!0,this.defaults.width=800,this.defaults.height=800,this.setOptions(t),this.legendArea=[20,this.defaults.height-20-220,200,220],this.defaults.legend?this.xOffset=this.legendArea[2]:this.xOffset=0,this.defaults.innerRadius=Math.min(this.defaults.width-this.xOffset,this.defaults.height)*.38,this.defaults.outerRadius=this.defaults.innerRadius*1.1,this.createCanvas()}});return n.prototype.createCanvas=function(){this.canvas=new Raphael(this.node,this.defaults.width,this.defaults.height),canvasStyle=this.node.style,canvasStyle.position="relative",this.floatTag=t.FloatTag()(this.node),this.floatTag.css({visibility:"hidden"})},n.prototype.getColor=function(e){var n=t.getColor();return n[e%n.length][0]},n.prototype.render=function(){this.layout(),this.defaults.legend&&this.legend()},n.prototype.legend=function(){var e=this,t=this.canvas,n=this.legendArea,r=t.set();this.underBn=[];var s=this.underBn;for(i=0;i<=this.groupNum;i++)s.push(t.rect(n[0]+10,n[1]+10+23*i,180,20).attr({fill:"#ebebeb",stroke:"none"}).hide()),t.rect(n[0]+10+3,n[1]+10+23*i+6,16,8).attr({fill:this.getColor(i),stroke:"none"}),t.text(n[0]+10+3+16+8,n[1]+10+23*i+10,this.groupNames[i]).attr({fill:"black","fill-opacity":1,"font-family":"Verdana","font-size":12}).attr({"text-anchor":"start"}),r.push(t.rect(n[0]+10,n[1]+10+23*i,180,20).attr({fill:"white","fill-opacity":0,stroke:"none"})).data("clicked",0);r.forEach(function(t,n){t.mouseover(function(){t.data("clicked")===0&&(s[n].attr("opacity",.5),s[n].show())}).mouseout(function(){t.data("clicked")===0&&s[n].hide()}),t.click(function(){for(j=0;j<s.length;j++)j===n?s[j].show():s[j].hide();r.forEach(function(e){e!==t&&e.data("clicked",0)}),t.data("clicked")===0?(s[n].attr("opacity",1),s[n].show(),e.chordGroups.forEach(function(e){e.data("source")!==n&&e.data("target")!==n?e.attr({"fill-opacity":.1}):e.attr({"fill-opacity":.6})}),t.data("clicked",1)):t.data("clicked")===1&&(s[n].hide(),t.data("clicked",0),e.chordGroups.forEach(function(e){e.attr({"fill-opacity":.6})}))})})},n.prototype.setSource=function(e){if(e[0][0]!==null){var t;for(t=0;t<e[0].length;t++)this.groupNames[t]=e[0][t];e=e.slice(1)}var n=[];this.groupNum=e[0].length;var r=this.groupNum,i=this;e.forEach(function(t,i){if(t.length!==r||e.length!==r)throw new Error("The source data should be an n * n matrix!");n[i]=[];var s;for(s=0;s<r;s++)n[i][s]=Number(t[s])});var s;for(s=0;s<r;s++)i.matrix[s]=n[s]},n.prototype.layout=function(){var e=this.floatTag,t=this;t.canvas.clear();var n=d3.layout.chord().padding(.05).sortSubgroups(d3.descending).matrix(t.matrix),r=n.groups(),i=d3.svg.arc().innerRadius(t.defaults.innerRadius).outerRadius(t.defaults.outerRadius).startAngle(function(e){return e.startAngle}).endAngle(function(e){return e.endAngle}),s=n.chords(),o=d3.svg.chord().radius(t.defaults.innerRadius),u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M=1e3;t.chordGroups=t.canvas.set(),t.donutGroups=t.canvas.set(),$(this.node).append(this.floatTag);var _=function(e){var t=s[e].target.value>s[e].source.value?s[e].target.index:s[e].source.index;return t},D=function(){e.html('<div style = "text-align: center;margin:auto;color:#ffffff">'+this.data("text")+"</div>"),e.css({visibility:"visible"}),t.underBn.forEach(function(e){e.hide()}),index=this.data("donutIndex"),t.chordGroups.forEach(function(e){e.data("source")!==index&&e.data("target")!==index?e.attr({"fill-opacity":.1}):e.attr({"fill-opacity":.6})}),t.underBn[index].attr("opacity",.5).show()},P=function(){e.css({visibility:"hidden"}),index=this.data("donutIndex"),t.chordGroups.forEach(function(e){e.data("source")!==index&&e.data("target")!==index&&e.attr({"fill-opacity":.6})}),t.underBn[index].hide()},H=function(){e.html('<div style="text-align: center;margin:auto;color:#ffffff">'+this.data("text")+"</div>"),e.css({visibility:"visible"}),t.underBn.forEach(function(e){e.hide()}),t.chordGroups.forEach(function(e){e.attr("fill-opacity",.1)}),navigator.appName!=="Microsoft Internet Explorer"&&this.toFront(),this.attr("fill-opacity",.7),t.underBn[this.data("source")].attr("opacity",.5).show()},B=function(){e.css({visibility:"hidden"}),t.chordGroups.forEach(function(e){e.attr("fill-opacity",.6)}),t.underBn[this.data("source")].hide()},j;for(j=0;j<=s.length-1;j++)l=o(s[j]),O=t.groupNames[s[j].source.index]+" to "+t.groupNames[s[j].target.index]+": "+t.matrix[s[j].source.index][s[j].target.index]+","+t.groupNames[s[j].target.index]+" to "+t.groupNames[s[j].source.index]+": "+t.matrix[s[j].target.index][s[j].source.index],f=t.canvas.path(l).translate((t.defaults.width-this.xOffset)/2+this.xOffset,t.defaults.height/2).attr({path:l,fill:t.getColor(_(j)),"fill-opacity":.6,stroke:"#d6d6d6","stroke-opacity":.1}).hover(H,B).data("source",s[j].source.index).data("target",s[j].target.index),f.data("text",O),t.chordGroups.push(f);var F,I,q,R,U,z,W,X,V=0;for(I=0;I<=r.length-1;I++)V+=r[I].value;for(F=0;F<=r.length-1;F++){a=i(r[F]),O=t.groupNames[F]+": "+Math.round(r[F].value)+" "+(r[F].value*100/V).toFixed(2)+"%",u=t.canvas.path(a).translate((t.defaults.width-this.xOffset)/2+this.xOffset,t.defaults.height/2).data("donutIndex",F).attr({path:a,fill:t.getColor(F),stroke:t.getColor(F)}).mouseover(D).mouseout(P),u.data("text",O),t.donutGroups.push(u),W=r[F].startAngle*180/Math.PI-86+90,X=(r[F].startAngle*180/Math.PI-86)*Math.PI/180,U=((t.defaults.outerRadius-t.defaults.innerRadius)/2+t.defaults.innerRadius)*Math.cos(X),z=((t.defaults.outerRadius-t.defaults.innerRadius)/2+t.defaults.innerRadius)*Math.sin(X),R="T"+((t.defaults.width-t.xOffset)/2+t.xOffset)+","+t.defaults.height/2+"R"+W+"T"+U+","+z,(r[F].endAngle-r[F].startAngle)*180/Math.PI>10&&(q=t.canvas.text().attr("font","12px Verdana").attr("text",t.groupNames[F]).transform(R)),c=r[F].value/5e3,h=(r[F].endAngle-r[F].startAngle)*180/Math.PI/c;var J;for(J=0;J<=c;J++)d=r[F].startAngle*180/Math.PI-90+J*h,p=d*Math.PI/180,g=t.defaults.outerRadius*Math.cos(p),y=t.defaults.outerRadius*Math.sin(p),m="T"+((t.defaults.width-t.xOffset)/2+t.xOffset)+","+t.defaults.height/2+"T"+g+","+y,b=(t.defaults.width-t.xOffset)/2+t.xOffset+g,w=t.defaults.height/2+y,E=(t.defaults.width-t.xOffset)/2+t.xOffset+(t.defaults.outerRadius+6)*Math.cos(p),S=t.defaults.height/2+(t.defaults.outerRadius+6)*Math.sin(p),v="M"+b+","+w+"L"+E+","+S,t.canvas.path(v).attr({stroke:"#929292","stroke-width":"1px"}),J%2===0&&(d+90<180?x="start":x="end",d+90<180?T=null:T="R180",L=(t.defaults.outerRadius+10)*Math.cos(p),A=(t.defaults.outerRadius+10)*Math.sin(p),C=J%2?"":Math.round(r[F].value/c*J/1e3),N="T"+((t.defaults.width-t.xOffset)/2+t.xOffset)+","+t.defaults.height/2+"R"+d+T+"T"+L+","+A,k=t.canvas.text(0,0,C).attr("font","12px Verdana").transform(N).attr("text-anchor",x).attr("fill","#929292"))}},n}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Diff",function(e){var t=e("DataV"),n=t.extend(t.Chart,{type:"Diff",initialize:function(e,t){this.node=this.checkContainer(e),this.defaults.width=900,this.defaults.height=800,this.setOptions(t),this.createCanvas()}});n.prototype.createCanvas=function(){this.canvas=new Raphael(this.node,this.defaults.width,this.defaults.height)},n.prototype.render=function(){this.layout()};var r=function(e,t){var n=[],r=0,i=-1;for(var s=0;s<e.length;s++){var o=_.indexOf(t,e[s]);if(o===-1)continue;o>i&&(i=o,n.push([s,o])),r++}return console.log(n),console.log(n.length/e.length),console.log(r/e.length),n};return n.prototype.setSource=function(e,t){this.rawData=[e,t],this.diffMap=r(e,t)},n.prototype.layout=function(){var e=this,t=e.canvas,n=10,r=10,i=20,s=50,o=(this.defaults.width-2*n-s)/2;for(var u=0,a=this.rawData.length;u<a;u++){var f=_.pluck(this.diffMap,u);for(var l=0,c=this.rawData[u].length;l<c;l++)t.rect(n+u*(o+s),r+i*l,o,i).attr({fill:_.indexOf(f,l)!==-1?"#00ff00":"#ff0000"}),t.text(n+u*(o+s),r+i*l+i/2,this.rawData[u][l]).attr({"text-anchor":"start"})}for(var l=0,c=this.diffMap.length;l<c;l++){var h=this.diffMap[l];t.path("M"+(n+o)+" "+(r+i*h[0]+i/2)+"L"+(n+o+s)+" "+(r+i*h[1]+i/2)).attr({stroke:"#00ff00"})}},n}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Flow",function(e){var t=e("DataV"),n=t.Themes,r=t.extend(t.Chart,{initialize:function(e,t){this.type="Flow",this.node=this.checkContainer(e),this.font={},this.defaults.width=500,this.defaults.height=400,this.defaults.deep=150,this.defaults.radius=50,this.defaults.xStep=300,this.defaults.xStart=200,this.defaults.yStart=50,this.setOptions(t),this.createCanvas()}});return r.prototype.setSource=function(e){var t=this.defaults;this.rawData=e,this.source=this.remapSource(e)},r.prototype.remapSource=function(e){console.log(e);var t=e.length,n=[],r,i;for(i=0;i<t;i++)e[i][3]?n.push({id:e[i][0],name:e[i][1],value:e[i][2],pid:e[i][3],child:[],deep:0}):(r=e[i][2],n.push({id:e[i][0],name:e[i][1],value:e[i][2],pid:e[i][3],child:[],deep:0}));var s=this.defaults,o=s.width,u=s.height,a=s.radius,f=s.xStep,l=s.xStart,c=s.yStart,h=0;for(i=0;i<t;i++)n[i].pid&&(n[i].deep=n[n[i].pid-1].deep+1,n[n[i].pid-1].child.push(n[i].id-1),n[i].deep>h&&(h=n[i].deep));this.depth=h,a=Math.min(Math.min((o-f*(h-1)-l*2)/h,u*.55),a),console.log("r:"+a);for(i=0;i<t;i++)n[i].percent=n[i].value/r,n[i].radius=a*n[i].percent;return n},r.prototype.layout=function(){var e=this.defaults,t=e.width,n=e.height,r=e.xStart,s=e.yStart,o=e.xStep,u=this.source,a=[];a.push({x:t*.24,y:n*.42,radius:Math.max(10,u[0].radius),deep:u[0].deep,name:u[0].name,value:u[0].value}),a.push({x:t*.5,y:n*.245,radius:Math.max(10,u[1].radius),deep:u[1].deep,name:u[1].name,value:u[1].value}),a.push({x:t*.5,y:n*.6,radius:Math.max(10,u[2].radius),deep:u[2].deep,name:u[2].name,value:u[2].value}),a.push({x:t*.72,y:n*.5,radius:Math.max(10,u[3].radius),deep:u[3].deep,name:u[3].name,value:u[3].value}),a.push({x:t*.72,y:n*.817,radius:Math.max(10,u[4].radius),deep:u[4].deep,name:u[4].name,value:u[4].value});for(i=0;i<a.length;i++)console.log(a[i].x);this.circleData=a},r.prototype.getColor=function(){var e=t.getColor();return color},r.prototype.createCanvas=function(){var e=this.defaults;this.canvas=new Raphael(this.node,e.width,e.height),this.DOMNode=$(this.canvas.canvas);var t=this;this.DOMNode.click(function(e){t.trigger("click",e)}),this.DOMNode.dblclick(function(e){t.trigger("dblclick",e)});var n=document.all?"mousewheel":"DOMMouseScroll";this.DOMNode.bind(n,function(e){t.trigger("mousewheel",e)}),this.DOMNode.bind("contextmenu",function(e){t.trigger("contextmenu",e)}),this.DOMNode.delegate("circle","click",function(e){t.trigger("circle_click",e)}),this.DOMNode.delegate("circle","mouseover",function(e){t.trigger("circle_mouseover",e)}),this.DOMNode.delegate("circle","mouseout",function(e){t.trigger("circle_mouseout",e)})},r.prototype.getLinkPath=function(e,t,n,r){var i=this.defaults,s=e+(n-e)/1.5,o=t,u=n-(n-e)/4,a=r-(r-t)/2,f=[["M",e,t],["S",s,o,n,r]];return f},r.prototype.generatePaths=function(){var e=this.canvas,t=this.source,n=this.defaults,r=n.radius,i="微软雅黑",s=8,o=this.depth,u=this.circleData,a=u.length,f=this.getLinkPath;e.path().attr({stroke:"#cdcdcd","stroke-width":2}).attr({path:f(u[0].x,u[0].y,u[1].x,u[1].y)}),e.path().attr({stroke:"#cdcdcd","stroke-width":2}).attr({path:f(u[0].x,u[0].y,u[2].x,u[2].y)}),e.path().attr({stroke:"#cdcdcd","stroke-width":2}).attr({path:f(u[2].x,u[2].y,u[3].x,u[3].y)}),e.path().attr({stroke:"#cdcdcd","stroke-width":2}).attr({path:f(u[2].x,u[2].y,u[4].x,u[4].y)});var l,c,h,p,d=[],v=[];for(l=0;l<a;l++)c=u[l],h=Math.max(27,c.radius),l===1?p="#b4e481":l===4?p="#cd3a19":p="#ffe79d",e.circle(c.x,c.y,h).attr({stroke:"none",fill:p}),d.push(e.text(0,0,c.name).attr({"font-size":12})),l<a-2?d[l].transform("t"+c.x+","+(c.y-h-d[l].getBBox().height/2-5)):d[l].transform("t"+c.x+","+(c.y-h-d[l].getBBox().height/2-5)).attr({"text-anchor":"start"}),l<a-1?v.push(e.text(c.x,c.y,c.value+"人").attr({"font-size":12})):v.push(e.text(c.x,c.y,c.value+"人").attr({fill:"#ffffff","font-size":12}));var m=0,g,y=0,b=e.set(),w=[],E=[],S=this},r.prototype.render=function(e){var t=(new Date).getTime();this.canvas.clear(),this.setOptions(e),this.layout();var n=(new Date).getTime();console.log(n-t),this.generatePaths();var r=(new Date).getTime();console.log(r-n)},r}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Force",function(e){var t=e("DataV"),n=t.extend(t.Chart,{initialize:function(e,t){this.type="Force",this.node=this.checkContainer(e),this.net={},this.linkValeMin=0,this.linkValeMax=1,this.nodeValueMin=0,this.nodeValueMax=1,this.clicked=!1,this.clickedNum=-1,this.legendClicked=!1,this.font={},this.defaults.legend=!0,this.defaults.width=500,this.defaults.height=500,this.defaults.linkLength=50,this.defaults.linkWidth=2,this.defaults.classNum=6,this.defaults.forceValue=10,this.defaults.iterate=100,this.defaults.browserName=navigator.appName,this.setOptions(t),this.defaults.charge=-(this.defaults.width+this.defaults.height)/this.defaults.forceValue,this.legendArea=[20,this.defaults.height-20-this.defaults.classNum*20,200,220],this.defaults.legend?this.xOffset=this.legendArea[2]:this.xOffset=0,this.createCanvas()}});return n.prototype._toNum=function(e){var t=typeof e;return t==="number"?e:t==="string"&&e!==""?parseInt(e,10):1},n.prototype.setSource=function(e){e[0][0]==="Id"&&(e=e.slice(1));var t=[],n=[],r=!0,i,s=this;e.forEach(function(e,o){var u;if(r)if(e[0]==="Source")r=!1,i=o+1;else{if(e[0]==="")throw new Error("ID can not be empty(line:"+(o+1)+").");u=s._toNum(e[2]),t[o]={name:e[1],nodeValue:u},o===0&&(s.nodeValueMin=u,s.nodeValueMax=u),s.nodeValueMin=u<s.nodeValueMin?u:s.nodeValueMin,s.nodeValueMax=u>s.nodeValueMax?u:s.nodeValueMax}else{if(e[0]==="")throw new Error("Source can not be empty(line:"+(o+1)+").");if(e[1]==="")throw new Error("Target can not be empty(line:"+(o+1)+").");u=s._toNum(e[2]),n[o-i]={source:s._toNum(e[0]),target:s._toNum(e[1]),value:s._toNum(e[2])},o===i&&(s.linkValueMin=u,s.linkValueMax=u),s.linkValueMin=u<s.linkValueMin?u:s.linkValueMin,s.linkValueMax=u>s.linkValueMax?u:s.linkValueMax}}),this.net.nodes=t,this.net.links=n,this.nodeValueMax++,this.linkValueMax++},n.prototype.createCanvas=function(){var e=this.defaults;this.canvas=new Raphael(this.node,e.width,e.height)},n.prototype.getColor=function(e){var n=t.getColor(this.classNum);return n[e%n.length][0]},n.prototype.getRadius=function(e){var t=this.defaults;return 16*(e-this.nodeValueMin)/(this.nodeValueMax-this.nodeValueMin)+8},n.prototype.getOpacity=function(e){return.083*(e-this.linkValueMin)/(this.linkValueMax-this.linkValueMin)+.078},n.prototype.update=function(){var e=this,t=this.defaults,n=this.canvas;this.nodes=this.canvas.set(),this.links=this.canvas.set();var r=this.nodes,i=this.links,s,o,u;this.force.charge(t.charge).nodes(this.net.nodes).links(this.net.links).start();var a=this.net.nodes,f=this.net.links,l=a.length,c=f.length,h=[],p=[];t.iterate=(l+c)*2;var d=function(){e.legendClicked=!1,e.underBn.forEach(function(e){e.hide(),e.data("clicked",!1)}),e.clicked=!0,this.data("clicked")?(e.clicked=!1,t.browserName!=="Microsoft Internet Explorer"&&e.force.linkDistance(t.linkLength).charge(t.charge).start(),r.forEach(function(e){e.attr({opacity:.9}),e.data("big")?e.data("showText",!0):(e.data("rect").hide(),e.data("text").hide(),e.data("showText",!1))}),i.forEach(function(e){e.attr({"stroke-opacity":e.data("opacity")})}),this.data("clicked",!1),e.underBn[this.data("colorType")].hide()):(t.browserName!=="Microsoft Internet Explorer"&&e.force.linkDistance(t.linkLength*2).charge(t.charge*2).start(),e.nodes.forEach(function(e){e.data("rect").hide(),e.data("text").hide(),e.attr({opacity:.2}),e.data("clicked",!1),e.data("showText",!1)}),e.links.forEach(function(e){e.attr({"stroke-opacity":0})}),e.clickedNum=this.data("index"),this.data("clicked",!0),this.data("link").forEach(function(e){e.attr({"stroke-opacity":e.data("opacity")})}),this.data("node").forEach(function(e){e.attr({opacity:.9}),e.data("showText",!0)}),e.underBn[this.data("colorType")].data("clicked",!0).attr("opacity",1).show())},v=function(){e.legendClicked=!1,e.underBn.forEach(function(e){e.hide(),e.data("clicked",!1)}),e.clicked=!1,t.browserName!=="Microsoft Internet Explorer"?e.force.linkDistance(t.linkLength).charge(t.charge).start():e.force.resume(),r.forEach(function(e){e.attr({opacity:.9}),e.data("big")?e.data("showText",!0):(e.data("rect").hide(),e.data("text").hide(),e.data("showText",!1))}),i.forEach(function(e){e.attr({"stroke-opacity":e.data("opacity")})})},m=[],g=[],y=10;l<10&&(y=l);for(s=0;s<y;s++)m[s]=a[s].nodeValue,g[s]=s;for(s=0;s<y;s++)for(o=1;o<y-s;o++)m[o]<m[o-1]&&(u=m[o],m[o]=m[o-1],m[o-1]=u,u=g[o],g[o]=g[o-1],g[o-1]=u);for(s=0;s<l;s++){a[s].x=(t.width+this.xOffset)/2,a[s].y=t.height/2;var b=a[s],w=Math.floor(t.classNum*(b.nodeValue-this.nodeValueMin)/(this.nodeValueMax-this.nodeValueMin));w>=t.classNum&&(w=t.classNum-1);var E=this.getRadius(b.nodeValue),S=n.circle(b.x,b.y,E).attr({fill:this.getColor(w),stroke:"#ffffff",opacity:.9}),x=n.text(b.x,b.y-E,b.name).attr({opacity:1,font:"12px Verdana"}).hide(),T=n.rect(b.x,b.y,x.getBBox().width,x.getBBox().height,2).attr({fill:"#000000","stroke-opacity":0,"fill-opacity":.1}).hide();S.data("r",E),S.data("name",b.name),S.data("text",x),S.data("rect",T),S.data("colorType",w),S.data("clicked",!1),S.data("index",s),S.data("big",!1);if(s>=y&&m[0]<a[s].nodeValue){m[0]=a[s].nodeValue,g[0]=s;for(o=1;o<y;o++){if(!(m[o]<m[o-1]))break;u=m[o],m[o]=m[o-1],m[o-1]=u,u=g[o],g[o]=g[o-1],g[o-1]=u}}r.push(S),h[s]=[],p[s]=[],h[s].push(r[s])}for(s=0;s<y;s++)r[g[s]].data("big",!0);for(s=0;s<c;s++){var N=f[s],C=n.path("M"+N.source.x+","+N.source.y+"L"+N.target.x+","+N.target.y).attr({"stroke-width":t.linkWidth,"stroke-opacity":this.getOpacity(N.value)}).toBack();C.data("opacity",this.getOpacity(N.value)),i.push(C),h[N.source.index].push(r[N.target.index]),h[N.target.index].push(r[N.source.index]),p[N.source.index].push(i[s]),p[N.target.index].push(i[s])}var k=n.rect(0,0,t.width,t.height).attr({fill:"#ffffff","stroke-opacity":0}).toBack();k.click(v),r.forEach(function(n,r){n.data("node",h[r]),n.data("link",p[r]),n.data("big")?n.data("showText",!0):n.data("showText",!1),n.drag(function(e,t){n.data("x",this.ox+e),n.data("y",this.oy+t)},function(){e.force.resume(),this.ox=this.attr("cx"),this.oy=this.attr("cy"),n.data("x",this.ox),n.data("y",this.oy),n.data("drag",!0)},function(){e.force.resume(),n.data("drag",!1)}),n.click(d),n.mouseover(function(){t.browserName!=="Microsoft Internet Explorer"&&e.force.resume(),this.attr({r:n.data("r")+5}),this.data("showText")||(this.data("showText",!0),this.data("hover",!0)),e.underBn[this.data("colorType")].data("clicked")||e.underBn[this.data("colorType")].attr("opacity",.5).show()}).mouseout(function(){this.attr({r:n.data("r")}),this.data("hover")&&!this.data("clicked")&&(n.data("rect").hide(),n.data("text").hide(),this.data("showText",!1),this.data("hover",!1)),e.underBn[this.data("colorType")].data("clicked")||e.underBn[this.data("colorType")].hide()})})},n.prototype.legend=function(){var e=this,t=this.defaults,n=this.canvas,r=this.legendArea,s=n.set();this.underBn=[];var o=this.underBn;for(i=0;i<=t.classNum-1;i++){o.push(n.rect(r[0]+10,r[1]+10+23*i,180,20).attr({fill:"#ebebeb",stroke:"none",opacity:1}).data("clicked",!1).hide()),n.rect(r[0]+10+3,r[1]+10+23*i+6,16,8).attr({fill:e.getColor(i),stroke:"none"});var u=Math.floor(this.nodeValueMin+i*(this.nodeValueMax-this.nodeValueMin)/t.classNum),a=Math.floor(u+(this.nodeValueMax-this.nodeValueMin)/t.classNum);n.text(r[0]+10+3+16+8,r[1]+10+23*i+10,u+" ~ "+a).attr({fill:"black","fill-opacity":1,"font-family":"Verdana","font-size":12}).attr({"text-anchor":"start"}),s.push(n.rect(r[0]+10,r[1]+10+23*i,180,20).attr({fill:"white","fill-opacity":0,stroke:"none"})).data("clicked",0)}s.forEach(function(n,r){n.mouseover(function(){o[r].data("clicked")||(o[r].attr("opacity",.5),o[r].show())}).mouseout(function(){o[r].data("clicked")||o[r].hide()}),n.click(function(){e.clicked=!1,t.browserName!=="Microsoft Internet Explorer"&&e.force.linkDistance(t.linkLength).charge(t.charge).start();for(j=0;j<o.length;j++)j===r?o[j].show():o[j].hide();s.forEach(function(e){e!==n&&e.data("clicked",0)}),n.data("clicked")===0?(e.legendClicked=!0,o[r].attr("opacity",1),o[r].data("clicked",!0),o[r].show(),e.nodes.forEach(function(e){e.data("colorType")===r?(e.attr({opacity:.9}),e.data("showText",!0)):(e.attr({opacity:.2}),e.data("rect").hide(),e.data("text").hide(),e.data("showText",!1))}),e.links.forEach(function(e){e.attr({"stroke-opacity":0})}),n.data("clicked",1)):n.data("clicked")===1&&(e.legendClicked=!1,o[r].data("clicked",!1),o[r].hide(),n.data("clicked",0),e.nodes.forEach(function(e){e.attr({opacity:.9}),e.data("big")?e.data("showText",!0):(e.data("rect").hide(),e.data("text").hide(),e.data("showText",!1))}),e.links.forEach(function(e){e.attr({"stroke-opacity":e.data("opacity")})}))})})},n.prototype.layout=function(){var e=this.defaults;this.force=d3.layout.force().linkDistance(e.linkLength).size([e.width+this.xOffset,e.height]).theta(1.5)},n.prototype.animate=function(){var e=this.defaults,t=this.nodes,n=this.links,r=0,i=this,s=this.net.nodes,o=this.net.links;this.force.on("tick",function(){(e.browserName!=="Microsoft Internet Explorer"||r>e.iterate)&&r%2===0&&(t.forEach(function(t,n){var r=t.data("r"),o=s[n];t.data("drag")&&(o.x=t.data("x"),o.y=t.data("y")),o.x=o.x<r+i.xOffset?r+i.xOffset:o.x,o.x=o.x>e.width-r?e.width-r:o.x,o.y=o.y<r?r:o.y,o.y=o.y>e.height-r?e.height-r:o.y;var u=t.data("text").getBBox().width/2,a=t.data("text").getBBox().height/2;if(i.clicked){var f=s[i.clickedNum].x,l=s[i.clickedNum].y,c,h;if(t.data("clicked"))e.browserName!=="Microsoft Internet Explorer"&&(o.x=(e.width+i.xOffset)/2,o.y=e.height/2),t.data("rect").attr({x:o.x-u,y:o.y+t.data("r")}),t.data("text").attr({x:o.x,y:o.y+a+t.data("r")}),t.data("rect").show(),t.data("text").show();else if(t.data("showText")){var p=o.x-f,d=o.y-l,v=Math.sqrt(p*p+d*d);c=o.x+u*p/v,h=o.y+a*d/v,c=o.x<f?c-t.data("r"):c+t.data("r"),h=o.y<l?h-t.data("r"):h+t.data("r"),c=c<r+i.xOffset?r+i.xOffset:c,c=c>e.width-r?e.width-r:c,h=h<r?r:h,h=h>e.height-r?e.height-r:h,t.data("rect").attr({x:c-u,y:h-a}),t.data("text").attr({x:c,y:h}),t.data("rect").show(),t.data("text").show()}}else if(t.data("showText")){t.data("rect").attr({x:o.x-u,y:o.y-a+4+t.data("r")}),t.data("text").attr({x:o.x,y:o.y+4+t.data("r")});try{t.data("rect").show(),t.data("text").show()}catch(m){}}t.attr({cx:o.x,cy:o.y})}),n.forEach(function(e,t){e.attr("path","M"+o[t].source.x+","+o[t].source.y+"L"+o[t].target.x+","+o[t].target.y)})),++r})},n.prototype.render=function(e){this.setOptions(e),this.canvas.clear(),this.layout(),this.defaults.legend&&this.legend(),this.update(),this.animate()},n}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Histogram",function(e){var t=e("DataV"),n=t.extend(t.Chart,{initialize:function(e,t){this.type="Histogram",this.node=this.checkContainer(e),this.defaults={},this.defaults.dimensionX={},this.defaults.demensionY={},this.defaults.allDimensions={},this.defaults.dimensionDomain={},this.defaults.typeNames=[],this.defaults.width=522,this.defaults.height=522,this.defaults.margin=50,this.defaults.gap=15,this.defaults.circleR=3,this.defaults.barColor=["#308BE6","#8EEC00"],this.defaults.legendArea=[422,50,472,220],this.defaults.diagramArea=[50,50,422,472],this.defaults.typeName="undefined",this.defaults.tagDimen="undefined",this.setOptions(t),this.createCanvas()}});return n.prototype.createCanvas=function(){var e=this.defaults;this.node.style.position="relative",this.canvas=new Raphael(this.node,e.width,e.height),this.canvasF=document.getElementById(this.container),this.floatTag=t.FloatTag()(this.canvasF),this.floatTag.css({visibility:"hidden"})},n.prototype.setSource=function(e){var t=this.defaults,n,r,i,s=[],o=[];s=e[0][0],o=e[0][1],t.allDimensions=e[0],t.dimensionX=s,t.dimensionY=o,t.xAxisData=[],this.source=[];var u=t.allDimensions;if(t.typeNames==null){t.typeNames=[];for(n=0,r=e[0].length;n<r;n++)t.typeNames.push(e[0][n])}for(n=1,i=e.length;n<i;n++){for(r=1;r<=t.typeNames.length;r++){var a={};a[u[0]]=n,a[u[1]]=e[n][r],this.source.push(a)}t.xAxisData.push(e[n][0])}var f=function(e,t){return d3.extent(e,function(e){return+e[t]})},l;for(n=0,i=t.allDimensions.length;n<i;n++)l=t.allDimensions[n],t.dimensionDomain[l]=f(this.source,l),t.dimensionDomain[l][0]=0},n.prototype.setAxis=function(){var e=this.defaults,t=e.width/5>50?50:e.width/5;e.legendArea=[e.width-t-e.margin,0,e.width,e.height],e.diagramArea=[0,0,e.width-t-e.margin,e.height];var n=e.diagramArea[2]-2*e.margin,r=e.diagramArea[3]-e.margin;this.x={},this.y={};var i=this.x,s=this.y,o=[5];i[e.dimensionX]=d3.scale.linear().domain(e.dimensionDomain[e.dimensionX]).range([e.margin,n]),i[e.dimensionX].ticks=i[e.dimensionX].ticks.apply(i[e.dimensionX],o),s[e.dimensionY]=d3.scale.linear().domain(e.dimensionDomain[e.dimensionY]).range([r,e.margin]),s[e.dimensionY].ticks=s[e.dimensionY].ticks.apply(s[e.dimensionY],o)},n.prototype.drawDiagram=function(){var e=this,t=this.defaults,n=this.canvas,r=this.x,i=this.y,s,o,u,a,f=n.set(),l=n.set(),c=n.set(),h=t.dimensionX,p=t.dimensionY,d=r[h].range()[0],v=r[h].range()[1],m=i[p].range()[1],g=i[p].range()[0],y,b;ticks=r[h].ticks;for(o=1;o<ticks.length;o++)l.push(n.text(r[h](ticks[o]),g+10,t.xAxisData[ticks[o]-1]).attr({fill:"#878791","fill-opacity":.7,"font-family":"宋","font-size":12}).attr({"text-anchor":"middle"}).rotate(0,r[h](ticks[o]),m)),f.push(n.path("M"+r[h](ticks[o])+","+g+"L"+r[h](ticks[o])+","+(g+5)).attr({stroke:"#D7D7D7","stroke-width":2}));f.push(n.path("M"+d+","+m+"L"+d+","+g).attr({stroke:"#D7D7D7","stroke-width":2})),ticks=i[p].ticks;for(o=0;o<ticks.length;o++)l.push(n.text(d-10,i[p](ticks[o]),ticks[o]).attr({fill:"#878791","fill-opacity":.7,"font-family":"宋","font-size":12}).attr({"text-anchor":"end"}).rotate(0,v+6,i[p](ticks[o]))),f.push(n.path("M"+d+","+i[p](ticks[o])+"L"+(d-5)+","+i[p](ticks[o])).attr({stroke:"#D7D7D7","stroke-width":2}));f.push(n.path("M"+d+","+g+"L"+v+","+g).attr({stroke:"#D7D7D7","stroke-width":2}));var w=d3.round((g-m)/30-1);for(o=1;o<=w;o++)hLinesPos=g-o*30,c.push(n.path("M"+d+","+hLinesPos+"L"+v+","+hLinesPos).attr({stroke:"#ECECEC","stroke-width":1}));var E=8;this.defaults.bars=n.set();var S=n.set(),x=this.defaults.legendArea,T=n.set(),N=[],C,k=function(e){var t=this.data.container,n=this.data.rectBn,r=!1,i=-1,s=this.data.typeNum,o=this.data.seqNum-this.data.seqNum%s,u,a,f,l=t[0].paper,c,h,p,d;for(c=0,h=n.length;c<h;c++)n[c].data.isClicked&&(r=!0,i=c);if(r){if(i!=this.data.seqNum%s)return;for(c=this.data.seqNum%s,h=t.length;c<h;c+=s)t[c].attr({"fill-opacity":.3});t[this.data.seqNum].attr({"fill-opacity":1}),u=t[this.data.seqNum].attrs.x+16,a=t[this.data.seqNum].attrs.y,d=5*t[this.data.seqNum].data.yAxisLabel.length+20,f=l.rect(u,a-10,d,20,2).attr({fill:this.data.color[this.data.seqNum%s],"fill-opacity":1,stroke:"none"}),t.push(f),f=l.path("M"+u+","+(a-4)+"L"+(u-8)+","+a+"L"+u+","+(a+4)+"V"+a+"Z").attr({fill:this.data.color[this.data.seqNum%s],stroke:this.data.color[this.data.seqNum%s]}),t.push(f),f=l.text(u+16,a,t[this.data.seqNum].data.yAxisLabel).attr({fill:"#ffffff","fill-opacity":1,"font-family":"宋","font-weight":"bold","font-size":12,"text-anchor":"middle"}),t.push(f)}else{for(c=0,h=t.length;c<h;c++)c==o?c+=s-1:t[c].attr({"fill-opacity":.3});var v=!1,m=[];for(c=0;c<s;c++)m.push(t[o+c].attrs.y);m.sort();var g=[];for(c=0;c<m.length-1;c++)g.push(m[c+1]-m[c]);g.sort(),g[0]<20&&(v=!0);for(c=0;c<s;c++)u=t[o].attrs.x+8*s+8,a=v?t[o+s-1].attrs.y+20*(s-c-1):t[o+c].attrs.y,d=5*t[o+c].data.yAxisLabel.length+20,f=l.rect(u,a-10,d,20,2).attr({fill:this.data.color[c],"fill-opacity":1,stroke:"none"}),t.push(f),f=l.path("M"+u+","+(a-4)+"L"+(u-8)+","+a+"L"+u+","+(a+4)+"V"+a+"Z").attr({fill:this.data.color[c],stroke:this.data.color[c]}),t.push(f),f=l.text(u+16,a,t[o+c].data.yAxisLabel).attr({fill:"#ffffff","fill-opacity":1,"font-family":"宋","font-weight":"bold","font-size":12,"text-anchor":"middle"}),t.push(f)}u=t[o].attrs.x+4*s,a=t[o].attrs.y+t[o].attrs.height,d=6*this.data.xAxisLabel.length+20,f=l.rect(u-d/2,a+8,d,20,2).attr({fill:"#5f5f5f","fill-opacity":1,stroke:"none"}),t.push(f),f=l.text(u,a+18,this.data.xAxisLabel).attr({fill:"#ffffff","fill-opacity":1,"font-family":"宋","font-weight":"bold","font-size":12,"text-anchor":"middle"}),t.push(f),f=l.path("M"+(u-4)+","+(a+8)+"L"+u+","+a+"L"+(u+4)+","+(a+8)+"H"+u+"Z").attr({fill:"#5F5F5F",stroke:"#5F5F5F"}),t.push(f)},L=function(e){var t=this.data.container,n=this.data.seqNum-this.data.seqNum%2,r=this.data.rectBn,i=!1,s=-1,o=this.data.typeNum,u,a,f,l;for(a=0,f=r.length;a<f;a++)r[a].data.isClicked&&(i=!0,s=a);if(i){if(s!=this.data.seqNum%o)return;for(a=this.data.seqNum%o,f=t.length;a<f;a+=o)t[a].attr({"fill-opacity":1});for(a=0;a<3;a++)u=t.pop(),u.remove()}else{for(a=0,f=t.length;a<f;a++)t[a].attr({"fill-opacity":1});for(a=0,f=o*3;a<f;a++)u=t.pop(),u.remove()}for(a=0;a<3;a++)u=t.pop(),u.remove()};for(s=0,o=this.source.length;s<o;s++)for(u=0,a=t.typeNames.length;u<a;u++)s%a==u&&(C=n.rect(r[h](this.source[s][h])-E*(a/2-s%a),i[p](this.source[s][p]),E,g-i[p](this.source[s][p])).attr({fill:t.barColor[u],"fill-opacity":1,stroke:"none"}),C.data={},C.data.container=S,C.data.seqNum=s,C.data.rectBn=T,C.data.typeNum=t.typeNames.length,C.data.xAxisLabel=t.xAxisData[Math.floor(s/a)],C.data.yAxisLabel=this.source[s][p],C.data.color=t.barColor,C.mouseover(k),C.mouseout(L),S.push(C));var A=function(e){var t=this.data.container,n=this.data.seqNum,r=this.data.rectBn,i=this.data.typeNum,s,o,u;for(s=0,o=r.length;s<o;s++)if(r[s].data.isClicked)return;for(u=0;u<i;u++)if(n%i!=u)for(s=u,o=t.length;s<o;s+=i)t[s].attr({"fill-opacity":.3});this.data.underBn[n].attr({"fill-opacity":.5})},O=function(e){var t=this.data.container,n=this.data.seqNum,r=this.data.rectBn,i=this.data.typeNum,s,o,u;for(s=0,o=r.length;s<o;s++)if(r[s].data.isClicked)return;for(u=0;u<i;u++)if(n%i!=u)for(s=u,o=t.length;s<o;s+=i)t[s].attr({"fill-opacity":1});this.data.underBn[n].attr({"fill-opacity":0})},M=function(e){var t=this.data.container,n=this.data.seqNum,r=!1,i=this.data.underBn,s=this.data.rectBn,o,u=this.data.typeNum,a,f,l;for(a=0,f=s.length;a<f;a++)if(s[a].data.isClicked){r=!0,o=a;break}if(this.data.isClicked){for(a=0;a<u;a++)if(a!=n%u)for(var f=a,c=t.length;f<c;f+=u)t[f].attr({"fill-opacity":.3});this.data.isClicked=!1}else if(!r){for(a=0;a<u;a++)if(a!=n%u)for(f=a,c=t.length;f<c;f+=u)t[f].attr({"fill-opacity":.1});this.data.isClicked=!0}else{i[o].attr({"fill-opacity":0});for(a=o%u,f=t.length;a<f;a+=u)t[a].attr({"fill-opacity":.1});for(a=n%u,f=t.length;a<f;a+=u)t[a].attr({"fill-opacity":1});this.data.rectBn[o].data.isClicked=!1,this.data.isClicked=!0}this.data.underBn[n].attr({"fill-opacity":this.data.isClicked?1:0})};for(s=0;s<t.typeNames.length;s++)N.push(n.rect(x[0]+10,x[1]+10+23*s,180,20).attr({fill:"#ebebeb","fill-opacity":0,stroke:"none"})),C=n.rect(x[0]+10+3,x[1]+10+23*s+6,16,8).attr({fill:t.barColor[s],stroke:"none"}),n.text(x[0]+10+3+16+8,x[1]+10+23*s+10,t.typeNames[s]).attr({fill:"black","fill-opacity":1,"font-family":"Verdana","font-size":12}).attr({"text-anchor":"start"}),C=n.rect(x[0]+10,x[1]+10+23*s,180,20).attr({fill:"white","fill-opacity":0,stroke:"none"}).data("type",s),C.mouseover(A),C.mouseout(O),C.click(M),C.data={},C.data.seqNum=s,C.data.container=S,C.data.rectBn=T,C.data.isClicked=!1,C.data.underBn=N,C.data.typeNum=t.typeNames.length,T.push(C)},n.prototype.render=function(e){this.setOptions(e),this.canvas.clear(),this.setAxis(),this.drawDiagram()},n}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Matrix",function(e){var t=e("DataV"),n=t.Themes,r=t.extend(t.Chart,{initialize:function(e,t){this.type="Matrix",this.node=this.checkContainer(e),this.font={},this.defaults.width=1200,this.defaults.height=1200,this.defaults.axisWidth=40,this.setOptions(t),this.createCanvas(),this.move=!1}});return r.prototype.getDataTable=function(e){var t=e[0];e=e.slice(1);var n=t.length,r=e[0].length,i=e.length;this.tableWidth=r,this.tableHeight=i;if(r!==t.length||i!==t.length)throw new Error("This matrix is not symmetric matrix!!!");return this.tableWidth=r,this.tableHeight=i,this.title=t,e},r.prototype.setSource=function(e){var t=this.defaults;this.source=this.getDataTable(e),this.hasSort=!1},r.prototype.layout=function(){var e=this.defaults,t=e.width,n=e.height,r=this.tableWidth,i=this.tableHeight,s=e.axisWidth;this.cellWidth=Math.min((t-s)/r,(n-s)/i);var o,u,a,f;t>n?(o=(t-n)/2+s,u=s,a=n-s,f=a-s):n>t?(o=s,u=n-t+s,a=t-s):(o=s,u=s,a=t-s,f=a-s),this.startX=o,this.startY=u,this.bRectWidth=a,this.matrixWidth=f},r.prototype.getColor=function(e){var n=t.getColor(),r=n.length,i=e%r,s="#FFFFFF";return i!==0&&(s=n[i][0]),s},r.prototype.createCanvas=function(){var e=this.defaults;this.canvas=new Raphael(this.node,e.width,e.height),this.DOMNode=$(this.canvas.canvas);var t=this;this.DOMNode.click(function(e){t.trigger("click",e),t.update()}),this.DOMNode.dblclick(function(e){t.trigger("dblclick",e)});var n=document.all?"mousewheel":"DOMMouseScroll";this.DOMNode.bind(n,function(e){t.trigger("mousewheel",e)}),this.DOMNode.bind("contextmenu",function(e){t.trigger("contextmenu",e)}),this.DOMNode.delegate("circle","click",function(e){t.trigger("circle_click",e)}),this.DOMNode.delegate("circle","mouseover",function(e){t.trigger("circle_mouseover",e)}),this.DOMNode.delegate("circle","mouseout",function(e){t.trigger("circle_mouseout",e)})},r.prototype.generatePaths=function(){var e=this.canvas,t=this.source,n=this.defaults,r=n.width,i=n.height,s=this.startX,o=this.startY,u=this.cellWidth,a=this.tableWidth,f=this.tableHeight,l=this.bRectWidth,c=this.matrixWidth,h="微软雅黑",p=8,d=this.title,v=[],m=[],g=[],y=e.rect(s,o,l,l);y.attr({fill:"#ffffff",stroke:"none","fill-opacity":.8}),y.toBack();var b;this.hasSort&&(b=this.sort);var w,E,S,x,T,N,C=[];for(w=0;w<f;w++){if(!this.hasSort)S=w;else for(E=0;E<b.length;E++)b[E]===w&&(S=E);var k=e.set();e.path("M"+s+" "+(o+u*w)+"L"+(s+c+10+u)+" "+(o+u*w)).attr({stroke:"#D1D1D1","stroke-width":1}),k.push(e.text(-20,u/2,d[w]).attr({fill:"#000000","fill-opacity":.7,"font-family":"Verdana","font-size":12}));for(E=0;E<a;E++)this.hasSort?T=this.getColor(t[w][b[E]]):T=this.getColor(t[w][E]),N=e.rect(u*E,0,u,u).attr({stroke:"none",fill:T,"fill-opacity":.8}),k.push(N),C.push(N);k.transform("t"+s+", "+(o+u*S)),v.push(k)}e.path("M"+s+" "+(o+u*f)+"L"+(s+c+10+u)+" "+(o+u*f)).attr({stroke:"#D1D1D1","stroke-width":1});for(w=0;w<a;w++){if(!this.hasSort)S=w;else for(E=0;E<b.length;E++)b[E]===w&&(S=E);m.push(e.path("M0 0L0 "+c+10+u).attr({stroke:"#D1D1D1","stroke-width":1}).transform("t"+(s+u*S)+", "+o)),g.push(e.text(u/2,-20,d[w]).attr({fill:"#000000","fill-opacity":.7,"font-family":"Verdana","font-size":12}).transform("t"+(s+u*S)+", "+o+"r90"))}m.push(e.path("M0 0L0 "+c+10+u).attr({stroke:"#D1D1D1","stroke-width":1}).transform("t"+(s+u*a)+", "+o)),this.row=v,this.columnText=g,this.columnLine=m,this.rects=C},r.prototype.getSort=function(e){var t=[],n=[],r,i,s,o,u=[],a,f=[],l,c,h;for(l=0;l<e.length;l++){r=e[l],i=r.length,s=0,a=0;for(c=0;c<i;c++)s+=r[c];o=s/i;for(c=0;c<i;c++)r[c]=r[c]-o,a+=Math.pow(r[c],2);a=Math.sqrt(a),f.push(a),u.push(r)}var p,d,v=[];for(l=0;l<e.length;l++){v[l]=[];for(c=0;c<e.length;c++)v[l][c]=0}for(l=0;l<e.length;l++){p=u[l],v[l][l]=e[l][l];for(c=l+1;c<e.length;c++){s=0,d=u[c];for(h=0;h<i;h++)s+=p[h]*d[h];s/=f[l]*f[c],v[l][c]=s,v[c][l]=s}}return v},r.prototype.update=function(){var e,t,n=[];for(e=0;e<this.source.length;e++)n[e]=this.source[e].concat();var r=[];for(e=0;e<n[0].length;e++)r.push(e);if(this.hasSort)this.sort=r,this.hasSort=!1;else{var i=this.getSort,e,t,s,o=[],u=12;for(e=0;e<u;e++)n=i(n);o=n[0];var a,f;for(e=1;e<r.length;e++){a=r[e];for(t=e+1;t<r.length;t++)f=r[t],o[a]<o[f]&&(s=r[e],r[e]=r[t],r[t]=s)}r=[0,7,5,2,8,3,1,9,6,14,15,4,13,10,16,11,12],this.sort=r,this.hasSort=!0}if(!this.move){this.move=!0;var l=this.rects,c,h=this.startX,p=this.startY,d=this.cellWidth,v,m,g,y;for(e=0;e<r.length;e++)c=r[e],v=Raphael.animation({transform:["t",h,p+d*e]},200,"<>"),this.row[c].animate(v.delay(100*e));var b=this,w=function(){b.move=!1};for(e=0;e<r.length;e++){c=r[e],g=Raphael.animation({transform:["t",h+d*e,p,"r",90]},200,"<>"),this.columnText[c].animate(g.delay(100*(e+r.length+1)));for(t=0;t<r.length;t++)e===r.length-1&&t===r.length-1?y=Raphael.animation({x:d*e},200,"<>",w):y=Raphael.animation({x:d*e},200,"<>"),l[t*r.length+c].animate(y.delay(100*(e+r.length+1)))}}},r.prototype.render=function(e){this.move||(this.canvas.clear(),this.setOptions(e),this.layout(),this.generatePaths())},r}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Parallel",function(e){var t=e("DataV"),n=e("Axis"),r=e("Brush"),i=t.extend(t.Chart,{initialize:function(e,t){this.type="Parallel",this.node=this.checkContainer(e),this.allDimensions=[],this.dimensions=[],this.dimensionType={},this.dimensionDomain={},this.dimensionExtent={},this.defaults.width=750,this.defaults.height=500,this.defaults.marginWidth=[20,20,20,20],this.defaults.backgroundAttr={fill:"none",stroke:"#ccc","stroke-opacity":.4},this.defaults.foregroundAttr={fill:"none",stroke:"steelblue","stroke-opacity":.7},this.defaults.axisStyle={domainAttr:{stroke:"#000"},tickAttr:{stroke:"#000"},tickTextAttr:{}},this.defaults.customEvent={brushstart:function(){},brushend:function(){},brush:function(){}},this.setOptions(t),this.createCanvas()}});return i.prototype.chooseDimensions=function(e){var t=this.defaults;this.dimensions=[];for(var n=0,r=e.length;n<r;n++)$.inArray(e[n],this.allDimensions)!==-1&&this.dimensions.push(e[n])},i.prototype.setDimensionType=function(e){var t=this.defaults,n,r;if(e)for(n in e)if(e.hasOwnProperty(n)&&this.dimensionType[n]){var r=e[n];if(r!=="quantitative"&&r!=="ordinal")throw new Error('Dimension type should be "quantitative" or "ordinal".');this.dimensionType[n]!==r&&(this.dimensionType[n]=r,this._setDefaultDimensionDomain(n))}},i.prototype.getDimensionExtents=function(){return $.extend({},this.dimensionExtent)},i.prototype.setDimensionExtent=function(e){var t=this.defaults,n,r,i,s,o=!1,u=[];if(arguments.length===0)this.dimensionExtent={};else{for(prop in e)if(e.hasOwnProperty(prop)&&this.dimensionType[prop]){s=e[prop];if(!(s instanceof Array))throw new Error("extent should be an array");if(s.length!==2)throw new Error("extent should be an array with two items, for example: [num1, num2]");if(this.dimensionType[prop]==="quantitative")this.dimensionExtent[prop]=s,o=!0,this.brush&&(this.y[prop].brush.extent(s),this.y[prop].brush.refresh());else if(this.dimensionType[prop]==="ordinal"){if(typeof this.dimensionDomain[prop].itemIndex[s[0]]=="undefined"||typeof this.dimensionDomain[prop].itemIndex[s[1]]=="undefined")throw new Error(prop+" does not have value: "+s[0]+" or "+s[1]);o=!0,u=this._getOrdinalExtent(prop,s),this.dimensionExtent[prop]=s,this.brush&&(this.y[prop].brush.extent(u),this.y[prop].brush.refresh())}}o&&this.brush&&this.brush()}},i.prototype.getDimensionTypes=function(){return $.extend({},this.dimensionType)},i.prototype.getDimensionDomains=function(){return $.extend({},this.dimensionDomain)},i.prototype._setOrdinalDomain=function(e){var t=[],n={},r=-1,i=e.length,s;while(++r<i)typeof n[s=e[r]]=="undefined"&&(n[s]=t.push(s)-1);return t.itemIndex=n,t},i.prototype._setDefaultDimensionDomain=function(e){var t=this.defaults;this.dimensionType[e]==="quantitative"?this.dimensionDomain[e]=d3.extent(this.source,function(t){return+t[e]}):this.dimensionDomain[e]=this._setOrdinalDomain(this.source.map(function(t){return t[e]}))},i.prototype.setDimensionDomain=function(e){var t=this.defaults,n,r,i,s;if(arguments.length===0)for(r=0,i=this.allDimensions.length;r<i;r++)n=this.allDimensions[r],this._setDefaultDimensionDomain(n);else for(prop in e)if(e.hasOwnProperty(prop)&&this.dimensionType[prop]){s=e[prop];if(!(s instanceof Array))throw new Error("domain should be an array");if(this.dimensionType[prop]==="quantitative"&&s.length!==2)throw new Error("quantitative's domain should be an array with two items, for example: [num1, num2]");this.dimensionType[prop]==="quantitative"?this.dimensionDomain[prop]=s:this.dimensionType[prop]==="ordinal"&&(this.dimensionDomain[prop]=this._setOrdinalDomain(s))}},i.prototype.on=function(e,t){$.inArray(e,["brushstart","brushend","brush"])!==-1&&(this.defaults.customEvent[e]=t)},i.prototype.setSource=function(e){var n=this.defaults;this.allDimensions=e[0],this.dimensions=e[0],this.source=[];for(var r=1,i=e.length;r<i;r++){var s={},o=this.allDimensions;for(var u=0,a=o.length;u<a;u++)s[o[u]]=e[r][u];this.source.push(s)}this.dimensionType={};for(var r=0,i=this.allDimensions.length;r<i;r++){var f="quantitative";for(var u=1,a=e.length;u<a;u++){var l=e[u][r];if(l&&!t.isNumeric(l)){f="ordinal";break}}this.dimensionType[this.allDimensions[r]]=f}this.setDimensionDomain()},i.prototype.layout=function(){var e=this.defaults,t,n,r,i,s,o=e.marginWidth,u=e.width-o[1]-o[3],a=e.height-o[0]-o[2];this.x=d3.scale.ordinal().rangePoints([0,u],1),this.y={},this.y2={},this.x.domain(d3.range(this.dimensions.length));for(n=0,i=this.dimensions.length;n<i;n++){var f=this.dimensions[n];this.dimensionType[f]==="quantitative"?(this.y[f]=d3.scale.linear().domain(this.dimensionDomain[f]).range([a+o[0],o[0]]),this.y2[f]=d3.scale.linear().domain(this.dimensionDomain[f]).range([a+o[0],o[0]])):(this.y[f]=d3.scale.ordinal().domain(this.dimensionDomain[f]).rangeBands([a+o[0],o[0]]),this.y2[f]=d3.scale.linear().domain([0,this.dimensionDomain[f].length]).range([a+o[0],o[0]]))}},i.prototype.generatePaths=function(){var e=this.defaults,t=n().orient("left").tickAttr(e.axisStyle.tickAttr).tickTextAttr(e.axisStyle.tickTextAttr).domainAttr(e.axisStyle.domainAttr),i=e.marginWidth,s=this.canvas;this.bg=s.set();var o,u;for(o=0,u=this.source.length;o<u;o++){var a=this.source[o];this.bg.push(s.path(this.path(a)))}this.bg.attr(e.backgroundAttr).attr({transform:"t"+i[3]+",0"}),this.fg=s.set();for(o=0,u=this.source.length;o<u;o++){var a=this.source[o];this.fg.push(s.path(this.path(a)))}this.fg.attr(e.foregroundAttr).attr({transform:"t"+i[3]+",0"});var f=this.dimensions;for(o=0,u=f.length;o<u;o++){var l=t.scale(this.y[f[o]])(s);l.push(s.text(0,i[0]-12,f[o]).attr({"text-anchor":"middle"})),l.attr({transform:"t"+(i[3]+this.x.range()[o])+",0"})}var c=Math.min(this.x.range()[1]-this.x.range()[0]-20,16),h=[];this.statistic={},this.statistic.selected=0,this.statistic.all=this.source.length,this.statistic.items={};var p=this;this.brush=function(){var e=p.statistic,t=p.dimensionExtent,n=p.dimensions.filter(function(n){var r=p.y[n].brush.empty();return r?(e.items[n]=-1,t[n]=undefined):e.items[n]=0,!r}),r=n.map(function(e){var t=p.y[e].brush.extent();return p.dimensionType[e]==="quantitative"?p.dimensionExtent[e]=t:p.dimensionExtent[e]=[p.dimensionDomain[e][Math.ceil(t[0]-.5)],p.dimensionDomain[e][Math.floor(t[1]-.5)]],t}),i,s,o,u,a,f,l,c,h;e.selected=0;for(s=0,o=p.fg.length;s<o;s++){f=p.source[s],h=!0;for(i=0,u=n.length;i<u;i++)a=n[i],l=p.dimensionType[a]==="quantitative"?f[a]:p.dimensionDomain[a].itemIndex[f[a]]+.5,c=r[i][0]<=l&&l<=r[i][1],c&&(e.items[a]+=1),c||(h=!1);h?(e.selected+=1,p.fg[s].attr({stroke:"steelblue"})):p.fg[s].attr({stroke:"none"})}p.defaults.customEvent.brush.call(p)},brushstart=function(){p.defaults.customEvent.brushstart.call(p)},brushend=function(){p.defaults.customEvent.brushend.call(p)};var d,v,m,g;for(var o=0,u=f.length;o<u;o++)dimen=f[o],d=r().y(this.y2[dimen]).left(i[3]+this.x.range()[o]-c/2).width(c).backgroundAttr({opacity:0,fill:"white"}).foregroundAttr({opacity:.5,fill:"gray"}).on("brushstart",brushstart).on("brush",this.brush).on("brushend",brushend),typeof this.dimensionExtent[dimen]!="undefined"&&(this.dimensionType[dimen]==="quantitative"?d.extent(this.dimensionExtent[dimen]):d.extent(this._getOrdinalExtent(dimen,this.dimensionExtent[dimen]))),this.y[dimen].brush=d(s);$.isEmptyObject(this.dimensionExtent)||this.brush()},i.prototype._getOrdinalExtent=function(e,t){return start=this.dimensionDomain[e].itemIndex[t[0]],end=this.dimensionDomain[e].itemIndex[t[1]],start>end&&(temp=start,start=end,end=temp),start=Math.max(0,start+.5-.5),end=Math.min(this.dimensionDomain[e].length,end+.5+.5),[start,end]},i.prototype.createCanvas=function(){var e=this.defaults;this.node.style.position="relative",this.canvas=Raphael(this.node,e.width,e.height)},i.prototype.getColor=function(e){var n=t.getColor(),r,i=e?e:{},s=i.mode?i.mode:"default";switch(s){case"gradient":var o=e.index?e.index:0;o=o<0?0:o>n.length-1?n.length-1:o,r=d3.interpolateRgb.apply(null,[n[o][0],n[o][1]]);break;case"random":case"default":var u=i.ratio?i.ratio:0;u<0&&(u=0),u>1&&(u=1);var a=[];for(var f=0,l=n.length;f<l;f++){var c=d3.interpolateRgb.apply(null,[n[f][0],n[f][1]]);a[a.length]=c(u)}r=d3.scale.ordinal().range(a)}return r},i.prototype.render=function(e){this.setOptions(e),this.layout(),this.generatePaths()},i.prototype.path=function(e){var t=d3.svg.line(),n=this.defaults,r=this.y,i=this.x,s=this.dimensions,o=this.dimensionType;return t(s.map(function(t,n){var s=r[t](e[t]);return o[t]==="ordinal"&&(s+=r[t].rangeBand()/2),[i(n),s]}))},i}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Pie",function(e){var t=e("DataV"),n=t.extend(t.Chart,{type:"Pie",initialize:function(e,t){this.node=this.checkContainer(e),this.sum=0,this.groupNames=[],this.groupValue=[],this.groups=[],this.click=0,this.defaults.legend=!0,this.defaults.width=800,this.defaults.height=800,this.setOptions(t),this.legendArea=[20,this.defaults.height-20-220,200,220],this.defaults.legend?this.xOffset=this.legendArea[2]:this.xOffset=0,this.defaults.radius=Math.min(this.defaults.width-this.xOffset,this.defaults.height)*.3,this.defaults.protrude=this.defaults.radius*.1,this.createCanvas()}});return n.dimension={},n.dimension.label={type:"string",required:!1},n.dimension.value={type:"number",required:!0},n.prototype.createCanvas=function(){this.canvas=new Raphael(this.node,this.defaults.width,this.defaults.height);var e=this.node.style;e.position="relative",this.floatTag=t.FloatTag()(this.node),this.floatTag.css({visibility:"hidden"})},n.prototype.getColor=function(e){var n=t.getColor();return n[e%n.length][0]},n.prototype.render=function(){var e=this.defaults,t=this.floatTag,n=this;this.layout();var r=this.groups,i=d3.svg.arc().innerRadius(e.radius).outerRadius(0).startAngle(function(e){return e.startAngle}).endAngle(function(e){return e.endAngle}),s,o,u;n.donutGroups=n.canvas.set(),$(this.node).append(this.floatTag);var a=function(){t.html('<div style="text-align:center;margin:auto;color:#ffffff">'+this.data("text")+"</div>"),t.css({visibility:"visible"});var e=this.data("donutIndex");this.data("click")||n.underBn[e].attr("opacity",.5).show(),n.click===0&&n.donutGroups.forEach(function(t){e!==t.data("donutIndex")&&t.attr("fill-opacity",.5)}),this.attr("fill-opacity",1)},f=function(){t.css({visibility:"hidden"});var e=this.data("donutIndex");this.data("click")||n.underBn[e].hide(),n.click===0?n.donutGroups.forEach(function(e){e.attr("fill-opacity",1)}):this.data("click")||this.attr("fill-opacity",.5)},l=function(){var t=this.data("donutIndex"),r=!this.data("click");this.data("click",r);var i=.5*(n.groups[t].startAngle+n.groups[t].endAngle-Math.PI),s=e.protrude*Math.cos(i),o=e.protrude*Math.sin(i);r?(n.click===0&&n.donutGroups.forEach(function(e){e.data("click")||e.attr("fill-opacity",.5)}),n.underBn[t].attr("opacity",1).show(),this.attr("fill-opacity",1),this.data("nameTag").translate(0,-e.protrude),this.data("line").translate(0,-e.protrude),this.translate(s,o),n.click+=1):(this.data("nameTag").translate(0,e.protrude),this.data("line").translate(0,e.protrude),this.translate(-s,-o),n.click-=1,n.click>0&&this.attr("fill-opacity",.5))},c,h,p,d,v,m;for(c=0;c<=r.length-1;c++){o=i(r[c]),u=n.groupNames[c]+": "+Math.round(r[c].value)+" "+(r[c].value*100/this.sum).toFixed(2)+"%",s=n.canvas.path(o).translate((e.width-this.xOffset)/2+this.xOffset,e.height/2).data("donutIndex",c).attr({path:o,fill:n.getColor(c),stroke:"#ffffff"}).mouseover(a).mouseout(f).click(l),v=(r[c].startAngle+r[c].endAngle)*90/Math.PI,m=.5*(r[c].startAngle+r[c].endAngle-Math.PI),p=(e.radius+2*e.protrude)*Math.cos(m),d=(e.radius+2*e.protrude)*Math.sin(m),h="T"+((e.width-n.xOffset)/2+n.xOffset)+","+e.height/2+"R"+v+"T"+p+","+d;var g=n.canvas.path("M,0,-"+e.protrude+"L0,"+e.protrude).transform(h).translate(0,e.protrude+9),y=n.canvas.text().attr("font","18px Verdana").attr("text",n.groupNames[c]).transform(h);s.data("text",u).data("click",!1).data("nameTag",y).data("line",g),n.donutGroups.push(s)}e.legend&&this.legend()},n.prototype.legend=function(){var e=this,t=this.defaults,n=this.canvas,r=this.legendArea;this.rectBn=n.set();var i=this.rectBn;this.underBn=[];var s=this.underBn;for(var o=0,u=this.groups.length;o<u;o++)s.push(n.rect(r[0]+10,r[1]+10+23*o,180,20).attr({fill:"#ebebeb",stroke:"none"}).hide()),n.rect(r[0]+10+3,r[1]+10+23*o+6,16,8).attr({fill:this.getColor(o),stroke:"none"}),n.text(r[0]+10+3+16+8,r[1]+10+23*o+10,this.groupNames[o]).attr({fill:"black","fill-opacity":1,"font-family":"Verdana","font-size":12,"text-anchor":"start"}),i.push(n.rect(r[0]+10,r[1]+10+23*o,180,20).attr({fill:"white","fill-opacity":0,stroke:"none"}));i.forEach(function(n,r){n.mouseover(function(){e.donutGroups[r].data("click")||(s[r].attr("opacity",.5),s[r].show())}).mouseout(function(){e.donutGroups[r].data("click")||s[r].hide()}),n.click(function(){var n=.5*(e.groups[r].startAngle+e.groups[r].endAngle-Math.PI),i=t.protrude*Math.cos(n),o=t.protrude*Math.sin(n);e.donutGroups[r].data("click")?e.donutGroups[r].data("click")&&(e.donutGroups[r].data("nameTag").translate(0,t.protrude),e.donutGroups[r].data("line").translate(0,t.protrude),e.donutGroups[r].translate(-i,-o),e.click-=1,e.click>0?e.donutGroups[r].attr("fill-opacity",.5):e.donutGroups.forEach(function(e){e.attr("fill-opacity",1)}),s[r].hide(),e.donutGroups[r].data("click",!1)):(e.click===0&&e.donutGroups.forEach(function(e){e.data("click")||e.attr("fill-opacity",.5)}),s[r].attr("opacity",1).show(),e.donutGroups[r].data("click",!0).attr("fill-opacity",1),e.donutGroups[r].data("nameTag").translate(0,-t.protrude),e.donutGroups[r].data("line").translate(0,-t.protrude),e.donutGroups[r].translate(i,o),e.click+=1)})})},n.prototype.setSource=function(e){this.groupNames=_.pluck(e,0),this.groupValue=_.pluck(e,1).map(function(e){return parseFloat(e)})},n.prototype.layout=function(){var e=this;e.canvas.clear();var n=0;this.sum=t.sum(this.groupValue);var r=this.sum;this.groups=this.groupValue.map(function(e,t){var i=2*n*Math.PI/r;n+=e;var s=2*n*Math.PI/r,o={index:t,value:e,startAngle:i,endAngle:s};return o})},n}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("ScatterplotMatrix",function(e){var t=e("DataV"),n=e("Brush"),r=t.extend(t.Chart,{initialize:function(e,t){this.type="ScatterplotMatrix",this.node=this.checkContainer(e),this.defaults.allDimensions=[],this.defaults.dimensionsX=[],this.defaults.demensionsY=[],this.defaults.dimensionDomain={},this.defaults.typeNames=[],this.defaults.width=522,this.defaults.height=522,this.defaults.margin=50,this.defaults.gap=15,this.defaults.squareWidth=150,this.defaults.circleR=3,this.defaults.legendArea=[20,this.defaults.height-20-220,200,220],this.defaults.introArea=[20,20,200,200],this.defaults.diagramArea=[240,20,this.defaults.width-260,this.defaults.height-40],this.defaults.typeName="NoTypeDefinition",this.defaults.legendDimen="NoTagDimen",this.setOptions(t),this.createCanvas()}});return r.prototype.setDimensionsX=function(e){if(!e)throw new Error("Please specify the dimensions.");var t=this.defaults;t.dimensionsX=[];var n=0,r=0;for(n=0,r=e.length;n<r;n++)_.indexOf(t.allDimensions,e[n])!==-1&&t.dimensionsX.push(e[n])},r.prototype.setDimensionsY=function(e){if(!e)throw new Error("Please specify the dimensions.");var t=this.defaults;t.dimensionsY=[];var n=0,r=0;for(n=0,r=e.length;n<r;n++)_.indexOf(t.allDimensions,e[n])!==-1&&t.dimensionsY.push(e[n])},r.prototype.setTypeName=function(e){this.defaults.typeNames=e},r.prototype.setSource=function(e){var t,n,r,i,s=this.defaults,o=[],u=[];for(t=1;t<e[0].length;t++)o[t-1]=e[0][t],u[t-1]=e[0][t];s.allDimensions=e[0],s.dimensionsX=o,s.dimensionsY=u,this.source=[];for(t=1,r=e.length;t<r;t++){var a={},f=s.allDimensions;for(n=0,i=f.length;n<i;n++)a[f[n]]=e[t][n];this.source.push(a)}var l=function(e,t){return d3.extent(e,function(e){return+e[t]})},c;for(t=0,r=s.allDimensions.length;t<r;t++)c=s.allDimensions[t],s.dimensionDomain[c]=l(this.source,c)},r.prototype.setAxis=function(){var e=this.defaults;e.legendArea=[20,e.height-20-220,200,220],e.introArea=[20,20,200,200],e.diagramArea=[240,20,e.width-260,e.height-40];var t=e.diagramArea[2]-2*e.margin,n=e.diagramArea[3]-e.margin,r=e.gap,i=e.dimensionsX.length,s=e.dimensionsY.length,o=d3.round((t-(i-1)*r)/i),u=d3.round((n-(s-1)*r)/s),a=d3.min([o,u]);this.defaults.squareWidth=a,this.defaults.dX=e.dimensionsX[0],this.defaults.dY=e.dimensionsY[0],this.x={},this.y={};var f=this.x,l=this.y,c=[5],h,p,d,v,m;for(h=0,p=e.dimensionsX.length;h<p;h++)d=e.dimensionsX[h],v=h*(a+r)+e.diagramArea[0]+30,m=v+a,f[d]=d3.scale.linear().domain(e.dimensionDomain[d]).range([v,m]),f[d].ticks=f[d].ticks.apply(f[d],c);for(h=0,p=e.dimensionsY.length;h<p;h++)d=e.dimensionsY[h],m=h*(a+r)+e.diagramArea[1]+30,v=m+a,l[d]=d3.scale.linear().domain(e.dimensionDomain[d]).range([v,m]),l[d].ticks=l[d].ticks.apply(l[d],c)},r.prototype.drawDiagram=function(){var e,t,r,i,s,o=this.defaults,u=this.x,a=this.y,f=o.squareWidth,l=o.gap,c=o.circleR,h=this.canvas,p=this.source,d=o.dimensionsX,v=o.dimensionsY,m=d.length,g=v.length,y=navigator.appName,b=this;$(this.node).append(this.floatTag);var w=h.set(),E;if(y!=="Microsoft Internet Explorer")for(r=0;r<p.length;r++)for(e=0;e<m;e++)for(t=0;t<g;t++)E=this.circleCenter(r,d[e],v[t]),w.push(h.circle(E[0],E[1],c).attr({fill:"gray",stroke:"none",opacity:.2}));var S=h.set(),x,T;for(e=0;e<m;e++)for(t=0;t<g;t++)x=u[d[e]].range()[0],T=a[v[t]].range()[1],S.push(h.rect(x-1,T-1,f+2,f+2));S.attr({fill:"white","fill-opacity":.5,stroke:"#d6d6d6","stroke-width":"1px"});var N=h.set(),C=h.set(),k=[10],L=u[d[0]].range()[0],A=u[d[m-1]].range()[1],O=a[v[0]].range()[1],M=a[v[g-1]].range()[0],_=f/7,D;for(e=0;e<m;e++){s=u[d[e]].ticks;for(t=0;t<s.length;t++)C.push(h.text(u[d[e]](s[t]),M+6,s[t]).attr({fill:"#aaaaaa","fill-opacity":.7,"font-family":"雅黑","font-size":12}).attr({"text-anchor":"end"}).rotate(-45,u[d[e]](s[t]),M+6));for(i=1;i<7;i++)D=u[d[e]].range()[0]+i*_,N.push(h.path("M"+D+","+O+"L"+D+","+M).attr({stroke:"#ebebeb","stroke-dasharray":"-"}))}for(e=0;e<g;e++){s=a[v[e]].ticks;for(t=0;t<s.length;t++)C.push(h.text(A+6,a[v[e]](s[t]),s[t]).attr({fill:"#aaaaaa","fill-opacity":.7,"font-family":"雅黑","font-size":12}).attr({"text-anchor":"start"}).rotate(315,A+6,a[v[e]](s[t])));for(i=1;i<7;i++)D=a[v[e]].range()[1]+i*_,N.push(h.path("M"+L+","+D+"L"+A+","+D).attr({stroke:"#ebebeb","stroke-dasharray":"-"}))}var P=h.set(),H,B,j=a[v[0]].range()[1]-10;for(e=0;e<m;e++)H=u[d[e]].range()[0]+f/2,P.push(h.text(H,j,d[e]).attr({fill:"#000000","fill-opacity":.7,"font-family":"Verdana","font-size":12}).attr({"text-anchor":"middle"}));j=u[d[0]].range()[0]-10;for(e=0;e<g;e++)B=a[v[e]].range()[1]+f/2,P.push(h.text(j,B,v[e]).attr({fill:"#000000","fill-opacity":.7,"font-family":"Verdana","font-size":12}).attr({"text-anchor":"middle"}).rotate(-90,j,B));var F=[],I=-1,q=-1;this.preIndex="start",this.linePosition=[0,0],b.lineH=h.path("M"+L+","+0+"L"+A+","+0).attr({"stroke-dasharray":"- ",stroke:"#000000"}).hide(),b.lineV=h.path("M0,"+O+"L"+0+","+M).attr({"stroke-dasharray":"- ",stroke:"#000000"}).hide();var R,U;for(r=0;r<p.length;r++){o.typeName!=="NoTypeDefinition"?(I=p[r][o.typeName]-1,q=Math.max(q,I)):I=0;for(e=0;e<m;e++)for(t=0;t<g;t++)E=this.circleCenter(r,d[e],v[t]),U=h.circle(E[0],E[1],c).data("type",I).data("canHover",0).data("position",E).data("colorType",I).attr({fill:"#800",stroke:"none",opacity:.5}).attr({fill:this.getColor(I)}),o.legendDimen!=="NoTagDimen"&&(R=o.legendDimen+": "+p[r][o.legendDimen],U.data("legend",R)),F.push(U)}var z=this.defaults.legendArea,W=h.set(),X=[];for(e=0;e<=q;e++)X.push(h.rect(z[0]+10,z[1]+10+23*e,180,20).attr({fill:"#ebebeb",stroke:"none"}).hide()),h.rect(z[0]+10+3,z[1]+10+23*e+6,16,8).attr({fill:this.getColor(e),stroke:"none"}),h.text(z[0]+10+3+16+8,z[1]+10+23*e+10,o.typeNames[e]).attr({fill:"black","fill-opacity":1,"font-family":"Verdana","font-size":12}).attr({"text-anchor":"start"}),W.push(h.rect(z[0]+10,z[1]+10+23*e,180,20).attr({fill:"white","fill-opacity":0,stroke:"none"}).data("type",e)).data("clicked",0);if(y!=="Microsoft Internet Explorer"){W.forEach(function(e,n){X[n].data("legendclicked",!1),e.mouseover(function(){X[n].data("legendclicked")===!1&&X[n].attr("opacity",.5).show()}).mouseout(function(){X[n].data("legendclicked")===!1&&X[n].hide()}),e.click(function(){for(t=0;t<X.length;t++)t===n?X[t].show():X[t].hide();W.forEach(function(t){t!==e&&t.data("clicked",0)}),e.data("clicked")===0?(X[n].attr("opacity",1).show(),X[n].data("legendclicked",!0),F.forEach(function(t){t.data("type")!==e.data("type")?(t.hide(),t.data("canHover",0)):(t.show(),t.data("canHover",1))}),e.data("clicked",1)):e.data("clicked")===1&&(X[n].hide(),X[n].data("legendclicked",!1),e.data("clicked",0),F.forEach(function(e){e.show(),e.data("canHover",0)}))})});var V;function J(){V!==undefined&&V!==d3.event.target&&V.clear();var e;for(e=0;e<F.length;e++)F[e].hide(),F[e].data("canHover",0);X.forEach(function(e){e.hide()}),W.forEach(function(e){e.data("clicked",0)})}function K(){V=d3.event.target;var e=V.extent(),t=d3.event.target.dimX,n=d3.event.target.dimY,r,i,s=m*g,o,u;for(o=0;o<p.length;o++){r=p[o][t],i=p[o][n];if(e[0][0]-1<=r&&r<=e[1][0]+1&&e[0][1]-1<=i&&i<=e[1][1]+1)for(u=0;u<s;u++)F[o*s+u].show();else for(u=0;u<s;u++)F[o*s+u].hide()}}function Q(){d3.event.target.empty()&&F.forEach(function(e){e.show()})}var G=[],Y;for(e=0;e<m;e++)for(t=0;t<g;t++)Y=n().x(u[d[e]]).y(a[v[t]]).backgroundAttr({opacity:0,fill:"white"}).foregroundAttr({opacity:.2,fill:"#fff700"}).on("brushstart",J).on("brush",K).on("brushend",Q),Y(h),Y.dimX=d[e],Y.dimY=v[t],G.push(Y);var Z=this.floatTag;$(h.canvas).bind("mousemove",function(t){var n=$(this).parent().offset(),r=[t.pageX-n.left,t.pageY-n.top],i=[Math.floor((r[0]-L)/(f+l)),Math.floor((r[1]-O)/(f+l))];b.preIndex!=="start"&&(b.lineV.hide(),b.lineH.hide(),o.legendDimen!=="NoTagDimen"&&Z.css({visibility:"hidden"}));if(i[0]>=0&&i[0]<=m&&i[1]>=0&&i[1]<=g)for(e=i[0]*g+i[1];e<F.length;e+=m*g){var s=F[e].data("position"),u=F[e].data("canHover");if(u===1&&Math.abs(r[0]-s[0])<=c&&Math.abs(r[1]-s[1])<=c){b.lineV.translate(s[0]-b.linePosition[0],0).attr("stroke",b.getColor(F[e].data("colorType"))).show(),b.lineH.translate(0,s[1]-b.linePosition[1]).attr("stroke",b.getColor(F[e].data("colorType"))).show(),b.linePosition=s,o.legendDimen!=="NoTagDimen"&&(Z.html('<div style="text-align: center;margin:auto;color:#ffffff">'+F[e].data("legend")+"</div>"),Z.css({visibility:"visible"})),b.preIndex=e;break}}})}},r.prototype.createCanvas=function(){var e=this.defaults;this.node.style.position="relative",this.canvas=new Raphael(this.node,e.width,e.height),this.floatTag=t.FloatTag()(this.node),this.floatTag.css({visibility:"hidden"})},r.prototype.getColor=function(e){var n=t.getColor();return n[e%n.length][0]},r.prototype.render=function(e){this.setOptions(e),this.canvas.clear(),this.setAxis(),this.drawDiagram()},r.prototype.circleCenter=function(e,t,n){var r=this.defaults,i=this.source,s=this.y,o=this.x,u=r.dimensionsX,a=r.dimensionsY,f=r.dimensionType,l=o[t](i[e][t]),c=s[n](i[e][n]);return[l,c]},r}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Stream",function(e){var t=e("DataV"),n=e("Axis"),r=t.extend(t.Chart,{initialize:function(e,t){this.type="Stream",this.node=this.checkContainer(e),this.level=0,this.defaults.offset="zero",this.defaults.order="default",this.defaults.columnNameUsed="auto",this.defaults.rowNameUsed="auto",this.defaults.topInterval=0,this.defaults.bottomInterval=0,this.defaults.legend=!0,this.defaults.axis=!0,this.defaults.pathLabel=!0,this.defaults.fontSize=12,this.defaults.heightWidthRatio=.618,this.defaults.indexMargin=3,this.userConfig={more:!0,max:20,other:.1},this.timeRange=[],this.defaults.width=750,this.defaults.height=360,this.defaults.totalWidth=820,this.defaults.naviBackWidth=80,this.defaults.legendHeight=50,this.defaults.legendWidth=150,this.defaults.legendIndent=21,this.defaults.axisHeight=30,this.defaults.margin=[0,40,0,40],this.defaults.customEventHandle={mousemove:null},this.defaults.testMakeup=!1,this.defaults.testDays=30,this.defaults.testDataType=0,this.setOptions(t),this.createCanvas()}});return r.dimension={},r.dimension.stream={type:"string",required:!0},r.dimension.stack={type:"string",required:!0},r.dimension.value={type:"number",required:!0},r.prototype.createCanvas=function(){var e=this.defaults,n=document.createElement("div"),r,i,s,o,u,a,f,l;this.node.style.position="relative",this.node.style.width=e.totalWidth+"px",this.legend=document.createElement("div"),$(this.legend).css({overflow:"hidden",width:e.legendWidth-e.legendIndent+"px",padding:"10px 0 10px 0"}),this.navi=document.createElement("div"),$(this.navi).css({"border-top":"1px solid #ddd","border-bottom":"1px solid #ddd","padding-top":"5px","padding-bottom":"10px","padding-left":"10px","padding-right":"10px",font:e.fontSize+1+"px 宋体"}),this.naviTrace=document.createElement("div"),$(this.naviTrace).css({width:e.totalWidth-e.naviBackWidth-50+"px","margin-top":"5px"}),this.naviBack=document.createElement("div"),this.naviBack.innerHTML="返回上层",$(this.naviBack).css({width:e.naviBackWidth+"px","float":"right","background-color":"#f4f4f4","padding-top":"4px","padding-bottom":"4px",border:"1px solid #ddd","border-radius":"2px",cursor:"pointer","text-align":"center",visibility:"hidden"}),this.navi.appendChild(this.naviBack),this.navi.appendChild(this.naviTrace),this.percentage=document.createElement("div"),this.userConfig.more&&(this.percentagePaper=new Raphael(this.percentage,e.margin[3],e.height)),u=this.percentage.style,u.width=e.margin[3]+"px",u.height=e.height+"px",$(this.percentage).css({"float":"left","margin-bottom":"0px","border-bottom":"0px","padding-bottom":"0px"}),this.canvasContainer=document.createElement("div"),$(this.canvasContainer).css({"float":"left",width:e.width+"px","margin-bottom":"0px","border-bottom":"0px","padding-bottom":"0px"}).append($(n).css({position:"relative"})),this.canvas=new Raphael(n,e.width,e.height),$(this.canvasContainer).height(e.height),this.floatTag=t.FloatTag()(n),this.floatTag.css({visibility:"hidden"}),this.cover=document.createElement("div"),r=this.cover.style,r.position="absolute",r.width=e.width+"px",r.height=e.height+"px",r.zIndex=100,r.visibility="hidden",$(this.cover).bind("mousemove",{stream:this},function(e){var t=e.data.stream;t.coverMouse={x:e.pageX,y:e.pageY}}),$(this.cover).bind("mouseleave",{stream:this},function(e){var t=e.data.stream;t.coverMouse=undefined}),this.axis=document.createElement("div"),this.axisPaper=new Raphael(this.axis,e.totalWidth-e.legendWidth,e.axisHeight),$(this.axis).css({"margin-top":"0px","border-top":"1px solid #ddd",height:e.axisHeight+"px"}),this.leftContainer=document.createElement("div"),this.rightContainer=document.createElement("div"),this.leftContainer.appendChild(this.legend),this.rightContainer.appendChild(this.navi),this.middleContainer=document.createElement("div"),$(this.middleContainer).css("height",e.height),this.middleContainer.appendChild(this.percentage),this.middleContainer.appendChild(this.canvasContainer),this.middleContainer.appendChild(this.cover),$(this.canvasFatherContainer).append(this.floatTag),this.rightContainer.appendChild(this.middleContainer),this.rightContainer.appendChild(this.axis),this.node.appendChild(this.rightContainer),this.node.appendChild(this.leftContainer),$(this.rightContainer).css({"float":"right",width:e.totalWidth-e.legendWidth}),$(this.leftContainer).css({width:e.legendWidth-4+"px","overflow-x":"hidden"}),l=function(e){e.cover.style.visibility="visible",e.coverMouse=undefined,e.getLevelSource(),e.reRender(),e.indicatorLine.attr({stroke:"none"}),e.highlightLine.attr({stroke:"none"}),e.floatTag.css({visibility:"hidden"}),e.paths.forEach(function(t,n,r){t.attr({transform:"s1,0.001,0,0"}),t.label.hide(),t.animate({transform:"t0,0"},750,"linear",function(){e.cover.style.visibility="hidden",typeof e.coverMouse!="undefined"&&(e.indicatorLine.attr({stroke:"#000"}),e.highlightLine.attr({stroke:"white"}),e.floatTag.css({visibility:"visible"}),$(e.canvas.canvas).trigger("mousemove",[e.coverMouse.x,e.coverMouse.y]),e.coverMouse=undefined),t.labelLoc.showLabel&&t.label.show()})})},$(this.naviTrace).on("click",".navi",{stream:this},function(e){var t=e.data.stream;t.level=e.target.data.level,l(t)}),$(this.naviBack).on("click",{stream:this},function(e){var t=e.data.stream;t.level-=1,l(t)})},r.prototype.setOptions=function(e){_.extend(this.defaults,e),e&&e.width&&(this.defaults.totalWidth=this.defaults.width,this.defaults.width=this.defaults.totalWidth-this.defaults.margin[1]-this.defaults.margin[3]-this.defaults.legendWidth,e.height?this.defaults.autoHeight=!1:(this.defaults.autoHeight=!0,this.defaults.height=this.defaults.width*this.defaults.heightWidthRatio))},r.prototype.hasRowName=function(){var e,n,r=[],i=this.rawData;if(typeof this.defaults.rowNameUsed=="boolean")return this.defaults.rowNameUsed;for(e=1,n=i.length;e<n;e++)r[e]=i[e][0];return!r.every(t.isNumeric)},r.prototype.hasColumnName=function(){var e;return typeof this.defaults.columnNameUsed=="boolean"?this.defaults.columnNameUsed:(e=this.rawData[0].slice(1),!e.every(t.isNumeric))},r.prototype.sort=function(e){var t,n,r,i,s=[],o=[],u=[],a=[],f=this;for(n=0,i=e[0].length;n<i;n++)o[n]=0;for(t=0,r=e.length;t<r;t++){s[t]=0;for(n=0,i=e[0].length;n<i;n++)s[t]+=e[t][n],o[n]+=e[t][n];s[t]=[s[t]],s[t].index=t}s.sort(function(e,t){return t[0]-e[0]}),s.forEach(function(t,n){u[n]=e[t.index],f.rowName&&(a[n]=f.rowName[t.index])});for(t=0,r=s.length;t<r;t++)s[t]=s[t][0];return this.rowName=a,this.rowSum=s,this.columnSum=o,this.total=d3.sum(this.rowSum),u},r.prototype.mergeOther=function(e){},r.prototype.getDigitData=function(e){var n=this.defaults,r=e[0],i,s,o,u,a,f;i=e.map(function(e){return e[0]});if(this.hasRowName())this.hasColumnName()?(this.rowName=i.slice(1),this.columnName=r.slice(1),s=e.map(function(e){return e.slice(1)}).slice(1)):(this.rowName=i,this.columnName=undefined,s=e.map(function(e){return e.slice(1)}));else if(this.hasColumnName())this.rowName=undefined,this.columnName=r,s=e.slice(1);else{if(n.columnNameUsed==="auto"&&n.rowNameUsed==="auto"&&!t.isNumeric(e[0][0]))throw new Error("Please specify whether there are column names or row names");this.rowName=undefined,this.columnName=undefined,s=e}for(o=0,a=s.length;o<a;o++)for(u=0,f=s[0].length;u<f;u++)s[o][u]=parseFloat(s[o][u]);return s},r.prototype.getInfo=function(){var e=[],t,n,r,i,s,o,u,a=this.digitData,f=function(e,t){return t.value-e.value};for(t=0,r=this.digitData.length;t<r;t++)s=e[t]=[],s.ratio=this.rowSum[t]/this.total,s.value=this.rowSum[t],s.name=this.rowName[t],s.id=t;for(t=0,r=a.length;t<r;t++){u=[];for(n=0,i=a[0].length;n<i;n++)e[t][n]=u[n]={date:this.columnName[n],id:t,name:e[t].name,tip:"<b>"+e[t].name+"</b><br/>占比:"+Math.round(a[t][n]/this.columnSum[n]*1e4)/100+"%<br/>",total:e[t].ratio,value:a[t][n],index:n,rowInfo:e[t],ratio:a[t][n]/this.columnSum[n]};u.sort(f);for(n=0,i=u.length;n<i;n++)u[n].rank=n}return e},r.prototype.setSource=function(e){this.rawData=e,this.digitData=this.getDigitData(this.rawData),this.date=e[0].slice(1,e[0].length),this.timeRange=[0,this.date.length-1],this.digitData=this.sort(this.digitData),this.allInfos=this.getInfo(this.digitData),this.level=0,this.getLevelSource(),this.canAnimate=!1},r.prototype.setTimeRange=function(e,t,n){var r,i;n?(r=_.indexOf(this.date,e),i=_.indexOf(this.date,t)):(r=e,i=t);var s=Math.min(r,i),o=Math.max(r,i);if(s===o)throw new Error("start index and end index can not be same.");if(s<0||o>this.date.length-1)throw new Error("start index or end index is beyond the time range.");this.timeRange=[s,o],this.getLevelSource()},r.prototype.getDataByTimeRange=function(){if(this.timeRange[0]===0&&this.timeRange[1]===this.date.length-1)return this.digitData;var e=this.timeRange;return _.map(this.digitData,function(t,n){return t.slice(e[0],e[1]+1)})},r.prototype.getLevelSource=function(){var e=this.getDataByTimeRange(),t=this.level*(this.userConfig.max-1),n,r,i=e[0].length,s=[],o,u,a,f,l,c,h,p=[],d=[];if(i<1)throw new Error("Data source is empty.");this.userConfig.more?t+this.userConfig.max>=e.length?t+this.userConfig.max===e.length&&this.allInfos[e.length-1][0].id===-2?(n=t+this.userConfig.max-1,r=!0):(n=e.length,r=!1):(n=t+this.userConfig.max-1,r=!0):(t=0,n=e.length,r=!1);for(o=t;o<n;o++){a=o-t,s[a]=[];for(u=0;u<i;u++)s[a][u]={},s[a][u].x=u,s[a][u].y=parseFloat(e[o][u]);this.timeRange[0]===0&&this.timeRange[1]===this.date.length-1?p[a]=this.allInfos[o]:p[a]=this.allInfos[o].slice(this.timeRange[0],this.timeRange[1]+1)}if(r){if(t+this.userConfig.max===e.length&&this.allInfos[e.length-1][0].id===-2){var v=e[e.length-1];l=[];for(u=0;u<i;u++)l[u]={},l[u].x=u,l[u].y=v[u];d=this.allInfos[e.length-1]}else{l=[];for(u=0;u<i;u++){c=0,h=0;for(f=e.length-1;f>=n;f--)c+=parseFloat(e[f][u]),h+=parseFloat(this.allInfos[f][u].total);l[u]={},l[u].x=u,l[u].y=c,d[u]={date:this.allInfos[0][u].date,id:-1,name:"更多",tip:"<b>更多</b><br/>占比:"+Math.round(c*1e4)/100+"%<br/>点击查看更多信息<br/>",total:h,value:c}}}s=[l].concat(s),p=[d].concat(p)}this.infos=p,this.source=s},r.prototype.layout=function(){var e=this.defaults;d3.layout.stack().offset(e.offset).order(e.order)(this.source)},r.prototype.getColor=function(e){var n=t.getColor(),r,i=e||{},s=i.mode||"default",o,u;switch(s){case"gradient":u=this.source.length;var a=Math.round(u/5);a>n.length-1&&(a=n.length-1);var f=[n[0][0],n[a][0]],l=t.gradientColor(f,"special"),c=[],h=[];for(o=0;o<u;o++)c.push([l(o/(u-1)),l(o/(u-1))]);for(o=u-1;o>=0;o--)h.push(c[o]);n=c;break;case"random":case"default":}var p=i.ratio||0;p<0&&(p=0),p>1&&(p=1);var d=[];for(o=0,u=n.length;o<u;o++){var v=d3.interpolateRgb.apply(null,[n[o][0],n[o][1]]);d.push(v(p))}return r=d3.scale.ordinal().range(d),r},r.prototype.generatePaths=function(){this.createNavi(),this.createPercentage(),this.createAxis(),this.createStreamPaths(),this.createLegend()},r.prototype.createLegend=function(){var e=this.defaults,t=[],n=[10,20,10,20],r=n[3],i=n[0],s=25,o=10,u=e.legendWidth-e.legendIndent,a=5,f=7,l=18,c,h,p,d,v,m,g,y=this.getColor({mode:e.colorMode}),b,w,E,S,x,T=function(e){var t=e.data.index,n=e.data.stream,r=n.paths[t];n.preIndex=t,n.legends[t].css({background:"#dddddd"}),r.attr({opacity:.5})},N=function(e){var t=e.data.index,n=e.data.stream,r=n.paths[t];n.preIndex=t,n.legends[t].css({background:"white"}),r.attr({opacity:1})};m=$("<ul/>"),m.css({margin:"0px 0px 0px 10px","padding-left":"0px"}),$(this.legend).append(m);for(b=0,w=this.infos.length;b<w;b++)g=$('<li><span style="color: black">'+this.infos[b][0].name+"</span>"+"</li>"),g.css({"list-style-type":"square","list-style-position":"inside",color:y(b),"white-space":"nowrap","padding-left":5}),m.append(g),g.mouseenter({index:b,stream:this},T),g.mouseleave({index:b,stream:this},N),t.push(g);this.legends=t,E=$(this.rightContainer).height(),S=$(this.legend).height(),$(this.leftContainer).css({height:E}),E>S?$(this.legend).css({"margin-top":E-S-30}):$(this.legend).css({"margin-top":0})},r.prototype.createNavi=function(){this.userConfig.more?$(this.navi).css({visibility:"visible",position:"relative"}):$(this.navi).css({visibility:"hidden",position:"absolute"});var e,t;$(this.naviTrace).empty();for(e=0;e<=this.level;e++)$(this.naviTrace).append($("<span> &gt; </span>")),t=document.createElement("span"),t.data={level:e},t=$(t).html(e===0?"第1层":"第"+(e+1)+"层").appendTo($(this.naviTrace)),e!==this.level&&t.css({cursor:"pointer",color:"#1E90FF"}).addClass("navi");this.level>0?this.naviBack.style.visibility="visible":this.naviBack.style.visibility="hidden"},r.prototype.getMaxPercentage=function(){this.maxPercentage=this.allInfos.reduce(function(e,t,n,r){return[{total:e[0].total+t[0].total}]})[0].total},r.prototype.createPercentage=function(){if(!this.userConfig.more)return;var e=this.defaults,t=this.getMaxY(),n;this.firstRender&&this.getMaxPercentage(),t/=this.maxPercentage,n=t>.1?(1-t)*e.height+e.fontSize*2/3:(1-t)*e.height-e.fontSize*2/3,this.firstRender?(this.percentageRect=this.percentagePaper.rect(0,(1-t)*e.height,e.margin[3],t*e.height).attr({fill:"#f4f4f4",stroke:"#aaa","stroke-width":.5}),this.percentageText=this.percentagePaper.text(e.margin[3]/2,n,Math.round(t*100)+"%").attr({"text-anchor":"middle"})):(this.percentageRect.animate({y:(1-t)*e.height,height:t*e.height},750),this.percentageText.attr({text:Math.round(t*100)+"%"}).animate({y:n},750))},r.prototype.createStreamPaths=function(){var e=this.canvas,t=[],n=[],r=this.generateArea(),i=this.getColor({mode:this.defaults.colorMode}),s=this.defaults,o,u,a,f,l,c=function(){var e=this.path,t=e.index;e.paths.forEach(function(e,n,r){n!==t&&r[n].attr({fill:d3.interpolateRgb.apply(null,[r[n].color,"#fff"])(.5)})}),this.style.backgroundColor=d3.interpolateRgb.apply(null,[e.color,"#fff"])(.8)},h=function(){var e=this.path,t=e.index;e.paths.forEach(function(e,n,r){n!==t&&r[n].attr({fill:r[n].color})}),e.legend.style.backgroundColor=e.color},p=function(e,t){var n=0,r=0,i,s=.15,o=0,u=0,a=t.getBBox(),f,l,c,h=!0,p,d;f=Math.ceil(a.width/(e[1].x-e[0].x)/2),f===0&&(f=1),e.forEach(function(e,t,n){var r=Math.max(s*n.length,f);t>=r&&t<=n.length-r&&e.y>u&&(l=e.y0-e.y,c=e.y0,u=e.y,o=t)});for(i=o-f;i<=o+f;i++){if(i<0||i>=e.length){d=0,h=!1;break}p=e[i],p.y0-p.y>l&&(l=p.y0-p.y),p.y0<c&&(c=p.y0)}return h&&c-l>=a.height*.8?(n=e[o].x,r=(l+c)/2):h=!1,{x:n,y:r,showLabel:h}},d=function(e,t){var n,r,i=0,s,o=Math.min(t.indexMargin,Math.floor((e.length-1)/2)),u=.15,a=o,f=0;if(e.length>=t.indexMargin*2+1){e.forEach(function(e,t,n){var r=Math.max(o,u*n.length);t>=r&&t<=n.length-r&&e.y>f&&(f=e.y,a=t)}),n=e[a].x,r=e[a].y0-e[a].y/2;for(s=a-o;s<=a+o;s++)i+=e[s].y;i/=2*o+1}else n=-100,r=-100,i=0;return{x:n,y:r,height:i}};e.rect(0,0,s.width,s.height).attr({stroke:"none",fill:"#e0e0e0"});for(o=0,u=this.source.length;o<u;o++)a=r(this.pathSource[o]),l=e.path(a).attr({fill:i(o),stroke:i(o),"stroke-width":1,"stroke-linejoin":"round",transform:"t0,"+s.topInterval}),l.color=i(o),l.index=o,l.info=this.infos[o],l.paths=t,l.topTrans=s.topInterval,l.bottomTrans=s.bottomInterval,l.stream=this,l.node.streamPath=l,l.node.setAttribute("class","streamPath rvml"),t[l.index]=l;for(o=0,u=t.length;o<u;o++)l=t[o],l.label=this.canvas.text(0,0,s.pathLabel?l.info[0].name+" "+Math.round(l.info[0].total*1e4)/100+"%":"").attr({"text-anchor":"middle",fill:"white","font-size":s.fontSize,"font-family":"微软雅黑"}),l.labelLoc=p(this.pathSource[o],l.label),l.labelLoc.showLabel?l.label.attr({x:l.labelLoc.x,y:l.labelLoc.y}):l.label.attr({opacity:0}),o===0&&l.info[0].id===-1&&(l.attr({cursor:"pointer"}),l.label.attr({cursor:"pointer"})),n.push(l.label),l.label.node.setAttribute("class","streamPath rvml");$(this.canvas.canvas).unbind();var v=function(e){var t=e.data.stream;t.indicatorLine.attr({stroke:"#000"}),t.highlightLine.attr({stroke:"white"}),t.floatTag.css({visibility:"visible"}),t.axisPopText.show(),t.axisPopBubble.show()},m=function(e){var t=e.data.stream,n;t.indicatorLine.attr({stroke:"none"}),t.highlightLine.attr({stroke:"none"}),t.floatTag.css({visibility:"hidden"}),t.axisPopText.hide(),t.axisPopBubble.hide(),typeof t.prePath!="undefined"&&(t.prePath.attr({opacity:1,"stroke-width":1}),t.legends[t.prePath.index].css({background:"white"}),t.prePath=undefined)},g=function(e){var t=e.data.stream,n;typeof t.prePath!="undefined"&&t.prePath.info[0].id===-1&&(t.indicatorLine.attr({stroke:"none"}),t.highlightLine.attr({stroke:"none"}),t.floatTag.css({visibility:"hidden"}),t.level+=1,n=$(this).parent().position(),$(t.cover).css({left:n.left+"px",top:n.top+"px"}),t.cover.style.visibility="visible",t.coverMouse={x:e.pageX,y:e.pageY},t.getLevelSource(),t.reRender(),t.indicatorLine.attr({stroke:"none"}),t.highlightLine.attr({stroke:"none"}),t.floatTag.css({visibility:"hidden"}),t.paths.forEach(function(e,n,r){e.attr({transform:"s1,0.001,0,"+t.defaults.height}),e.label.hide(),e.animate({transform:"t0,0"},750,"linear",function(){t.cover.style.visibility="hidden",typeof t.coverMouse!="undefined"&&(t.indicatorLine.attr({stroke:"#000"}),t.highlightLine.attr({stroke:"white"}),t.floatTag.css({visibility:"visible"}),$(t.canvas.canvas).trigger("mousemove",[t.coverMouse.x,t.coverMouse.y]),t.coverMouse=undefined),e.labelLoc.showLabel&&e.label.show()})}))},y=function(e,t,n){var r=e.data.stream,i=$(this).parent().offset(),s=$(this).parent().position(),o=(e.pageX||t)-i.left,u=(e.pageY||n)-i.top,a,f,l,c={x:20,y:20},h,p=r.pathSource,d,v,m,g,y,b=Math.floor((o/(r.defaults.width/(r.source[0].length-1)/2)+1)/2),w,E;h=undefined,p=r.pathSource;for(g=0,y=p.length;g<y;g++)if(u>=p[g][b].y0-p[g][b].y&&u<=p[g][b].y0){h=r.paths[g],v=g;break}if(typeof h=="undefined")return;typeof r.prePath!="undefined"&&(r.prePath.attr({opacity:1,"stroke-width":1}),r.legends[r.prePath.index].css({background:"white"})),r.prePath=h,h.attr({opacity:.5,"stroke-width":0}),r.legends[r.prePath.index].css({background:"#dddddd"}),E=r.defaults.width*b/(r.source[0].length-1),d=p[p.length-1][b],r.indicatorLine.attr({path:"M"+E+" "+(d.y0-d.y)+"V"+p[0][b].y0}),d=p[v][b],r.highlightLine.attr({path:"M"+E+" "+(d.y0-d.y)+"V"+d.y0}),v===0&&h.info[0].id===-1?r.highlightLine.attr({cursor:"pointer"}):r.highlightLine.attr({cursor:"auto"}),a=r.floatTag,a.html(h.info[b].tip),r.axisPopText.attr({text:r.date[b+r.timeRange[0]]}).transform("t"+(E+r.defaults.margin[3])+",0"),r.axisPopBubble.transform("t"+(E+r.defaults.margin[3])+",0"),r.defaults.customEventHandle.mousemove&&r.defaults.customEventHandle.mousemove.call(r,{timeIndex:b,pathIndex:v})},b=$(this.canvas.canvas);b.bind("mouseenter",{stream:this},v),b.bind("mouseleave",{stream:this},m),b.bind("click",{stream:this},g),b.bind("mousemove",{stream:this},y),this.paths=t,this.labels=n,this.indicatorLine=e.path("M0 "+s.topInterval+"V"+(s.height-s.bottomInterval)).attr({stroke:"none","stroke-width":1,"stroke-dasharray":"- "}),this.highlightLine=e.path("M0 "+s.topInterval+"V"+(s.height-s.bottomInterval)).attr({stroke:"none","stroke-width":2})},r.prototype.createAxis=function(){var e=this.defaults,t=this.date.slice(this.timeRange[0],this.timeRange[1]+1),r=e.margin[3],i=e.totalWidth-e.margin[1]-e.legendWidth,s,o,u=function(e){var t=0,n=0,r=4,i=23,s={height:8};return e&&(s=e.getBBox(),s.height*=.6,i=s.width/2-r),["M",t,n,"l",r,r,i,0,"a",r,r,0,0,1,r,r,"l",0,s.height,"a",r,r,0,0,1,-r,r,"l",-(r*2+i*2),0,"a",r,r,0,0,1,-r,-r,"l",0,-s.height,"a",r,r,0,0,1,r,-r,"l",i,0,"z"].join(",")};this.dateScale=d3.scale.linear().domain([0,t.length-1]).range([r,i]),s=this.axisPaper.text(0,0,t[0]),o=Math.floor((i-r)/s.getBBox().width/2)+1,s.remove(),n().scale(this.dateScale).ticks(o).tickSize(6,3,3).tickAttr({stroke:"none"}).minorTickAttr({stroke:"none"}).domainAttr({stroke:"none"}).tickFormat(function(e){return t[e]||""})(this.axisPaper),this.axisPopText=this.axisPaper.text(0,11,t[0]).attr({"text-anchor":"middle",fill:"#fff",transform:"t"+r+",0"}).hide(),this.axisPopBubble=this.axisPaper.path(u(this.axisPopText)).attr({fill:"#000",transform:"t"+r+",0"}).toBack().hide()},r.prototype.getMaxY=function(){return d3.max(this.source,function(e){return d3.max(e,function(e){return e.y0+e.y})})},r.prototype.mapPathSource=function(){var e=this.defaults,t=this.source[0].length-1,n=this.getMaxY(),r=e.width,i=e.height-e.topInterval-e.bottomInterval,s,o,u,a,f,l;this.pathSource=[];for(s=0,u=this.source.length;s<u;s++){this.pathSource[s]=[];for(o=0,a=this.source[0].length;o<a;o++)f=this.source[s][o],l=this.pathSource[s][o]={},l.x=f.x*r/t,l.y0=i-f.y0*i/n,l.y=f.y*i/n}},r.prototype.generateArea=function(){return this.mapPathSource(),d3.svg.area().x(function(e){return e.x}).y0(function(e){return e.y0}).y1(function(e){return e.y0-e.y})},r.prototype.generateArea_old=function(){var e=this.defaults,t=this.digitData[0].length-1,n=this.getMaxY(),r=e.width,i=e.height-e.topInterval-e.bottomInterval,s=d3.svg.area().x(function(e){return e.x*r/t}).y0(function(e){return i-e.y0*i/n}).y1(function(e){return i-(e.y+e.y0)*i/n});return s},r.prototype.clearCanvas=function(){this.canvas.clear(),this.legend.innerHTML="",this.axisPaper.clear()},r.prototype.reRender=function(e){this.setOptions(e),this.clearCanvas(),this.layout(),this.generatePaths(),this.canAnimate=!0},r.prototype.render=function(e){this.firstRender=!0,this.setOptions(e),this.clearCanvas(),this.layout(),this.generatePaths(),this.firstRender=!1,this.canAnimate=!0},r.prototype.resize=function(e){var t=this.defaults;if(!e.width&&!e.height)throw new Error("no width and height input");e.width&&!e.height?t.autoHeight?this.setOptions({width:e.width}):this.setOptions({width:e.width,height:t.height}):!e.width&&e.height?this.setOptions({width:t.totalWidth,height:e.height}):this.setOptions({width:e.width,height:e.height}),this.node.innerHTML="",this.createCanvas(),this.reRender()},r.prototype.on=function(e,t){typeof this.defaults.customEventHandle[e]!="undefined"&&(this.defaults.customEventHandle[e]=t)},r.prototype.animate=function(e,t){if(!this.canAnimate)throw new Error("Function animate must be called after render if new Source has been set.");var n=0,r,i,s,o;arguments.length>1&&(n=t);if(e.offset||e.order)this.source=this.remapSource(this.digitData),this.layout();r=this.generateArea(),i=this.getColor();for(s=0,o=this.source.length;s<o;s++){var u=r(this.source[s]),a=Raphael.animation({path:u,fill:i(s)},n);this.paths[s].animate(a)}},r}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Tree",function(e){var t=e("DataV"),n=t.Themes,r=t.extend(t.Chart,{initialize:function(e,t){this.type="Tree",this.node=this.checkContainer(e),this.addlink={},this.treeDepth=0,this.font={},this.defaults.width=750,this.defaults.height=760,this.defaults.deep=180,this.defaults.radius=15,this.setOptions(t),this.createCanvas()}});return r.dimension={},r.dimension.id={type:"string",required:!0},r.dimension.pid={type:"string",required:!0},r.prototype.hierarchyTableToJson=function(e){e[0][0]==="ID"&&(e=e.slice(1));var t,n={},r={};e.forEach(function(e,r){if(e[0]==="")throw new Error("ID can not be empty(line:"+(r+1)+").");if(!e[3]){if(t)throw new Error("2 or more lines have an empty parentID(line:"+(r+1)+").");t=e[0]}if(n[e[0]])throw new Error("2 or more lines have same ID: "+e[0]+"(line:"+(r+1)+").");var i="",s,o;if(e.length>4)for(s=4,o=e.length;s<o;s++)s<o-1?i=i+e[s]+",":i+=e[s];n[e[0]]={name:e[1],size:e[2],child:[],id:e[0],value:i}});if(!t)throw new Error("No root node defined.");e.forEach(function(e,t){if(e[3]){var i,s=e[3].split(",");if(s.length===1)i=n[e[3]],i.child.push(e[0]);else{i=n[s[0]],i.child.push(e[0]),r[e[0]]={child:[],path:[],pnode:[]};var o,u;for(o=1,u=s.length;o<u;o++)r[e[0]].child.push(s[o])}if(!i)throw new Error("Can not find parent with ID "+e[3]+"(line:"+(t+1)+").")}}),this.addlink=r;var i=function(e){var t=n[e];if(t.child.length===0){if(isNaN(parseFloat(t.size)))throw new Error("Leaf node's size is not a number(ID:"+(e+1)+").");return{name:t.name,size:t.size,num:t.id,children:null,draw:!1,value:t.value}}var r=[];return t.child.forEach(function(e){r.push(i(e))}),{name:t.name,children:r,num:t.id,draw:!1,value:t.value}};return i(t)},r.prototype.setSource=function(e){var t=this.defaults;this.rawData=this.hierarchyTableToJson(e),this.source=this.remapSource(e),this.source.x0=t.width/2,this.source.y0=t.radius*10,this.source.children.forEach(function n(e){e.children&&(e._children=null,e.children.forEach(n))})},r.prototype.remapSource=function(e){return this.hierarchyTableToJson(e)},r.prototype.layout=function(){var e=this.defaults,t=d3.layout.tree().size([e.width,e.height]);this.nodesData=t.nodes(this.source);var n=0,r=0;this.nodesData.forEach(function(e){e.depth>n&&(n=e.depth)}),this.treeDepth=n,e.deep=e.height/(n+1),this.nodesData.forEach(function(t){t.y=e.radius*3+t.depth*e.deep,t.id=r,r++})},r.prototype.getColor=function(){var e=t.getColor(),n;return e.length>1&&e[0].length>1?n=[e[0][0],e[1][0]]:n=e[0],t.gradientColor(n,"special")},r.prototype.createCanvas=function(){var e=this.defaults;this.canvas=new Raphael(this.node,e.width,e.height),this.node.style.position="relative",this.floatTag=t.FloatTag()(this.node),this.floatTag.css({visibility:"hidden"}),this.DOMNode=$(this.canvas.canvas);var n=this;this.DOMNode.click(function(e){n.trigger("click",e)}),this.DOMNode.dblclick(function(e){n.trigger("dblclick",e)});var r=document.all?"mousewheel":"DOMMouseScroll";this.DOMNode.bind(r,function(e){n.trigger("mousewheel",e)}),this.DOMNode.bind("contextmenu",function(e){n.trigger("contextmenu",e)}),this.DOMNode.delegate("circle","click",function(e){n.trigger("circle_click",e)}),this.DOMNode.delegate("circle","mouseover",function(e){n.trigger("circle_mouseover",e)}),this.DOMNode.delegate("circle","mouseout",function(e){n.trigger("circle_mouseout",e)})},r.prototype.zoom=function(e){var t=e||2,n=this.defaults;n.width=n.width*t,n.height<=this.treeDepth*n.deep&&(n.height=n.height*t),this.canvas.setSize(n.width,n.height),this.canvas.setViewBox(0,0,n.width,800),this.defaults=n,this.render()},r.prototype.getLinkPath=function(e,t,n,r){var i=this.defaults,s=e,o=t+(r-t)/2,u=n,a=r-(r-t)/2,f=[["M",e,t+i.radius],["C",s,o,u,a,n,r-i.radius]];return f},r.prototype.generatePaths=function(){var e=this.canvas,t=this.source,n=this.defaults,r=n.radius,i=this.getColor(),s="微软雅黑",o=8,u=this.treeDepth,a=this.nodesData,f=0,l=this.addlink,c,h=0,p=e.set(),d=[],v=[],m=this,g=function(){m.update(this.data("num"))};$(this.node).append(this.floatTag);var y,b;for(y=0,b=a.length;y<b;y++){var w=a[y],E=w.parent;if(l[w.num]){var S,x,T;for(S=0,T=l[w.num].child.length;S<T;S++)for(x=0;x<b;x++)a[x].num===l[w.num].child[S]&&(l[w.num].pnode[S]=x,l[w.num].path[S]=e.path().attr({stroke:"#939598","stroke-width":.5}))}var N,C;E&&w.draw?(N=E.x,C=E.y):(N=w.x,C=w.y),E&&d.push(e.path().attr({stroke:"#939598","stroke-width":.5})),p.push(e.circle(N,C,r).attr({fill:i(w.depth/u),stroke:"#ffffff","stroke-width":1,"fill-opacity":.4,data:12}).data("num",y).animate({cx:w.x,cy:w.y},500,"backOut")),(w.children||w._children)&&p[y].click(g),w._children&&p[y].attr({stroke:i(w.depth/u),"stroke-width":r,"stroke-opacity":.4,"fill-opacity":1,r:r/2}),w.children?v.push(e.text(w.x,w.y-r-7,w.name).attr({"font-size":12})):v.push(e.text(w.x,w.y+r+7,w.name).attr({"font-size":12}))}var k=this.floatTag;p.forEach(function(e,t){$(e.node).attr("value",a[t].value);var n=v[t].attr("y"),r=e.attr("r"),i=e.attr("stroke-width");e.mouseover(function(){a[t]._children?this.animate({r:r+2,"stroke-opacity":.75},100):this.animate({r:r+2,"fill-opacity":.75},100),v[t].attr({"font-size":20}),t>0&&(a[t].children?v[t].animate({y:n-12},100,"backOut"):v[t].animate({y:n+12},100,"backOut"));var e=function(t,n){var r=t.parent;r&&(d[t.id-1].attr({"stroke-width":4,"stroke-opacity":n}),n>.5&&(n-=.1),e(r,n))};e(a[t],.9);var i=a[t].parent,s,o;for(s=0,o=v.length;s<o;s++){var u=a[s].parent;u===i&&s!==t&&v[s].animate({"fill-opacity":.4})}console.log(a[t]),k.html('<div style = "text-align: center;margin:auto;color:#ffffff">'+a[t].name+"</div>"),k.css({visibility:"visible"})}).mouseout(function(){k.css({visibility:"hidden"}),a[t]._children?this.animate({r:r,"stroke-width":i,"stroke-opacity":.4},100):this.animate({r:r,"fill-opacity":.4},100),v[t].attr({"font-size":12}),v[t].animate({y:n},100,"backOut");var e=function(t){var n=t.parent;n&&(d[t.id-1].attr({"stroke-width":.5,"stroke-opacity":1}),e(n))};e(a[t]);var s=a[t].parent,o,u;for(o=0,u=v.length;o<u;o++){var f=a[o].parent;f===s&&o!==t&&v[o].animate({"fill-opacity":1})}})}),p.onAnimation(function(){var e=0,t,n;for(t=1,n=p.length;t<n;t++){var r=p[t],i=a[t],s=i.parent;d[e].attr({path:m.getLinkPath(s.x,s.y,r.attr("cx"),r.attr("cy"))}),e++;if(l[i.num]){var o,u,f,c;for(o=0,f=l[i.num].child.length;o<f;o++)for(u=0,c=a.length;u<c;u++){var h=a[u];if(h.num===l[i.num].child[o]){var v=m.getLinkPath(h.x,h.y,r.attr("cx"),r.attr("cy"));l[i.num].path[o].attr({path:v})}}}}}),this.nodes=p,this.path=d,this.textpath=v},r.prototype.update=function(e){var t=this.source,n=this.defaults;t.children.forEach(function r(e){e.draw=!1,e.children&&e.children.forEach(r)}),t.children.forEach(function i(t){t.id===e?t.children?(t._children=t.children,t.children=null):(t.children=t._children,t.children&&t.children.forEach(function n(e){e.draw=!0,e.children&&e.children.forEach(n)}),t._children=null):t.children&&t.children.forEach(i)}),this.source=t,this.source.x0=n.width/2,this.source.y0=n.radius*2,this.render()},r.prototype.render=function(e){this.canvas.clear(),this.setOptions(e),this.layout(),this.generatePaths()},r}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Treemap",function(e){var t=e("DataV"),n=t.extend(t.Chart,{initialize:function(e,t){this.type="Treemap",this.node=this.checkContainer(e),this.selectedTreeNodes=[],this.treeNodeJson={},this.level_=2,this.floatTag,this.defaults.width=750,this.defaults.height=500,this.defaults.showBackTag=!0,this.defaults.backHeight=20,this.defaults.level1BorderWidth=1,this.defaults.level2BorderWidth=1,this.defaults.fontSizeRatio=1,this.defaults.customEvent={leafNodeClick:function(){},hoverIn:function(){},hoverOut:function(){},mousemove:function(){var e=this.jqNode,t=e.treemap,n=t.floatTag;n.html('<div style = "text-align: center;margin:auto;color:"#fff">'+e.treemapNode.name+"</div>"+'<div style = "text-align: center; margin:auto;color:'+'"#fff">'+e.treemapNode.value+"</div>")}},this.setOptions(t),this.createCanvas()}});return n.prototype.createCanvas=function(){var e=this.defaults,n,r=this.node,i,s;this.node.style.position="relative",e.showBackTag&&(this.backTag=document.createElement("div"),i=this.backTag.style,i.width=e.width+"px",i.height=e.backHeight+"px",i.paddingLeft="5px",r.appendChild(this.backTag)),this.canvas=document.createElement("div"),s=this.canvas.style,s.position="relative",s.width=e.width+"px",s.height=e.height+"px",r.appendChild(this.canvas),this.floatTag=t.FloatTag()(this.canvas),this.floatTag.css({visibility:"hidden"})},n.prototype._changeLevel1NodeColorIndex=function(e){return this._getNodeTheme||(this._getNodeTheme=d3.scale.ordinal().range(d3.range(t.getColor().length))),this._getNodeTheme(e)},n.prototype.getColor=function(e){var n=t.getColor(),r,i=e||{},s=i.mode||"default",o,u;switch(s){case"multiColorGradient":r=function(){var e=[];return n.forEach(function(t,n){e.push(t[0])}),function(t){var n=(e.length-1)*t,r=Math.floor(n),i=Math.ceil(n);return r===i?e[r]:d3.interpolateRgb.apply(null,[e[r],e[i]])(n-r)}}();break;case"gradient":var a=e.index||0;a=a<0?0:Math.min(a,n.length-1),r=d3.interpolateRgb.apply(null,[n[a][0],n[a][1]]);break;case"random":case"default":var f=i.ratio||0;f<0&&(f=0),f>1&&(f=1);var l=[];for(o=0,u=n.length;o<u;o++){var c=d3.interpolateRgb.apply(null,[n[o][0],n[o][1]]);l.push(c(f))}r=d3.scale.ordinal().range(l)}return r},n.prototype.setSource=function(e){e instanceof Array?this.rawData=this._arrayToJson(e):this.rawData=e,this.source=this._remapSource(this.rawData),this.selectedTreeNodes=[this.source[0]]},n.prototype._arrayToJson=function(e){var t=function(t){var n=e[0],r,i;for(r=0,i=n.length;r<i;r++)if(n[r]===t)return r;return-1},n={},r=["ID","name","size","parentID"],i,s;for(i=0,s=r.length;i<s;i++)if((n[r[i]]=t(r[i]))===-1)throw new Error("no column '"+r[i]+"'");var o=[];for(i=1,s=e.length;i<s;i++){var u=e[i],a=o[i-1]=[],f,l;for(f=0,l=r.length;f<l;f++)a.push(u[n[r[f]]])}var c,h={};o.forEach(function(e,t){if(e[0]==="")throw new Error("ID can not be empty(line:"+(t+1)+").");if(!e[3]){if(c)throw new Error("2 or more lines have an empty parentID(line:"+(t+1)+").");c=e[0]}if(h[e[0]])throw new Error("2 or more lines have same ID: "+e[0]+"(line:"+(t+1)+").");h[e[0]]={name:e[1],size:e[2],child:[]}});if(!c)throw new Error("No root node defined.");o.forEach(function(e,t){if(e[3]){var n=h[e[3]];if(!n)throw new Error("Can not find parent with ID "+e[3]+"(line:"+(t+1)+").");n.child.push(e[0])}});var p=function(e){var t=h[e];if(t.child.length===0){if(isNaN(parseFloat(t.size)))throw new Error("Leaf node's size is not a number(name:"+t.name+").");return{name:t.name,size:t.size}}var n=[];return t.child.forEach(function(e){n.push(p(e))}),{name:t.name,children:n}};return p(c)},n.prototype._remapSource=function(e){var t=this.defaults,n=this._createTreemap(),r=n.nodes(e),i=function(e){if(!e.children)return e.size;var t=0;return e.children.forEach(function(e){t+=parseFloat(i(e),10)}),e.size=t,e.size};return i(r[0]),r},n.prototype._create2LevelJson=function(e){var t=function(e,n){n===2&&e.refer&&(e=e.refer);if(!e.children||n<=0)return{name:e.name,size:e.size,refer:e};var r=[];return e.children.forEach(function(e){r.push(t(e,n-1))}),{name:e.name,children:r,refer:e}};this.treeNodeJson=t(e,this.level_)},n.prototype._goToLeaf=function(e){this.selectedTreeNodes.push(e),this.reRender()},n.prototype._goToRoot=function(e){this.selectedTreeNodes=this.selectedTreeNodes.slice(0,e+1),this.reRender()},n.prototype._createTreemap=function(){var e=this.defaults;return d3.layout.treemap().size([e.width,e.height]).value(function(e){return e.size})},n.prototype.layout=function(){var e=this._createTreemap().sort(function(e,t){return e.value-t.value});this.nodes=e.nodes(this.treeNodeJson)},n.prototype.generatePaths=function(){var e=this.canvas,t=this.defaults,n,r=0,i,s,o,u=[],a={},f,l,c=0,h,p=function(e){var t=e.data.treemap,n=e.data.treemapNode,r=e.data.jqueryNode;r.css({"z-index":30,backgroundColor:r.color}).animate({left:0,top:0,width:t.defaults.width,height:t.defaults.height},1e3,function(){t._goToLeaf(n)})},d=function(e){var t=e.data.treemap;return t.selectedTreeNodes.length>1&&t._goToRoot(t.selectedTreeNodes.length-2),!1},v=function(e,t){return function(){t.forEach(function(t,n,r){n===e?(t.css("font-size",r[n].fontSizeValue*6/5+"px"),t.treemapNode.children&&r[n].css("backgroundColor","")):r[n].css("backgroundColor",d3.interpolateRgb.apply(null,[r[n].color,"#fff"])(.4))}),t[0].treemap.floatTag.css({visibility:"visible"})}},m=function(e){return function(){e.forEach(function(e,t,n){n[t].css("backgroundColor",n[t].color).css("font-size",n[t].fontSizeValue+"px")}),e[0].treemap.floatTag.css({visibility:"hidden"})}},g=function(){this.jqNode.treemap.floatTag.css({visibility:"visible"})},y=function(){this.jqNode.treemap.floatTag.css({visibility:"hidden"})},b=function(e,t){return function(){e.call(t)}};$(e).append(this.floatTag);for(f=0,l=this.nodes.length;f<l;f++){var w=this.nodes[f],E,S,x,T,N,C,k,L=$(document.createElement("div"));!w.parent||!w.parent.parent?(n=this.getColor({mode:"gradient",index:this._changeLevel1NodeColorIndex(w.name)}),r=-1,i=w.children?w.children.length:0,s=.5,w.parent&&(u.push(L),o=L),L.color=n(s),w.parent?(this.selectedTreeNodes.length===1?h||(h=this.getColor({mode:"multiColorGradient"})):h||(C=this.selectedTreeNodes[this.selectedTreeNodes.length-1].color,k=d3.hsl(C),h=d3.interpolateHsl.apply(null,[d3.hsl((k.h+180)%360,k.s,k.l).toString(),C])),L.color=w.parent.children.length===1?h(0):h(c++/(w.parent.children.length-1)),n=d3.interpolateRgb.apply(null,[L.color,d3.interpolateRgb.apply(null,[L.color,"#fff"])(.5)])):this.selectedTreeNodes.length>1&&(L.color=this.selectedTreeNodes[this.selectedTreeNodes.length-1].color)):(r+=1,s=i===1?0:r/(i-1),L.color=n(s)),L.treemapNode=w,w.color=L.color,L.treemap=this,L[0].jqNode=L,L.appendTo($(e)),L.css("borderStyle","solid").css("borderColor","#d6d6d6").css("overflow","hidden").css("fontFamily","黑体").css("position","absolute").css("textIndent","2px").css("backgroundColor",L.color).css("color","white"),w.parent?w.parent&&!w.parent.parent?(L.html(w.name).css("zIndex",20),w.children&&L.css("backgroundColor",L.color)):L.css("borderColor","rgba(255, 255, 255, 0.5)"):w.children||L.html(w.name),E=1,S=Math.max(0,w.dx-E),x=Math.max(0,w.dy-E),L.fontSizeValue=Math.max(t.fontSizeRatio*parseInt(60*Math.sqrt(S*x/t.width/t.height),10),12),L.css("borderWidth",E+"px").css("left",w.x+"px").css("top",w.y+"px").css("width",S+"px").css("height",x+"px").css("fontSize",L.fontSizeValue+"px"),w.parent&&!w.parent.parent&&(L.css("cursor","pointer"),L.clone().insertBefore(L).css("opacity",.01),L.click({treemap:this,treemapNode:w,jqueryNode:L},p),L.mouseover(v(u.length-1,u)),L.mouseout(m(u)),L.mousemove(this.defaults.customEvent.mousemove)),w.parent||(L.mouseover(g),L.mouseout(y),L.mousemove(this.defaults.customEvent.mousemove)),L.bind("contextmenu",{treemap:this},d);var A={treemapNode:w,node:L,name:w.name,parent:w.parent,value:w.value};w.parent&&!w.parent.parent&&!w.children&&L.click(b(this.defaults.customEvent.leafNodeClick,A)),L.mouseover(b(this.defaults.customEvent.hoverIn,A)),L.mouseout(b(this.defaults.customEvent.hoverOut,A))}},n.prototype.clearCanvas=function(){var e=this.canvas;e.innerHTML=""},n.prototype._setBackTag=function(){if(!this.backTag)return;var e=document.createElement("p"),t,n,r=function(e,t){return function(){e._goToRoot(t)}},i,s;for(t=0,n=this.selectedTreeNodes.length;t<n;t++){var o=document.createElement("a");o.innerHTML=this.selectedTreeNodes[t].name,t<n-1?(o.style.color="blue",o.style.cursor="pointer",o.onclick=r(this,t)):i=o;if(t>0){var u=document.createElement("span");u.innerHTML=" &gt; ",e.appendChild(u),t===n-1&&(s=u)}e.appendChild(o)}$(i).css({opacity:.01,position:"relative",left:n===1?0:-20}).animate({opacity:1,left:0},1e3),this.backTag.innerHTML="",this.backTag.appendChild(e)},n.prototype.reRender=function(e){this.clearCanvas(),this.setOptions(e),this._create2LevelJson(this.selectedTreeNodes[this.selectedTreeNodes.length-1]),this.layout(),this._setBackTag(),this.generatePaths()},n.prototype.render=function(e){this.clearCanvas(),this.setOptions(e),this._getNodeTheme=undefined,this.selectedTreeNodes=this.selectedTreeNodes.slice(0,1),this._create2LevelJson(this.selectedTreeNodes[0]),this.layout(),this._setBackTag(),this.generatePaths()},n.prototype.on=function(e,t){$.inArray(e,["leafNodeClick","hoverIn","hoverOut","mousemove"])!==-1&&(this.defaults.customEvent[e]=t)},n}),function(e,t){typeof define=="function"?define(t):this[e]=t(function(e){return this[e]})}("Chinamap",function(e){var t=e("DataV"),n=t.extend(t.Chart,{initialize:function(e,t){this.type="Chinamap",this.node=this.checkContainer(e),this.recentViewBox=[],this.areaBoxes={0:[-1174.6445229087194,-1437.3577680805693,3039.3970214233723,2531.19589698184],65:[-1174.9404317915883,-1136.0130934711678,1216.4169237052663,939.4360818385251],54:[-1061.2905098655508,-273.40253896102865,1182.4138890465167,728.4762434212385],15:[81.92106433333947,-1404.5655158641246,1337.913665139638,1168.7030286278964],63:[-398.0407413665446,-404.86540158240564,770.5429460357634,553.4881569694239],51:[34.77351011413543,-24.727858097581816,654.265749584143,581.5837904142871],23:[1185.0861642873883,-1435.9087566254907,680.9449423479143,618.3772597960831],62:[-197.5222870378875,-631.2015222269291,884.6861134736321,734.2542202456989],53:[-4.030270169151834,326.89754492870105,561.4971786143803,565.9079094851168],45:[444.4355364538484,524.7911424174906,490.6548359068431,384.1667316158848],43:[716.7125751678784,265.3988842488122,346.1702652872375,377.50144051998274],61:[508.5948583446903,-399.56997062473215,321.038690321553,559.1002147021181],44:[790.2032875493967,572.9640361040085,494.8279567104971,388.7112686526252],22:[1287.5729431804648,-950.943295028444,504.33243011403374,354.162667814153],13:[940.0156020671719,-646.4007207319194,325.33903805510784,477.4542727272415],42:[683.8325394595918,45.82949601748078,468.66717545627034,295.2142095820616],52:[392.5021834497175,337.4483828727408,375.50579966539516,320.9420464446699],37:[1035.7855473594757,-382.19242168799906,412.5747391303373,313.152767793266],36:[1012.6841751377355,236.50140310944056,295.599802392515,400.86430917822287],41:[785.5419798731749,-185.2911232263814,362.6977821251186,340.3902676066224],21:[1203.0641741691293,-757.0946871553339,352.71788824534656,357.71276541155214],14:[776.5185040689469,-493.6204506126494,212.68572802329425,448.08485211774945],34:[1054.014965660052,-80.43770626104327,295.73127466484925,352.03731065611606],35:[1172.0955040211252,341.81292779438445,288.99462739279807,339.42845011348845],33:[1272.1789620983063,123.46272678646208,286.17816622252326,286.73860446060394],32:[1125.161343490302,-134.97368204682834,356.1806346879009,291.4961628010442],50:[497.78832088614774,127.0051229616378,291.91221530072164,280.8880182020781],64:[441.193675072408,-376.31946967355213,183.76989823787306,293.0024551112753],46:[723.8031601361929,946.050886515855,183.33374783084207,147.66048518654895],71:[1459.925544038912,519.7445429876257,103.06085087505835,237.80851484008463],11:[1031.6052083127613,-530.1928574952913,103.23943439987329,114.66079087790081],12:[1106.9649995752443,-479.16508616378724,71.21176554916747,120.01987096046025],31:[1420.334836525578,71.79837578328207,70.41721601016525,81.99461244072737],81:[1061.983645387268,769.0837862603122,50.65584483626753,32.17422147262721],82:[1043.1350056914507,798.0786255550063,5.387452843479423,7.564113979470676]},this.mapCache={},this.states=[],this.words=[],this.projection=function(){},this.getAreaPath=function(){},this.defaults={},this.defaults.geoDataPath="",this.defaults.width=750,this.defaults.height=500,this.defaults.mapId="0",this.defaults.customEvent={leafNodeClick:function(){},hoverIn:function(){},hoverOut:function(){},mousemove:function(){}},this.setOptions(t),this.createCanvas()}});return n.prototype.createCanvas=function(){var e=this.defaults,t,n=this.node;this.canvas=document.createElement("div"),t=this.canvas.style,t.position="relative",t.width=e.width+"px",t.height=e.height+"px",n.appendChild(this.canvas),this.paper=new Raphael(this.canvas,e.width,e.height)},n.prototype.getColor=function(){var e=d3.scale.category10();return function(t){return e(t.id)}}(),n.prototype.setSource=function(e){},n.prototype.layout=function(){this.projection=d3.geo.albers().origin([105,30.5]).scale(4e3),this.getAreaPath=d3.geo.path().projection(this.projection)},n.prototype.generatePaths=function(){var e=this.defaults,t=this,n=t.states,r=t.words,i=t.projection,s=t.getAreaPath,o=t.mapCache,u=t.recentViewBox,a=this.paper,f=this.areaBoxes,l=function(c,h){var p=function(e){return e.properties.name},d=function(t){return function(){parseInt(c,10)===0?function(){if(parseInt(t.properties.childNum,10)===1)return;typeof o[t.id]=="undefined"?d3.json(e.geoDataPath+t.id+".json",function(e){l(t.id,e)}):l(t.id)}():function(){l(0)}()}},v=function(e){return i(e.properties.cp)[0]},m=function(e){return i(e.properties.cp)[1]},g=function(e){return e.properties.name};n.forEach(function(e,t){e.hide()}),r.forEach(function(e,t){e.hide()}),n=t.states=[],r=t.words=[],typeof o[c]=="undefined"?(cache=o[c]={states:[],words:[]},h.features.forEach(function(e,r){var i=a.path(s(e));i.attr({fill:t.getColor(e),stroke:"#fff"}),i.click(d(e)),n.push(i),i.node.debugName=e.id,cache.states.push(i)}),h.features.forEach(function(e,t){var n=a.text(v(e),m(e),g(e));n.attr({"font-family":'"微软雅黑", "宋体"'}),n.click(d(e)),r.push(n),cache.words.push(n)})):(n=o[c].states,n.forEach(function(e){e.show()}),r=o[c].words,r.forEach(function(e){e.show()}));var y=function(){var e={},t=f[c];return e.x=t[0],e.y=t[1],e.width=t[2],e.height=t[3],e.x2=t[2]+t[0],e.y2=t[3]+t[1],e};(function(){var i=y(),s=Math.max(i.width/e.width,i.height/e.height),o,f,l=[i.x,i.y,i.width,i.height];for(o=0,f=n.length;o<f;o++)n[o].attr({"stroke-width":1}),r[o].attr({"font-size":Math.round(Math.max(14*s,1))});var c=function(e,t,n){var r=30,i=!0,s=+(new Date),o=function(n){var r=[],i,s;if(n>=1)return t;for(i=0,s=e.length;i<s;i++)r[i]=(t[i]-e[i])*n+e[i];return r},u=function(){var e=+(new Date),t=(e-s)/n;t>1&&(t=1);var r=function(e){return Math.pow(e,1.7)};return r(t)},f=function(){if(i===!1)return;i=!1;var e=u(),t=o(e);a.setViewBox(t[0],t[1],t[2],t[3],!0),e>=1&&clearInterval(l),i=!0},l=setInterval(f,r)};u.length===0?(a.setViewBox(l[0],l[1],l[2],l[3],!0),$("#chart").css("opacity",1)):Raphael.vml?a.setViewBox(l[0],l[1],l[2],l[3],!0):c(u,l,750),u=l})()};d3.json(e.geoDataPath+e.mapId+".json",function(t){l(e.mapId,t)})},n.prototype.clearCanvas=function(){this.paper.clear()},n.prototype.render=function(e){this.setOptions(e),this.clearCanvas(),this.layout(),this.generatePaths()},n.prototype.on=function(e,t){$.inArray(e,["leafNodeClick","hoverIn","hoverOut","mousemove"])!==-1&&(this.defaults.customEvent[e]=t)},n})